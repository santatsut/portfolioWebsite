(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Za(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const Ct={},Tr=[],Ke=()=>{},qh=()=>!1,oo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),tl=e=>e.startsWith("onUpdate:"),fe=Object.assign,el=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},wm=Object.prototype.hasOwnProperty,It=(e,t)=>wm.call(e,t),ot=Array.isArray,wr=e=>ao(e)==="[object Map]",Hh=e=>ao(e)==="[object Set]",ct=e=>typeof e=="function",Lt=e=>typeof e=="string",jn=e=>typeof e=="symbol",Nt=e=>e!==null&&typeof e=="object",zh=e=>(Nt(e)||ct(e))&&ct(e.then)&&ct(e.catch),Kh=Object.prototype.toString,ao=e=>Kh.call(e),Im=e=>ao(e).slice(8,-1),Wh=e=>ao(e)==="[object Object]",nl=e=>Lt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,gs=Za(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),lo=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},Am=/-\w/g,xn=lo(e=>e.replace(Am,t=>t.slice(1).toUpperCase())),bm=/\B([A-Z])/g,sr=lo(e=>e.replace(bm,"-$1").toLowerCase()),Gh=lo(e=>e.charAt(0).toUpperCase()+e.slice(1)),Qo=lo(e=>e?`on${Gh(e)}`:""),Rn=(e,t)=>!Object.is(e,t),Ti=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Qh=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},_a=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Lc;const co=()=>Lc||(Lc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function uo(e){if(ot(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Lt(r)?Pm(r):uo(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Lt(e)||Nt(e))return e}const Sm=/;(?![^(]*\))/g,Rm=/:([^]+)/,Cm=/\/\*[^]*?\*\//g;function Pm(e){const t={};return e.replace(Cm,"").split(Sm).forEach(n=>{if(n){const r=n.split(Rm);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function er(e){let t="";if(Lt(e))t=e;else if(ot(e))for(let n=0;n<e.length;n++){const r=er(e[n]);r&&(t+=r+" ")}else if(Nt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}function Vm(e){if(!e)return null;let{class:t,style:n}=e;return t&&!Lt(t)&&(e.class=er(t)),n&&(e.style=uo(n)),e}const Dm="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",xm=Za(Dm);function Xh(e){return!!e||e===""}const Yh=e=>!!(e&&e.__v_isRef===!0),Me=e=>Lt(e)?e:e==null?"":ot(e)||Nt(e)&&(e.toString===Kh||!ct(e.toString))?Yh(e)?Me(e.value):JSON.stringify(e,Jh,2):String(e),Jh=(e,t)=>Yh(t)?Jh(e,t.value):wr(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[Xo(r,i)+" =>"]=s,n),{})}:Hh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>Xo(n))}:jn(t)?Xo(t):Nt(t)&&!ot(t)&&!Wh(t)?String(t):t,Xo=(e,t="")=>{var n;return jn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ee;class Nm{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ee,!t&&Ee&&(this.index=(Ee.scopes||(Ee.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=Ee;try{return Ee=this,t()}finally{Ee=n}}}on(){++this._on===1&&(this.prevScope=Ee,Ee=this)}off(){this._on>0&&--this._on===0&&(Ee=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Om(){return Ee}let Pt;const Yo=new WeakSet;class Zh{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ee&&Ee.active&&Ee.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Yo.has(this)&&(Yo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ef(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fc(this),nf(this);const t=Pt,n=Le;Pt=this,Le=!0;try{return this.fn()}finally{rf(this),Pt=t,Le=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)il(t);this.deps=this.depsTail=void 0,Fc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Yo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ya(this)&&this.run()}get dirty(){return ya(this)}}let tf=0,_s,ys;function ef(e,t=!1){if(e.flags|=8,t){e.next=ys,ys=e;return}e.next=_s,_s=e}function rl(){tf++}function sl(){if(--tf>0)return;if(ys){let t=ys;for(ys=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;_s;){let t=_s;for(_s=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function nf(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function rf(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),il(r),Mm(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function ya(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(sf(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function sf(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Ds)||(e.globalVersion=Ds,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ya(e))))return;e.flags|=2;const t=e.dep,n=Pt,r=Le;Pt=e,Le=!0;try{nf(e);const s=e.fn(e._value);(t.version===0||Rn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{Pt=n,Le=r,rf(e),e.flags&=-3}}function il(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)il(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Mm(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Le=!0;const of=[];function cn(){of.push(Le),Le=!1}function un(){const e=of.pop();Le=e===void 0?!0:e}function Fc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=Pt;Pt=void 0;try{t()}finally{Pt=n}}}let Ds=0;class km{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ol{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!Pt||!Le||Pt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==Pt)n=this.activeLink=new km(Pt,this),Pt.deps?(n.prevDep=Pt.depsTail,Pt.depsTail.nextDep=n,Pt.depsTail=n):Pt.deps=Pt.depsTail=n,af(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=Pt.depsTail,n.nextDep=void 0,Pt.depsTail.nextDep=n,Pt.depsTail=n,Pt.deps===n&&(Pt.deps=r)}return n}trigger(t){this.version++,Ds++,this.notify(t)}notify(t){rl();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{sl()}}}function af(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)af(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ea=new WeakMap,Jn=Symbol(""),va=Symbol(""),xs=Symbol("");function ce(e,t,n){if(Le&&Pt){let r=Ea.get(e);r||Ea.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new ol),s.map=r,s.key=n),s.track()}}function sn(e,t,n,r,s,i){const a=Ea.get(e);if(!a){Ds++;return}const l=c=>{c&&c.trigger()};if(rl(),t==="clear")a.forEach(l);else{const c=ot(e),h=c&&nl(n);if(c&&n==="length"){const d=Number(r);a.forEach((p,g)=>{(g==="length"||g===xs||!jn(g)&&g>=d)&&l(p)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),h&&l(a.get(xs)),t){case"add":c?h&&l(a.get("length")):(l(a.get(Jn)),wr(e)&&l(a.get(va)));break;case"delete":c||(l(a.get(Jn)),wr(e)&&l(a.get(va)));break;case"set":wr(e)&&l(a.get(Jn));break}}sl()}function dr(e){const t=Tt(e);return t===e?t:(ce(t,"iterate",xs),De(e)?t:t.map(ee))}function ho(e){return ce(e=Tt(e),"iterate",xs),e}const Lm={__proto__:null,[Symbol.iterator](){return Jo(this,Symbol.iterator,ee)},concat(...e){return dr(this).concat(...e.map(t=>ot(t)?dr(t):t))},entries(){return Jo(this,"entries",e=>(e[1]=ee(e[1]),e))},every(e,t){return en(this,"every",e,t,void 0,arguments)},filter(e,t){return en(this,"filter",e,t,n=>n.map(ee),arguments)},find(e,t){return en(this,"find",e,t,ee,arguments)},findIndex(e,t){return en(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return en(this,"findLast",e,t,ee,arguments)},findLastIndex(e,t){return en(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return en(this,"forEach",e,t,void 0,arguments)},includes(...e){return Zo(this,"includes",e)},indexOf(...e){return Zo(this,"indexOf",e)},join(e){return dr(this).join(e)},lastIndexOf(...e){return Zo(this,"lastIndexOf",e)},map(e,t){return en(this,"map",e,t,void 0,arguments)},pop(){return as(this,"pop")},push(...e){return as(this,"push",e)},reduce(e,...t){return Uc(this,"reduce",e,t)},reduceRight(e,...t){return Uc(this,"reduceRight",e,t)},shift(){return as(this,"shift")},some(e,t){return en(this,"some",e,t,void 0,arguments)},splice(...e){return as(this,"splice",e)},toReversed(){return dr(this).toReversed()},toSorted(e){return dr(this).toSorted(e)},toSpliced(...e){return dr(this).toSpliced(...e)},unshift(...e){return as(this,"unshift",e)},values(){return Jo(this,"values",ee)}};function Jo(e,t,n){const r=ho(e),s=r[t]();return r!==e&&!De(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const Fm=Array.prototype;function en(e,t,n,r,s,i){const a=ho(e),l=a!==e&&!De(e),c=a[t];if(c!==Fm[t]){const p=c.apply(e,i);return l?ee(p):p}let h=n;a!==e&&(l?h=function(p,g){return n.call(this,ee(p),g,e)}:n.length>2&&(h=function(p,g){return n.call(this,p,g,e)}));const d=c.call(a,h,r);return l&&s?s(d):d}function Uc(e,t,n,r){const s=ho(e);let i=n;return s!==e&&(De(e)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,e)}):i=function(a,l,c){return n.call(this,a,ee(l),c,e)}),s[t](i,...r)}function Zo(e,t,n){const r=Tt(e);ce(r,"iterate",xs);const s=r[t](...n);return(s===-1||s===!1)&&cl(n[0])?(n[0]=Tt(n[0]),r[t](...n)):s}function as(e,t,n=[]){cn(),rl();const r=Tt(e)[t].apply(e,n);return sl(),un(),r}const Um=Za("__proto__,__v_isRef,__isVue"),lf=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(jn));function Bm(e){jn(e)||(e=String(e));const t=Tt(this);return ce(t,"has",e),t.hasOwnProperty(e)}class cf{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Xm:df:i?ff:hf).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=ot(t);if(!s){let c;if(a&&(c=Lm[n]))return c;if(n==="hasOwnProperty")return Bm}const l=Reflect.get(t,n,he(t)?t:r);if((jn(n)?lf.has(n):Um(n))||(s||ce(t,"get",n),i))return l;if(he(l)){const c=a&&nl(n)?l:l.value;return s&&Nt(c)?wa(c):c}return Nt(l)?s?wa(l):fo(l):l}}class uf extends cf{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=Nn(i);if(!De(r)&&!Nn(r)&&(i=Tt(i),r=Tt(r)),!ot(t)&&he(i)&&!he(r))return c||(i.value=r),!0}const a=ot(t)&&nl(n)?Number(n)<t.length:It(t,n),l=Reflect.set(t,n,r,he(t)?t:s);return t===Tt(s)&&(a?Rn(r,i)&&sn(t,"set",n,r):sn(t,"add",n,r)),l}deleteProperty(t,n){const r=It(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&sn(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!jn(n)||!lf.has(n))&&ce(t,"has",n),r}ownKeys(t){return ce(t,"iterate",ot(t)?"length":Jn),Reflect.ownKeys(t)}}class jm extends cf{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const $m=new uf,qm=new jm,Hm=new uf(!0);const Ta=e=>e,hi=e=>Reflect.getPrototypeOf(e);function zm(e,t,n){return function(...r){const s=this.__v_raw,i=Tt(s),a=wr(i),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,h=s[e](...r),d=n?Ta:t?Ni:ee;return!t&&ce(i,"iterate",c?va:Jn),{next(){const{value:p,done:g}=h.next();return g?{value:p,done:g}:{value:l?[d(p[0]),d(p[1])]:d(p),done:g}},[Symbol.iterator](){return this}}}}function fi(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Km(e,t){const n={get(s){const i=this.__v_raw,a=Tt(i),l=Tt(s);e||(Rn(s,l)&&ce(a,"get",s),ce(a,"get",l));const{has:c}=hi(a),h=t?Ta:e?Ni:ee;if(c.call(a,s))return h(i.get(s));if(c.call(a,l))return h(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&ce(Tt(s),"iterate",Jn),s.size},has(s){const i=this.__v_raw,a=Tt(i),l=Tt(s);return e||(Rn(s,l)&&ce(a,"has",s),ce(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,c=Tt(l),h=t?Ta:e?Ni:ee;return!e&&ce(c,"iterate",Jn),l.forEach((d,p)=>s.call(i,h(d),h(p),a))}};return fe(n,e?{add:fi("add"),set:fi("set"),delete:fi("delete"),clear:fi("clear")}:{add(s){!t&&!De(s)&&!Nn(s)&&(s=Tt(s));const i=Tt(this);return hi(i).has.call(i,s)||(i.add(s),sn(i,"add",s,s)),this},set(s,i){!t&&!De(i)&&!Nn(i)&&(i=Tt(i));const a=Tt(this),{has:l,get:c}=hi(a);let h=l.call(a,s);h||(s=Tt(s),h=l.call(a,s));const d=c.call(a,s);return a.set(s,i),h?Rn(i,d)&&sn(a,"set",s,i):sn(a,"add",s,i),this},delete(s){const i=Tt(this),{has:a,get:l}=hi(i);let c=a.call(i,s);c||(s=Tt(s),c=a.call(i,s)),l&&l.call(i,s);const h=i.delete(s);return c&&sn(i,"delete",s,void 0),h},clear(){const s=Tt(this),i=s.size!==0,a=s.clear();return i&&sn(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=zm(s,e,t)}),n}function al(e,t){const n=Km(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(It(n,s)&&s in r?n:r,s,i)}const Wm={get:al(!1,!1)},Gm={get:al(!1,!0)},Qm={get:al(!0,!1)};const hf=new WeakMap,ff=new WeakMap,df=new WeakMap,Xm=new WeakMap;function Ym(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Jm(e){return e.__v_skip||!Object.isExtensible(e)?0:Ym(Im(e))}function fo(e){return Nn(e)?e:ll(e,!1,$m,Wm,hf)}function pf(e){return ll(e,!1,Hm,Gm,ff)}function wa(e){return ll(e,!0,qm,Qm,df)}function ll(e,t,n,r,s){if(!Nt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Jm(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function Ir(e){return Nn(e)?Ir(e.__v_raw):!!(e&&e.__v_isReactive)}function Nn(e){return!!(e&&e.__v_isReadonly)}function De(e){return!!(e&&e.__v_isShallow)}function cl(e){return e?!!e.__v_raw:!1}function Tt(e){const t=e&&e.__v_raw;return t?Tt(t):e}function Zm(e){return!It(e,"__v_skip")&&Object.isExtensible(e)&&Qh(e,"__v_skip",!0),e}const ee=e=>Nt(e)?fo(e):e,Ni=e=>Nt(e)?wa(e):e;function he(e){return e?e.__v_isRef===!0:!1}function Ns(e){return mf(e,!1)}function tg(e){return mf(e,!0)}function mf(e,t){return he(e)?e:new eg(e,t)}class eg{constructor(t,n){this.dep=new ol,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:Tt(t),this._value=n?t:ee(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||De(t)||Nn(t);t=r?t:Tt(t),Rn(t,n)&&(this._rawValue=t,this._value=r?t:ee(t),this.dep.trigger())}}function Ar(e){return he(e)?e.value:e}const ng={get:(e,t,n)=>t==="__v_raw"?e:Ar(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return he(s)&&!he(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function gf(e){return Ir(e)?e:new Proxy(e,ng)}class rg{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new ol(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Ds-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&Pt!==this)return ef(this,!0),!0}get value(){const t=this.dep.track();return sf(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function sg(e,t,n=!1){let r,s;return ct(e)?r=e:(r=e.get,s=e.set),new rg(r,s,n)}const di={},Oi=new WeakMap;let Qn;function ig(e,t=!1,n=Qn){if(n){let r=Oi.get(n);r||Oi.set(n,r=[]),r.push(e)}}function og(e,t,n=Ct){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:c}=n,h=G=>s?G:De(G)||s===!1||s===0?on(G,1):on(G);let d,p,g,E,V=!1,N=!1;if(he(e)?(p=()=>e.value,V=De(e)):Ir(e)?(p=()=>h(e),V=!0):ot(e)?(N=!0,V=e.some(G=>Ir(G)||De(G)),p=()=>e.map(G=>{if(he(G))return G.value;if(Ir(G))return h(G);if(ct(G))return c?c(G,2):G()})):ct(e)?t?p=c?()=>c(e,2):e:p=()=>{if(g){cn();try{g()}finally{un()}}const G=Qn;Qn=d;try{return c?c(e,3,[E]):e(E)}finally{Qn=G}}:p=Ke,t&&s){const G=p,lt=s===!0?1/0:s;p=()=>on(G(),lt)}const k=Om(),q=()=>{d.stop(),k&&k.active&&el(k.effects,d)};if(i&&t){const G=t;t=(...lt)=>{G(...lt),q()}}let $=N?new Array(e.length).fill(di):di;const H=G=>{if(!(!(d.flags&1)||!d.dirty&&!G))if(t){const lt=d.run();if(s||V||(N?lt.some((ft,I)=>Rn(ft,$[I])):Rn(lt,$))){g&&g();const ft=Qn;Qn=d;try{const I=[lt,$===di?void 0:N&&$[0]===di?[]:$,E];$=lt,c?c(t,3,I):t(...I)}finally{Qn=ft}}}else d.run()};return l&&l(H),d=new Zh(p),d.scheduler=a?()=>a(H,!1):H,E=G=>ig(G,!1,d),g=d.onStop=()=>{const G=Oi.get(d);if(G){if(c)c(G,4);else for(const lt of G)lt();Oi.delete(d)}},t?r?H(!0):$=d.run():a?a(H.bind(null,!0),!0):d.run(),q.pause=d.pause.bind(d),q.resume=d.resume.bind(d),q.stop=q,q}function on(e,t=1/0,n){if(t<=0||!Nt(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,he(e))on(e.value,t,n);else if(ot(e))for(let r=0;r<e.length;r++)on(e[r],t,n);else if(Hh(e)||wr(e))e.forEach(r=>{on(r,t,n)});else if(Wh(e)){for(const r in e)on(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&on(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Gs(e,t,n,r){try{return r?e(...r):e()}catch(s){po(s,t,n)}}function Ye(e,t,n,r){if(ct(e)){const s=Gs(e,t,n,r);return s&&zh(s)&&s.catch(i=>{po(i,t,n)}),s}if(ot(e)){const s=[];for(let i=0;i<e.length;i++)s.push(Ye(e[i],t,n,r));return s}}function po(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||Ct;if(t){let l=t.parent;const c=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](e,c,h)===!1)return}l=l.parent}if(i){cn(),Gs(i,null,10,[e,c,h]),un();return}}ag(e,n,s,r,a)}function ag(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const me=[];let qe=-1;const br=[];let In=null,pr=0;const _f=Promise.resolve();let Mi=null;function yf(e){const t=Mi||_f;return e?t.then(this?e.bind(this):e):t}function lg(e){let t=qe+1,n=me.length;for(;t<n;){const r=t+n>>>1,s=me[r],i=Os(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function ul(e){if(!(e.flags&1)){const t=Os(e),n=me[me.length-1];!n||!(e.flags&2)&&t>=Os(n)?me.push(e):me.splice(lg(t),0,e),e.flags|=1,Ef()}}function Ef(){Mi||(Mi=_f.then(Tf))}function cg(e){ot(e)?br.push(...e):In&&e.id===-1?In.splice(pr+1,0,e):e.flags&1||(br.push(e),e.flags|=1),Ef()}function Bc(e,t,n=qe+1){for(;n<me.length;n++){const r=me[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;me.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function vf(e){if(br.length){const t=[...new Set(br)].sort((n,r)=>Os(n)-Os(r));if(br.length=0,In){In.push(...t);return}for(In=t,pr=0;pr<In.length;pr++){const n=In[pr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}In=null,pr=0}}const Os=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Tf(e){try{for(qe=0;qe<me.length;qe++){const t=me[qe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Gs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;qe<me.length;qe++){const t=me[qe];t&&(t.flags&=-2)}qe=-1,me.length=0,vf(),Mi=null,(me.length||br.length)&&Tf()}}let Ve=null,wf=null;function ki(e){const t=Ve;return Ve=e,wf=e&&e.type.__scopeId||null,t}function ug(e,t=Ve,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Bi(-1);const i=ki(t);let a;try{a=e(...s)}finally{ki(i),r._d&&Bi(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function pi(e,t){if(Ve===null)return e;const n=Eo(Ve),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,c=Ct]=t[s];i&&(ct(i)&&(i={mounted:i,updated:i}),i.deep&&on(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:c}))}return e}function Wn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let c=l.dir[r];c&&(cn(),Ye(c,n,8,[e.el,l,e,t]),un())}}const hg=Symbol("_vte"),fg=e=>e.__isTeleport,dg=Symbol("_leaveCb");function hl(e,t){e.shapeFlag&6&&e.component?(e.transition=t,hl(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function If(e,t){return ct(e)?fe({name:e.name},t,{setup:e}):e}function Af(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Li=new WeakMap;function Es(e,t,n,r,s=!1){if(ot(e)){e.forEach((V,N)=>Es(V,t&&(ot(t)?t[N]:t),n,r,s));return}if(vs(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Es(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?Eo(r.component):r.el,a=s?null:i,{i:l,r:c}=e,h=t&&t.r,d=l.refs===Ct?l.refs={}:l.refs,p=l.setupState,g=Tt(p),E=p===Ct?qh:V=>It(g,V);if(h!=null&&h!==c){if(jc(t),Lt(h))d[h]=null,E(h)&&(p[h]=null);else if(he(h)){h.value=null;const V=t;V.k&&(d[V.k]=null)}}if(ct(c))Gs(c,l,12,[a,d]);else{const V=Lt(c),N=he(c);if(V||N){const k=()=>{if(e.f){const q=V?E(c)?p[c]:d[c]:c.value;if(s)ot(q)&&el(q,i);else if(ot(q))q.includes(i)||q.push(i);else if(V)d[c]=[i],E(c)&&(p[c]=d[c]);else{const $=[i];c.value=$,e.k&&(d[e.k]=$)}}else V?(d[c]=a,E(c)&&(p[c]=a)):N&&(c.value=a,e.k&&(d[e.k]=a))};if(a){const q=()=>{k(),Li.delete(e)};q.id=-1,Li.set(e,q),Se(q,n)}else jc(e),k()}}}function jc(e){const t=Li.get(e);t&&(t.flags|=8,Li.delete(e))}co().requestIdleCallback;co().cancelIdleCallback;const vs=e=>!!e.type.__asyncLoader,bf=e=>e.type.__isKeepAlive;function pg(e,t){Sf(e,"a",t)}function mg(e,t){Sf(e,"da",t)}function Sf(e,t,n=ge){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(mo(t,r,n),n){let s=n.parent;for(;s&&s.parent;)bf(s.parent.vnode)&&gg(r,t,n,s),s=s.parent}}function gg(e,t,n,r){const s=mo(t,e,r,!0);go(()=>{el(r[t],s)},n)}function mo(e,t,n=ge,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{cn();const l=Qs(n),c=Ye(t,n,e,a);return l(),un(),c});return r?s.unshift(i):s.push(i),i}}const pn=e=>(t,n=ge)=>{(!ks||e==="sp")&&mo(e,(...r)=>t(...r),n)},_g=pn("bm"),fl=pn("m"),yg=pn("bu"),Eg=pn("u"),vg=pn("bum"),go=pn("um"),Tg=pn("sp"),wg=pn("rtg"),Ig=pn("rtc");function Ag(e,t=ge){mo("ec",e,t)}const bg=Symbol.for("v-ndc");function Fi(e,t,n,r){let s;const i=n,a=ot(e);if(a||Lt(e)){const l=a&&Ir(e);let c=!1,h=!1;l&&(c=!De(e),h=Nn(e),e=ho(e)),s=new Array(e.length);for(let d=0,p=e.length;d<p;d++)s[d]=t(c?h?Ni(ee(e[d])):ee(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(Nt(e))if(e[Symbol.iterator])s=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const d=l[c];s[c]=t(e[d],d,c,i)}}else s=[];return s}const Ia=e=>e?Gf(e)?Eo(e):Ia(e.parent):null,Ts=fe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ia(e.parent),$root:e=>Ia(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Cf(e),$forceUpdate:e=>e.f||(e.f=()=>{ul(e.update)}),$nextTick:e=>e.n||(e.n=yf.bind(e.proxy)),$watch:e=>Kg.bind(e)}),ta=(e,t)=>e!==Ct&&!e.__isScriptSetup&&It(e,t),Sg={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:c}=e;let h;if(t[0]!=="$"){const E=a[t];if(E!==void 0)switch(E){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(ta(r,t))return a[t]=1,r[t];if(s!==Ct&&It(s,t))return a[t]=2,s[t];if((h=e.propsOptions[0])&&It(h,t))return a[t]=3,i[t];if(n!==Ct&&It(n,t))return a[t]=4,n[t];Aa&&(a[t]=0)}}const d=Ts[t];let p,g;if(d)return t==="$attrs"&&ce(e.attrs,"get",""),d(e);if((p=l.__cssModules)&&(p=p[t]))return p;if(n!==Ct&&It(n,t))return a[t]=4,n[t];if(g=c.config.globalProperties,It(g,t))return g[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return ta(s,t)?(s[t]=n,!0):r!==Ct&&It(r,t)?(r[t]=n,!0):It(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:a}},l){let c,h;return!!(n[l]||e!==Ct&&l[0]!=="$"&&It(e,l)||ta(t,l)||(c=i[0])&&It(c,l)||It(r,l)||It(Ts,l)||It(s.config.globalProperties,l)||(h=a.__cssModules)&&h[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:It(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function $c(e){return ot(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Aa=!0;function Rg(e){const t=Cf(e),n=e.proxy,r=e.ctx;Aa=!1,t.beforeCreate&&qc(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:c,inject:h,created:d,beforeMount:p,mounted:g,beforeUpdate:E,updated:V,activated:N,deactivated:k,beforeDestroy:q,beforeUnmount:$,destroyed:H,unmounted:G,render:lt,renderTracked:ft,renderTriggered:I,errorCaptured:y,serverPrefetch:T,expose:b,inheritAttrs:A,components:R,directives:v,filters:Ft}=t;if(h&&Cg(h,r,null),a)for(const Et in a){const mt=a[Et];ct(mt)&&(r[Et]=mt.bind(n))}if(s){const Et=s.call(n,n);Nt(Et)&&(e.data=fo(Et))}if(Aa=!0,i)for(const Et in i){const mt=i[Et],ye=ct(mt)?mt.bind(n,n):ct(mt.get)?mt.get.bind(n,n):Ke,Ue=!ct(mt)&&ct(mt.set)?mt.set.bind(n):Ke,we=Oe({get:ye,set:Ue});Object.defineProperty(r,Et,{enumerable:!0,configurable:!0,get:()=>we.value,set:Jt=>we.value=Jt})}if(l)for(const Et in l)Rf(l[Et],r,n,Et);if(c){const Et=ct(c)?c.call(n):c;Reflect.ownKeys(Et).forEach(mt=>{wi(mt,Et[mt])})}d&&qc(d,e,"c");function Ut(Et,mt){ot(mt)?mt.forEach(ye=>Et(ye.bind(n))):mt&&Et(mt.bind(n))}if(Ut(_g,p),Ut(fl,g),Ut(yg,E),Ut(Eg,V),Ut(pg,N),Ut(mg,k),Ut(Ag,y),Ut(Ig,ft),Ut(wg,I),Ut(vg,$),Ut(go,G),Ut(Tg,T),ot(b))if(b.length){const Et=e.exposed||(e.exposed={});b.forEach(mt=>{Object.defineProperty(Et,mt,{get:()=>n[mt],set:ye=>n[mt]=ye,enumerable:!0})})}else e.exposed||(e.exposed={});lt&&e.render===Ke&&(e.render=lt),A!=null&&(e.inheritAttrs=A),R&&(e.components=R),v&&(e.directives=v),T&&Af(e)}function Cg(e,t,n=Ke){ot(e)&&(e=ba(e));for(const r in e){const s=e[r];let i;Nt(s)?"default"in s?i=an(s.from||r,s.default,!0):i=an(s.from||r):i=an(s),he(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function qc(e,t,n){Ye(ot(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function Rf(e,t,n,r){let s=r.includes(".")?jf(n,r):()=>n[r];if(Lt(e)){const i=t[e];ct(i)&&Ii(s,i)}else if(ct(e))Ii(s,e.bind(n));else if(Nt(e))if(ot(e))e.forEach(i=>Rf(i,t,n,r));else{const i=ct(e.handler)?e.handler.bind(n):t[e.handler];ct(i)&&Ii(s,i,e)}}function Cf(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(h=>Ui(c,h,a,!0)),Ui(c,t,a)),Nt(t)&&i.set(t,c),c}function Ui(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Ui(e,i,n,!0),s&&s.forEach(a=>Ui(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=Pg[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const Pg={data:Hc,props:zc,emits:zc,methods:hs,computed:hs,beforeCreate:pe,created:pe,beforeMount:pe,mounted:pe,beforeUpdate:pe,updated:pe,beforeDestroy:pe,beforeUnmount:pe,destroyed:pe,unmounted:pe,activated:pe,deactivated:pe,errorCaptured:pe,serverPrefetch:pe,components:hs,directives:hs,watch:Dg,provide:Hc,inject:Vg};function Hc(e,t){return t?e?function(){return fe(ct(e)?e.call(this,this):e,ct(t)?t.call(this,this):t)}:t:e}function Vg(e,t){return hs(ba(e),ba(t))}function ba(e){if(ot(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function pe(e,t){return e?[...new Set([].concat(e,t))]:t}function hs(e,t){return e?fe(Object.create(null),e,t):t}function zc(e,t){return e?ot(e)&&ot(t)?[...new Set([...e,...t])]:fe(Object.create(null),$c(e),$c(t??{})):t}function Dg(e,t){if(!e)return t;if(!t)return e;const n=fe(Object.create(null),e);for(const r in t)n[r]=pe(e[r],t[r]);return n}function Pf(){return{app:null,config:{isNativeTag:qh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let xg=0;function Ng(e,t){return function(r,s=null){ct(r)||(r=fe({},r)),s!=null&&!Nt(s)&&(s=null);const i=Pf(),a=new WeakSet,l=[];let c=!1;const h=i.app={_uid:xg++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:m_,get config(){return i.config},set config(d){},use(d,...p){return a.has(d)||(d&&ct(d.install)?(a.add(d),d.install(h,...p)):ct(d)&&(a.add(d),d(h,...p))),h},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),h},component(d,p){return p?(i.components[d]=p,h):i.components[d]},directive(d,p){return p?(i.directives[d]=p,h):i.directives[d]},mount(d,p,g){if(!c){const E=h._ceVNode||zt(r,s);return E.appContext=i,g===!0?g="svg":g===!1&&(g=void 0),e(E,d,g),c=!0,h._container=d,d.__vue_app__=h,Eo(E.component)}},onUnmount(d){l.push(d)},unmount(){c&&(Ye(l,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(d,p){return i.provides[d]=p,h},runWithContext(d){const p=Sr;Sr=h;try{return d()}finally{Sr=p}}};return h}}let Sr=null;function wi(e,t){if(ge){let n=ge.provides;const r=ge.parent&&ge.parent.provides;r===n&&(n=ge.provides=Object.create(r)),n[e]=t}}function an(e,t,n=!1){const r=c_();if(r||Sr){let s=Sr?Sr._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ct(t)?t.call(r&&r.proxy):t}}const Vf={},Df=()=>Object.create(Vf),xf=e=>Object.getPrototypeOf(e)===Vf;function Og(e,t,n,r=!1){const s={},i=Df();e.propsDefaults=Object.create(null),Nf(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:pf(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function Mg(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=Tt(s),[c]=e.propsOptions;let h=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let p=0;p<d.length;p++){let g=d[p];if(_o(e.emitsOptions,g))continue;const E=t[g];if(c)if(It(i,g))E!==i[g]&&(i[g]=E,h=!0);else{const V=xn(g);s[V]=Sa(c,l,V,E,e,!1)}else E!==i[g]&&(i[g]=E,h=!0)}}}else{Nf(e,t,s,i)&&(h=!0);let d;for(const p in l)(!t||!It(t,p)&&((d=sr(p))===p||!It(t,d)))&&(c?n&&(n[p]!==void 0||n[d]!==void 0)&&(s[p]=Sa(c,l,p,void 0,e,!0)):delete s[p]);if(i!==l)for(const p in i)(!t||!It(t,p))&&(delete i[p],h=!0)}h&&sn(e.attrs,"set","")}function Nf(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(gs(c))continue;const h=t[c];let d;s&&It(s,d=xn(c))?!i||!i.includes(d)?n[d]=h:(l||(l={}))[d]=h:_o(e.emitsOptions,c)||(!(c in r)||h!==r[c])&&(r[c]=h,a=!0)}if(i){const c=Tt(n),h=l||Ct;for(let d=0;d<i.length;d++){const p=i[d];n[p]=Sa(s,c,p,h[p],e,!It(h,p))}}return a}function Sa(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=It(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&ct(c)){const{propsDefaults:h}=s;if(n in h)r=h[n];else{const d=Qs(s);r=h[n]=c.call(null,t),d()}}else r=c;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===sr(n))&&(r=!0))}return r}const kg=new WeakMap;function Of(e,t,n=!1){const r=n?kg:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let c=!1;if(!ct(e)){const d=p=>{c=!0;const[g,E]=Of(p,t,!0);fe(a,g),E&&l.push(...E)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return Nt(e)&&r.set(e,Tr),Tr;if(ot(i))for(let d=0;d<i.length;d++){const p=xn(i[d]);Kc(p)&&(a[p]=Ct)}else if(i)for(const d in i){const p=xn(d);if(Kc(p)){const g=i[d],E=a[p]=ot(g)||ct(g)?{type:g}:fe({},g),V=E.type;let N=!1,k=!0;if(ot(V))for(let q=0;q<V.length;++q){const $=V[q],H=ct($)&&$.name;if(H==="Boolean"){N=!0;break}else H==="String"&&(k=!1)}else N=ct(V)&&V.name==="Boolean";E[0]=N,E[1]=k,(N||It(E,"default"))&&l.push(p)}}const h=[a,l];return Nt(e)&&r.set(e,h),h}function Kc(e){return e[0]!=="$"&&!gs(e)}const dl=e=>e==="_"||e==="_ctx"||e==="$stable",pl=e=>ot(e)?e.map(ze):[ze(e)],Lg=(e,t,n)=>{if(t._n)return t;const r=ug((...s)=>pl(t(...s)),n);return r._c=!1,r},Mf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(dl(s))continue;const i=e[s];if(ct(i))t[s]=Lg(s,i,r);else if(i!=null){const a=pl(i);t[s]=()=>a}}},kf=(e,t)=>{const n=pl(t);e.slots.default=()=>n},Lf=(e,t,n)=>{for(const r in t)(n||!dl(r))&&(e[r]=t[r])},Fg=(e,t,n)=>{const r=e.slots=Df();if(e.vnode.shapeFlag&32){const s=t._;s?(Lf(r,t,n),n&&Qh(r,"_",s,!0)):Mf(t,r)}else t&&kf(e,t)},Ug=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=Ct;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Lf(s,t,n):(i=!t.$stable,Mf(t,s)),a=t}else t&&(kf(e,t),a={default:1});if(i)for(const l in s)!dl(l)&&a[l]==null&&delete s[l]},Se=t_;function Bg(e){return jg(e)}function jg(e,t){const n=co();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:c,setText:h,setElementText:d,parentNode:p,nextSibling:g,setScopeId:E=Ke,insertStaticContent:V}=e,N=(_,w,S,O=null,L=null,D=null,K=void 0,j=null,U=!!w.dynamicChildren)=>{if(_===w)return;_&&!ls(_,w)&&(O=x(_),Jt(_,L,D,!0),_=null),w.patchFlag===-2&&(U=!1,w.dynamicChildren=null);const{type:B,ref:nt,shapeFlag:Q}=w;switch(B){case yo:k(_,w,S,O);break;case On:q(_,w,S,O);break;case Ai:_==null&&$(w,S,O,K);break;case Te:R(_,w,S,O,L,D,K,j,U);break;default:Q&1?lt(_,w,S,O,L,D,K,j,U):Q&6?v(_,w,S,O,L,D,K,j,U):(Q&64||Q&128)&&B.process(_,w,S,O,L,D,K,j,U,J)}nt!=null&&L?Es(nt,_&&_.ref,D,w||_,!w):nt==null&&_&&_.ref!=null&&Es(_.ref,null,D,_,!0)},k=(_,w,S,O)=>{if(_==null)r(w.el=l(w.children),S,O);else{const L=w.el=_.el;w.children!==_.children&&h(L,w.children)}},q=(_,w,S,O)=>{_==null?r(w.el=c(w.children||""),S,O):w.el=_.el},$=(_,w,S,O)=>{[_.el,_.anchor]=V(_.children,w,S,O,_.el,_.anchor)},H=({el:_,anchor:w},S,O)=>{let L;for(;_&&_!==w;)L=g(_),r(_,S,O),_=L;r(w,S,O)},G=({el:_,anchor:w})=>{let S;for(;_&&_!==w;)S=g(_),s(_),_=S;s(w)},lt=(_,w,S,O,L,D,K,j,U)=>{w.type==="svg"?K="svg":w.type==="math"&&(K="mathml"),_==null?ft(w,S,O,L,D,K,j,U):T(_,w,L,D,K,j,U)},ft=(_,w,S,O,L,D,K,j)=>{let U,B;const{props:nt,shapeFlag:Q,transition:tt,dirs:rt}=_;if(U=_.el=a(_.type,D,nt&&nt.is,nt),Q&8?d(U,_.children):Q&16&&y(_.children,U,null,O,L,ea(_,D),K,j),rt&&Wn(_,null,O,"created"),I(U,_,_.scopeId,K,O),nt){for(const St in nt)St!=="value"&&!gs(St)&&i(U,St,null,nt[St],D,O);"value"in nt&&i(U,"value",null,nt.value,D),(B=nt.onVnodeBeforeMount)&&$e(B,O,_)}rt&&Wn(_,null,O,"beforeMount");const ht=$g(L,tt);ht&&tt.beforeEnter(U),r(U,w,S),((B=nt&&nt.onVnodeMounted)||ht||rt)&&Se(()=>{B&&$e(B,O,_),ht&&tt.enter(U),rt&&Wn(_,null,O,"mounted")},L)},I=(_,w,S,O,L)=>{if(S&&E(_,S),O)for(let D=0;D<O.length;D++)E(_,O[D]);if(L){let D=L.subTree;if(w===D||qf(D.type)&&(D.ssContent===w||D.ssFallback===w)){const K=L.vnode;I(_,K,K.scopeId,K.slotScopeIds,L.parent)}}},y=(_,w,S,O,L,D,K,j,U=0)=>{for(let B=U;B<_.length;B++){const nt=_[B]=j?An(_[B]):ze(_[B]);N(null,nt,w,S,O,L,D,K,j)}},T=(_,w,S,O,L,D,K)=>{const j=w.el=_.el;let{patchFlag:U,dynamicChildren:B,dirs:nt}=w;U|=_.patchFlag&16;const Q=_.props||Ct,tt=w.props||Ct;let rt;if(S&&Gn(S,!1),(rt=tt.onVnodeBeforeUpdate)&&$e(rt,S,w,_),nt&&Wn(w,_,S,"beforeUpdate"),S&&Gn(S,!0),(Q.innerHTML&&tt.innerHTML==null||Q.textContent&&tt.textContent==null)&&d(j,""),B?b(_.dynamicChildren,B,j,S,O,ea(w,L),D):K||mt(_,w,j,null,S,O,ea(w,L),D,!1),U>0){if(U&16)A(j,Q,tt,S,L);else if(U&2&&Q.class!==tt.class&&i(j,"class",null,tt.class,L),U&4&&i(j,"style",Q.style,tt.style,L),U&8){const ht=w.dynamicProps;for(let St=0;St<ht.length;St++){const yt=ht[St],ie=Q[yt],oe=tt[yt];(oe!==ie||yt==="value")&&i(j,yt,ie,oe,L,S)}}U&1&&_.children!==w.children&&d(j,w.children)}else!K&&B==null&&A(j,Q,tt,S,L);((rt=tt.onVnodeUpdated)||nt)&&Se(()=>{rt&&$e(rt,S,w,_),nt&&Wn(w,_,S,"updated")},O)},b=(_,w,S,O,L,D,K)=>{for(let j=0;j<w.length;j++){const U=_[j],B=w[j],nt=U.el&&(U.type===Te||!ls(U,B)||U.shapeFlag&198)?p(U.el):S;N(U,B,nt,null,O,L,D,K,!0)}},A=(_,w,S,O,L)=>{if(w!==S){if(w!==Ct)for(const D in w)!gs(D)&&!(D in S)&&i(_,D,w[D],null,L,O);for(const D in S){if(gs(D))continue;const K=S[D],j=w[D];K!==j&&D!=="value"&&i(_,D,j,K,L,O)}"value"in S&&i(_,"value",w.value,S.value,L)}},R=(_,w,S,O,L,D,K,j,U)=>{const B=w.el=_?_.el:l(""),nt=w.anchor=_?_.anchor:l("");let{patchFlag:Q,dynamicChildren:tt,slotScopeIds:rt}=w;rt&&(j=j?j.concat(rt):rt),_==null?(r(B,S,O),r(nt,S,O),y(w.children||[],S,nt,L,D,K,j,U)):Q>0&&Q&64&&tt&&_.dynamicChildren?(b(_.dynamicChildren,tt,S,L,D,K,j),(w.key!=null||L&&w===L.subTree)&&Ff(_,w,!0)):mt(_,w,S,nt,L,D,K,j,U)},v=(_,w,S,O,L,D,K,j,U)=>{w.slotScopeIds=j,_==null?w.shapeFlag&512?L.ctx.activate(w,S,O,K,U):Ft(w,S,O,L,D,K,U):_e(_,w,U)},Ft=(_,w,S,O,L,D,K)=>{const j=_.component=l_(_,O,L);if(bf(_)&&(j.ctx.renderer=J),u_(j,!1,K),j.asyncDep){if(L&&L.registerDep(j,Ut,K),!_.el){const U=j.subTree=zt(On);q(null,U,w,S),_.placeholder=U.el}}else Ut(j,_,w,S,L,D,K)},_e=(_,w,S)=>{const O=w.component=_.component;if(Jg(_,w,S))if(O.asyncDep&&!O.asyncResolved){Et(O,w,S);return}else O.next=w,O.update();else w.el=_.el,O.vnode=w},Ut=(_,w,S,O,L,D,K)=>{const j=()=>{if(_.isMounted){let{next:Q,bu:tt,u:rt,parent:ht,vnode:St}=_;{const Ae=Uf(_);if(Ae){Q&&(Q.el=St.el,Et(_,Q,K)),Ae.asyncDep.then(()=>{_.isUnmounted||j()});return}}let yt=Q,ie;Gn(_,!1),Q?(Q.el=St.el,Et(_,Q,K)):Q=St,tt&&Ti(tt),(ie=Q.props&&Q.props.onVnodeBeforeUpdate)&&$e(ie,ht,Q,St),Gn(_,!0);const oe=Gc(_),Ie=_.subTree;_.subTree=oe,N(Ie,oe,p(Ie.el),x(Ie),_,L,D),Q.el=oe.el,yt===null&&Zg(_,oe.el),rt&&Se(rt,L),(ie=Q.props&&Q.props.onVnodeUpdated)&&Se(()=>$e(ie,ht,Q,St),L)}else{let Q;const{el:tt,props:rt}=w,{bm:ht,m:St,parent:yt,root:ie,type:oe}=_,Ie=vs(w);Gn(_,!1),ht&&Ti(ht),!Ie&&(Q=rt&&rt.onVnodeBeforeMount)&&$e(Q,yt,w),Gn(_,!0);{ie.ce&&ie.ce._def.shadowRoot!==!1&&ie.ce._injectChildStyle(oe);const Ae=_.subTree=Gc(_);N(null,Ae,S,O,_,L,D),w.el=Ae.el}if(St&&Se(St,L),!Ie&&(Q=rt&&rt.onVnodeMounted)){const Ae=w;Se(()=>$e(Q,yt,Ae),L)}(w.shapeFlag&256||yt&&vs(yt.vnode)&&yt.vnode.shapeFlag&256)&&_.a&&Se(_.a,L),_.isMounted=!0,w=S=O=null}};_.scope.on();const U=_.effect=new Zh(j);_.scope.off();const B=_.update=U.run.bind(U),nt=_.job=U.runIfDirty.bind(U);nt.i=_,nt.id=_.uid,U.scheduler=()=>ul(nt),Gn(_,!0),B()},Et=(_,w,S)=>{w.component=_;const O=_.vnode.props;_.vnode=w,_.next=null,Mg(_,w.props,O,S),Ug(_,w.children,S),cn(),Bc(_),un()},mt=(_,w,S,O,L,D,K,j,U=!1)=>{const B=_&&_.children,nt=_?_.shapeFlag:0,Q=w.children,{patchFlag:tt,shapeFlag:rt}=w;if(tt>0){if(tt&128){Ue(B,Q,S,O,L,D,K,j,U);return}else if(tt&256){ye(B,Q,S,O,L,D,K,j,U);return}}rt&8?(nt&16&&se(B,L,D),Q!==B&&d(S,Q)):nt&16?rt&16?Ue(B,Q,S,O,L,D,K,j,U):se(B,L,D,!0):(nt&8&&d(S,""),rt&16&&y(Q,S,O,L,D,K,j,U))},ye=(_,w,S,O,L,D,K,j,U)=>{_=_||Tr,w=w||Tr;const B=_.length,nt=w.length,Q=Math.min(B,nt);let tt;for(tt=0;tt<Q;tt++){const rt=w[tt]=U?An(w[tt]):ze(w[tt]);N(_[tt],rt,S,null,L,D,K,j,U)}B>nt?se(_,L,D,!0,!1,Q):y(w,S,O,L,D,K,j,U,Q)},Ue=(_,w,S,O,L,D,K,j,U)=>{let B=0;const nt=w.length;let Q=_.length-1,tt=nt-1;for(;B<=Q&&B<=tt;){const rt=_[B],ht=w[B]=U?An(w[B]):ze(w[B]);if(ls(rt,ht))N(rt,ht,S,null,L,D,K,j,U);else break;B++}for(;B<=Q&&B<=tt;){const rt=_[Q],ht=w[tt]=U?An(w[tt]):ze(w[tt]);if(ls(rt,ht))N(rt,ht,S,null,L,D,K,j,U);else break;Q--,tt--}if(B>Q){if(B<=tt){const rt=tt+1,ht=rt<nt?w[rt].el:O;for(;B<=tt;)N(null,w[B]=U?An(w[B]):ze(w[B]),S,ht,L,D,K,j,U),B++}}else if(B>tt)for(;B<=Q;)Jt(_[B],L,D,!0),B++;else{const rt=B,ht=B,St=new Map;for(B=ht;B<=tt;B++){const Zt=w[B]=U?An(w[B]):ze(w[B]);Zt.key!=null&&St.set(Zt.key,B)}let yt,ie=0;const oe=tt-ht+1;let Ie=!1,Ae=0;const Ne=new Array(oe);for(B=0;B<oe;B++)Ne[B]=0;for(B=rt;B<=Q;B++){const Zt=_[B];if(ie>=oe){Jt(Zt,L,D,!0);continue}let Gt;if(Zt.key!=null)Gt=St.get(Zt.key);else for(yt=ht;yt<=tt;yt++)if(Ne[yt-ht]===0&&ls(Zt,w[yt])){Gt=yt;break}Gt===void 0?Jt(Zt,L,D,!0):(Ne[Gt-ht]=B+1,Gt>=Ae?Ae=Gt:Ie=!0,N(Zt,w[Gt],S,null,L,D,K,j,U),ie++)}const cr=Ie?qg(Ne):Tr;for(yt=cr.length-1,B=oe-1;B>=0;B--){const Zt=ht+B,Gt=w[Zt],Kr=w[Zt+1],$n=Zt+1<nt?Kr.el||Kr.placeholder:O;Ne[B]===0?N(null,Gt,S,$n,L,D,K,j,U):Ie&&(yt<0||B!==cr[yt]?we(Gt,S,$n,2):yt--)}}},we=(_,w,S,O,L=null)=>{const{el:D,type:K,transition:j,children:U,shapeFlag:B}=_;if(B&6){we(_.component.subTree,w,S,O);return}if(B&128){_.suspense.move(w,S,O);return}if(B&64){K.move(_,w,S,J);return}if(K===Te){r(D,w,S);for(let Q=0;Q<U.length;Q++)we(U[Q],w,S,O);r(_.anchor,w,S);return}if(K===Ai){H(_,w,S);return}if(O!==2&&B&1&&j)if(O===0)j.beforeEnter(D),r(D,w,S),Se(()=>j.enter(D),L);else{const{leave:Q,delayLeave:tt,afterLeave:rt}=j,ht=()=>{_.ctx.isUnmounted?s(D):r(D,w,S)},St=()=>{D._isLeaving&&D[dg](!0),Q(D,()=>{ht(),rt&&rt()})};tt?tt(D,ht,St):St()}else r(D,w,S)},Jt=(_,w,S,O=!1,L=!1)=>{const{type:D,props:K,ref:j,children:U,dynamicChildren:B,shapeFlag:nt,patchFlag:Q,dirs:tt,cacheIndex:rt}=_;if(Q===-2&&(L=!1),j!=null&&(cn(),Es(j,null,S,_,!0),un()),rt!=null&&(w.renderCache[rt]=void 0),nt&256){w.ctx.deactivate(_);return}const ht=nt&1&&tt,St=!vs(_);let yt;if(St&&(yt=K&&K.onVnodeBeforeUnmount)&&$e(yt,w,_),nt&6)mn(_.component,S,O);else{if(nt&128){_.suspense.unmount(S,O);return}ht&&Wn(_,null,w,"beforeUnmount"),nt&64?_.type.remove(_,w,S,J,O):B&&!B.hasOnce&&(D!==Te||Q>0&&Q&64)?se(B,w,S,!1,!0):(D===Te&&Q&384||!L&&nt&16)&&se(U,w,S),O&&tn(_)}(St&&(yt=K&&K.onVnodeUnmounted)||ht)&&Se(()=>{yt&&$e(yt,w,_),ht&&Wn(_,null,w,"unmounted")},S)},tn=_=>{const{type:w,el:S,anchor:O,transition:L}=_;if(w===Te){xe(S,O);return}if(w===Ai){G(_);return}const D=()=>{s(S),L&&!L.persisted&&L.afterLeave&&L.afterLeave()};if(_.shapeFlag&1&&L&&!L.persisted){const{leave:K,delayLeave:j}=L,U=()=>K(S,D);j?j(_.el,D,U):U()}else D()},xe=(_,w)=>{let S;for(;_!==w;)S=g(_),s(_),_=S;s(w)},mn=(_,w,S)=>{const{bum:O,scope:L,job:D,subTree:K,um:j,m:U,a:B}=_;Wc(U),Wc(B),O&&Ti(O),L.stop(),D&&(D.flags|=8,Jt(K,_,w,S)),j&&Se(j,w),Se(()=>{_.isUnmounted=!0},w)},se=(_,w,S,O=!1,L=!1,D=0)=>{for(let K=D;K<_.length;K++)Jt(_[K],w,S,O,L)},x=_=>{if(_.shapeFlag&6)return x(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const w=g(_.anchor||_.el),S=w&&w[hg];return S?g(S):w};let X=!1;const W=(_,w,S)=>{_==null?w._vnode&&Jt(w._vnode,null,null,!0):N(w._vnode||null,_,w,null,null,null,S),w._vnode=_,X||(X=!0,Bc(),vf(),X=!1)},J={p:N,um:Jt,m:we,r:tn,mt:Ft,mc:y,pc:mt,pbc:b,n:x,o:e};return{render:W,hydrate:void 0,createApp:Ng(W)}}function ea({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Gn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function $g(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Ff(e,t,n=!1){const r=e.children,s=t.children;if(ot(r)&&ot(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=An(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&Ff(a,l)),l.type===yo&&l.patchFlag!==-1&&(l.el=a.el),l.type===On&&!l.el&&(l.el=a.el)}}function qg(e){const t=e.slice(),n=[0];let r,s,i,a,l;const c=e.length;for(r=0;r<c;r++){const h=e[r];if(h!==0){if(s=n[n.length-1],e[s]<h){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<h?i=l+1:a=l;h<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function Uf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Uf(t)}function Wc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Hg=Symbol.for("v-scx"),zg=()=>an(Hg);function Ii(e,t,n){return Bf(e,t,n)}function Bf(e,t,n=Ct){const{immediate:r,deep:s,flush:i,once:a}=n,l=fe({},n),c=t&&r||!t&&i!=="post";let h;if(ks){if(i==="sync"){const E=zg();h=E.__watcherHandles||(E.__watcherHandles=[])}else if(!c){const E=()=>{};return E.stop=Ke,E.resume=Ke,E.pause=Ke,E}}const d=ge;l.call=(E,V,N)=>Ye(E,d,V,N);let p=!1;i==="post"?l.scheduler=E=>{Se(E,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(E,V)=>{V?E():ul(E)}),l.augmentJob=E=>{t&&(E.flags|=4),p&&(E.flags|=2,d&&(E.id=d.uid,E.i=d))};const g=og(e,t,l);return ks&&(h?h.push(g):c&&g()),g}function Kg(e,t,n){const r=this.proxy,s=Lt(e)?e.includes(".")?jf(r,e):()=>r[e]:e.bind(r,r);let i;ct(t)?i=t:(i=t.handler,n=t);const a=Qs(this),l=Bf(s,i.bind(r),n);return a(),l}function jf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Wg=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${xn(t)}Modifiers`]||e[`${sr(t)}Modifiers`];function Gg(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||Ct;let s=n;const i=t.startsWith("update:"),a=i&&Wg(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Lt(d)?d.trim():d)),a.number&&(s=n.map(_a)));let l,c=r[l=Qo(t)]||r[l=Qo(xn(t))];!c&&i&&(c=r[l=Qo(sr(t))]),c&&Ye(c,e,6,s);const h=r[l+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,Ye(h,e,6,s)}}const Qg=new WeakMap;function $f(e,t,n=!1){const r=n?Qg:t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!ct(e)){const c=h=>{const d=$f(h,t,!0);d&&(l=!0,fe(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(Nt(e)&&r.set(e,null),null):(ot(i)?i.forEach(c=>a[c]=null):fe(a,i),Nt(e)&&r.set(e,a),a)}function _o(e,t){return!e||!oo(t)?!1:(t=t.slice(2).replace(/Once$/,""),It(e,t[0].toLowerCase()+t.slice(1))||It(e,sr(t))||It(e,t))}function Gc(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:c,render:h,renderCache:d,props:p,data:g,setupState:E,ctx:V,inheritAttrs:N}=e,k=ki(e);let q,$;try{if(n.shapeFlag&4){const G=s||r,lt=G;q=ze(h.call(lt,G,d,p,E,g,V)),$=l}else{const G=t;q=ze(G.length>1?G(p,{attrs:l,slots:a,emit:c}):G(p,null)),$=t.props?l:Xg(l)}}catch(G){ws.length=0,po(G,e,1),q=zt(On)}let H=q;if($&&N!==!1){const G=Object.keys($),{shapeFlag:lt}=H;G.length&&lt&7&&(i&&G.some(tl)&&($=Yg($,i)),H=Vr(H,$,!1,!0))}return n.dirs&&(H=Vr(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&hl(H,n.transition),q=H,ki(k),q}const Xg=e=>{let t;for(const n in e)(n==="class"||n==="style"||oo(n))&&((t||(t={}))[n]=e[n]);return t},Yg=(e,t)=>{const n={};for(const r in e)(!tl(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Jg(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:c}=t,h=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Qc(r,a,h):!!a;if(c&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const g=d[p];if(a[g]!==r[g]&&!_o(h,g))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?Qc(r,a,h):!0:!!a;return!1}function Qc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!_o(n,i))return!0}return!1}function Zg({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const qf=e=>e.__isSuspense;function t_(e,t){t&&t.pendingBranch?ot(e)?t.effects.push(...e):t.effects.push(e):cg(e)}const Te=Symbol.for("v-fgt"),yo=Symbol.for("v-txt"),On=Symbol.for("v-cmt"),Ai=Symbol.for("v-stc"),ws=[];let Re=null;function jt(e=!1){ws.push(Re=e?null:[])}function e_(){ws.pop(),Re=ws[ws.length-1]||null}let Ms=1;function Bi(e,t=!1){Ms+=e,e<0&&Re&&t&&(Re.hasOnce=!0)}function Hf(e){return e.dynamicChildren=Ms>0?Re||Tr:null,e_(),Ms>0&&Re&&Re.push(e),e}function Ht(e,t,n,r,s,i){return Hf(wt(e,t,n,r,s,i,!0))}function n_(e,t,n,r,s){return Hf(zt(e,t,n,r,s,!0))}function ji(e){return e?e.__v_isVNode===!0:!1}function ls(e,t){return e.type===t.type&&e.key===t.key}const zf=({key:e})=>e??null,bi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Lt(e)||he(e)||ct(e)?{i:Ve,r:e,k:t,f:!!n}:e:null);function wt(e,t=null,n=null,r=0,s=null,i=e===Te?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&zf(t),ref:t&&bi(t),scopeId:wf,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ve};return l?(ml(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Lt(n)?8:16),Ms>0&&!a&&Re&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Re.push(c),c}const zt=r_;function r_(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===bg)&&(e=On),ji(e)){const l=Vr(e,t,!0);return n&&ml(l,n),Ms>0&&!i&&Re&&(l.shapeFlag&6?Re[Re.indexOf(e)]=l:Re.push(l)),l.patchFlag=-2,l}if(p_(e)&&(e=e.__vccOpts),t){t=Kf(t);let{class:l,style:c}=t;l&&!Lt(l)&&(t.class=er(l)),Nt(c)&&(cl(c)&&!ot(c)&&(c=fe({},c)),t.style=uo(c))}const a=Lt(e)?1:qf(e)?128:fg(e)?64:Nt(e)?4:ct(e)?2:0;return wt(e,t,n,r,s,a,i,!0)}function Kf(e){return e?cl(e)||xf(e)?fe({},e):e:null}function Vr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:c}=e,h=t?i_(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&zf(h),ref:t&&t.ref?n&&i?ot(i)?i.concat(bi(t)):[i,bi(t)]:bi(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Te?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Vr(e.ssContent),ssFallback:e.ssFallback&&Vr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&hl(d,c.clone(d)),d}function s_(e=" ",t=0){return zt(yo,null,e,t)}function Wf(e,t){const n=zt(Ai,null,e);return n.staticCount=t,n}function cs(e="",t=!1){return t?(jt(),n_(On,null,e)):zt(On,null,e)}function ze(e){return e==null||typeof e=="boolean"?zt(On):ot(e)?zt(Te,null,e.slice()):ji(e)?An(e):zt(yo,null,String(e))}function An(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Vr(e)}function ml(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(ot(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),ml(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!xf(t)?t._ctx=Ve:s===3&&Ve&&(Ve.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ct(t)?(t={default:t,_ctx:Ve},n=32):(t=String(t),r&64?(n=16,t=[s_(t)]):n=8);e.children=t,e.shapeFlag|=n}function i_(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=er([t.class,r.class]));else if(s==="style")t.style=uo([t.style,r.style]);else if(oo(s)){const i=t[s],a=r[s];a&&i!==a&&!(ot(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function $e(e,t,n,r=null){Ye(e,t,7,[n,r])}const o_=Pf();let a_=0;function l_(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||o_,i={uid:a_++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Nm(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Of(r,s),emitsOptions:$f(r,s),emit:null,emitted:null,propsDefaults:Ct,inheritAttrs:r.inheritAttrs,ctx:Ct,data:Ct,props:Ct,attrs:Ct,slots:Ct,refs:Ct,setupState:Ct,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Gg.bind(null,i),e.ce&&e.ce(i),i}let ge=null;const c_=()=>ge||Ve;let $i,Ra;{const e=co(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};$i=t("__VUE_INSTANCE_SETTERS__",n=>ge=n),Ra=t("__VUE_SSR_SETTERS__",n=>ks=n)}const Qs=e=>{const t=ge;return $i(e),e.scope.on(),()=>{e.scope.off(),$i(t)}},Xc=()=>{ge&&ge.scope.off(),$i(null)};function Gf(e){return e.vnode.shapeFlag&4}let ks=!1;function u_(e,t=!1,n=!1){t&&Ra(t);const{props:r,children:s}=e.vnode,i=Gf(e);Og(e,r,i,t),Fg(e,s,n||t);const a=i?h_(e,t):void 0;return t&&Ra(!1),a}function h_(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Sg);const{setup:r}=n;if(r){cn();const s=e.setupContext=r.length>1?d_(e):null,i=Qs(e),a=Gs(r,e,0,[e.props,s]),l=zh(a);if(un(),i(),(l||e.sp)&&!vs(e)&&Af(e),l){if(a.then(Xc,Xc),t)return a.then(c=>{Yc(e,c)}).catch(c=>{po(c,e,0)});e.asyncDep=a}else Yc(e,a)}else Qf(e)}function Yc(e,t,n){ct(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Nt(t)&&(e.setupState=gf(t)),Qf(e)}function Qf(e,t,n){const r=e.type;e.render||(e.render=r.render||Ke);{const s=Qs(e);cn();try{Rg(e)}finally{un(),s()}}}const f_={get(e,t){return ce(e,"get",""),e[t]}};function d_(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,f_),slots:e.slots,emit:e.emit,expose:t}}function Eo(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(gf(Zm(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in Ts)return Ts[n](e)},has(t,n){return n in t||n in Ts}})):e.proxy}function p_(e){return ct(e)&&"__vccOpts"in e}const Oe=(e,t)=>sg(e,t,ks);function Xf(e,t,n){try{Bi(-1);const r=arguments.length;return r===2?Nt(t)&&!ot(t)?ji(t)?zt(e,null,[t]):zt(e,t):zt(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&ji(n)&&(n=[n]),zt(e,t,n))}finally{Bi(1)}}const m_="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ca;const Jc=typeof window<"u"&&window.trustedTypes;if(Jc)try{Ca=Jc.createPolicy("vue",{createHTML:e=>e})}catch{}const Yf=Ca?e=>Ca.createHTML(e):e=>e,g_="http://www.w3.org/2000/svg",__="http://www.w3.org/1998/Math/MathML",rn=typeof document<"u"?document:null,Zc=rn&&rn.createElement("template"),y_={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?rn.createElementNS(g_,e):t==="mathml"?rn.createElementNS(__,e):n?rn.createElement(e,{is:n}):rn.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>rn.createTextNode(e),createComment:e=>rn.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>rn.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Zc.innerHTML=Yf(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=Zc.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},E_=Symbol("_vtc");function v_(e,t,n){const r=e[E_];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const tu=Symbol("_vod"),T_=Symbol("_vsh"),w_=Symbol(""),I_=/(?:^|;)\s*display\s*:/;function A_(e,t,n){const r=e.style,s=Lt(n);let i=!1;if(n&&!s){if(t)if(Lt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Si(r,l,"")}else for(const a in t)n[a]==null&&Si(r,a,"");for(const a in n)a==="display"&&(i=!0),Si(r,a,n[a])}else if(s){if(t!==n){const a=r[w_];a&&(n+=";"+a),r.cssText=n,i=I_.test(n)}}else t&&e.removeAttribute("style");tu in e&&(e[tu]=i?r.display:"",e[T_]&&(r.display="none"))}const eu=/\s*!important$/;function Si(e,t,n){if(ot(n))n.forEach(r=>Si(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=b_(e,t);eu.test(n)?e.setProperty(sr(r),n.replace(eu,""),"important"):e[r]=n}}const nu=["Webkit","Moz","ms"],na={};function b_(e,t){const n=na[t];if(n)return n;let r=xn(t);if(r!=="filter"&&r in e)return na[t]=r;r=Gh(r);for(let s=0;s<nu.length;s++){const i=nu[s]+r;if(i in e)return na[t]=i}return t}const ru="http://www.w3.org/1999/xlink";function su(e,t,n,r,s,i=xm(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(ru,t.slice(6,t.length)):e.setAttributeNS(ru,t,n):n==null||i&&!Xh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":jn(n)?String(n):n)}function iu(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Yf(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=Xh(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function mr(e,t,n,r){e.addEventListener(t,n,r)}function S_(e,t,n,r){e.removeEventListener(t,n,r)}const ou=Symbol("_vei");function R_(e,t,n,r,s=null){const i=e[ou]||(e[ou]={}),a=i[t];if(r&&a)a.value=r;else{const[l,c]=C_(t);if(r){const h=i[t]=D_(r,s);mr(e,l,h,c)}else a&&(S_(e,l,a,c),i[t]=void 0)}}const au=/(?:Once|Passive|Capture)$/;function C_(e){let t;if(au.test(e)){t={};let r;for(;r=e.match(au);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):sr(e.slice(2)),t]}let ra=0;const P_=Promise.resolve(),V_=()=>ra||(P_.then(()=>ra=0),ra=Date.now());function D_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;Ye(x_(r,n.value),t,5,[r])};return n.value=e,n.attached=V_(),n}function x_(e,t){if(ot(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const lu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,N_=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?v_(e,r,a):t==="style"?A_(e,n,r):oo(t)?tl(t)||R_(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):O_(e,t,r,a))?(iu(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&su(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Lt(r))?iu(e,xn(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),su(e,t,r,a))};function O_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&lu(t)&&ct(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return lu(t)&&Lt(n)?!1:t in e}const cu=e=>{const t=e.props["onUpdate:modelValue"]||!1;return ot(t)?n=>Ti(t,n):t};function M_(e){e.target.composing=!0}function uu(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const sa=Symbol("_assign"),mi={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[sa]=cu(s);const i=r||s.props&&s.props.type==="number";mr(e,t?"change":"input",a=>{if(a.target.composing)return;let l=e.value;n&&(l=l.trim()),i&&(l=_a(l)),e[sa](l)}),n&&mr(e,"change",()=>{e.value=e.value.trim()}),t||(mr(e,"compositionstart",M_),mr(e,"compositionend",uu),mr(e,"change",uu))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[sa]=cu(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?_a(e.value):e.value,c=t??"";l!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===c)||(e.value=c))}},k_=["ctrl","shift","alt","meta"],L_={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>k_.some(n=>e[`${n}Key`]&&!t.includes(n))},hu=(e,t)=>{const n=e._withMods||(e._withMods={}),r=t.join(".");return n[r]||(n[r]=((s,...i)=>{for(let a=0;a<t.length;a++){const l=L_[t[a]];if(l&&l(s,t))return}return e(s,...i)}))},F_=fe({patchProp:N_},y_);let fu;function U_(){return fu||(fu=Bg(F_))}const B_=((...e)=>{const t=U_().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=$_(r);if(!s)return;const i=t._component;!ct(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,j_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t});function j_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function $_(e){return Lt(e)?document.querySelector(e):e}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const gr=typeof document<"u";function Jf(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function q_(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Jf(e.default)}const vt=Object.assign;function ia(e,t){const n={};for(const r in t){const s=t[r];n[r]=Fe(s)?s.map(e):e(s)}return n}const Is=()=>{},Fe=Array.isArray,Zf=/#/g,H_=/&/g,z_=/\//g,K_=/=/g,W_=/\?/g,td=/\+/g,G_=/%5B/g,Q_=/%5D/g,ed=/%5E/g,X_=/%60/g,nd=/%7B/g,Y_=/%7C/g,rd=/%7D/g,J_=/%20/g;function gl(e){return encodeURI(""+e).replace(Y_,"|").replace(G_,"[").replace(Q_,"]")}function Z_(e){return gl(e).replace(nd,"{").replace(rd,"}").replace(ed,"^")}function Pa(e){return gl(e).replace(td,"%2B").replace(J_,"+").replace(Zf,"%23").replace(H_,"%26").replace(X_,"`").replace(nd,"{").replace(rd,"}").replace(ed,"^")}function ty(e){return Pa(e).replace(K_,"%3D")}function ey(e){return gl(e).replace(Zf,"%23").replace(W_,"%3F")}function ny(e){return e==null?"":ey(e).replace(z_,"%2F")}function Ls(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const ry=/\/$/,sy=e=>e.replace(ry,"");function oa(e,t,n="/"){let r,s={},i="",a="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(r=t.slice(0,c),i=t.slice(c+1,l>-1?l:t.length),s=e(i)),l>-1&&(r=r||t.slice(0,l),a=t.slice(l,t.length)),r=ly(r??t,n),{fullPath:r+(i&&"?")+i+a,path:r,query:s,hash:Ls(a)}}function iy(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function du(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function oy(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Dr(t.matched[r],n.matched[s])&&sd(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function Dr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function sd(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!ay(e[n],t[n]))return!1;return!0}function ay(e,t){return Fe(e)?pu(e,t):Fe(t)?pu(t,e):e===t}function pu(e,t){return Fe(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function ly(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,a,l;for(a=0;a<r.length;a++)if(l=r[a],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(a).join("/")}const wn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Fs;(function(e){e.pop="pop",e.push="push"})(Fs||(Fs={}));var As;(function(e){e.back="back",e.forward="forward",e.unknown=""})(As||(As={}));function cy(e){if(!e)if(gr){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),sy(e)}const uy=/^[^#]+#/;function hy(e,t){return e.replace(uy,"#")+t}function fy(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const vo=()=>({left:window.scrollX,top:window.scrollY});function dy(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=fy(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function mu(e,t){return(history.state?history.state.position-t:-1)+e}const Va=new Map;function py(e,t){Va.set(e,t)}function my(e){const t=Va.get(e);return Va.delete(e),t}let gy=()=>location.protocol+"//"+location.host;function id(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let l=s.includes(e.slice(i))?e.slice(i).length:1,c=s.slice(l);return c[0]!=="/"&&(c="/"+c),du(c,"")}return du(n,e)+r+s}function _y(e,t,n,r){let s=[],i=[],a=null;const l=({state:g})=>{const E=id(e,location),V=n.value,N=t.value;let k=0;if(g){if(n.value=E,t.value=g,a&&a===V){a=null;return}k=N?g.position-N.position:0}else r(E);s.forEach(q=>{q(n.value,V,{delta:k,type:Fs.pop,direction:k?k>0?As.forward:As.back:As.unknown})})};function c(){a=n.value}function h(g){s.push(g);const E=()=>{const V=s.indexOf(g);V>-1&&s.splice(V,1)};return i.push(E),E}function d(){const{history:g}=window;g.state&&g.replaceState(vt({},g.state,{scroll:vo()}),"")}function p(){for(const g of i)g();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:h,destroy:p}}function gu(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?vo():null}}function yy(e){const{history:t,location:n}=window,r={value:id(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,h,d){const p=e.indexOf("#"),g=p>-1?(n.host&&document.querySelector("base")?e:e.slice(p))+c:gy()+e+c;try{t[d?"replaceState":"pushState"](h,"",g),s.value=h}catch(E){console.error(E),n[d?"replace":"assign"](g)}}function a(c,h){const d=vt({},t.state,gu(s.value.back,c,s.value.forward,!0),h,{position:s.value.position});i(c,d,!0),r.value=c}function l(c,h){const d=vt({},s.value,t.state,{forward:c,scroll:vo()});i(d.current,d,!0);const p=vt({},gu(r.value,c,null),{position:d.position+1},h);i(c,p,!1),r.value=c}return{location:r,state:s,push:l,replace:a}}function Ey(e){e=cy(e);const t=yy(e),n=_y(e,t.state,t.location,t.replace);function r(i,a=!0){a||n.pauseListeners(),history.go(i)}const s=vt({location:"",base:e,go:r,createHref:hy.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function vy(e){return typeof e=="string"||e&&typeof e=="object"}function od(e){return typeof e=="string"||typeof e=="symbol"}const ad=Symbol("");var _u;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(_u||(_u={}));function xr(e,t){return vt(new Error,{type:e,[ad]:!0},t)}function nn(e,t){return e instanceof Error&&ad in e&&(t==null||!!(e.type&t))}const yu="[^/]+?",Ty={sensitive:!1,strict:!1,start:!0,end:!0},wy=/[.+*?^${}()[\]/\\]/g;function Iy(e,t){const n=vt({},Ty,t),r=[];let s=n.start?"^":"";const i=[];for(const h of e){const d=h.length?[]:[90];n.strict&&!h.length&&(s+="/");for(let p=0;p<h.length;p++){const g=h[p];let E=40+(n.sensitive?.25:0);if(g.type===0)p||(s+="/"),s+=g.value.replace(wy,"\\$&"),E+=40;else if(g.type===1){const{value:V,repeatable:N,optional:k,regexp:q}=g;i.push({name:V,repeatable:N,optional:k});const $=q||yu;if($!==yu){E+=10;try{new RegExp(`(${$})`)}catch(G){throw new Error(`Invalid custom RegExp for param "${V}" (${$}): `+G.message)}}let H=N?`((?:${$})(?:/(?:${$}))*)`:`(${$})`;p||(H=k&&h.length<2?`(?:/${H})`:"/"+H),k&&(H+="?"),s+=H,E+=20,k&&(E+=-8),N&&(E+=-20),$===".*"&&(E+=-50)}d.push(E)}r.push(d)}if(n.strict&&n.end){const h=r.length-1;r[h][r[h].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,n.sensitive?"":"i");function l(h){const d=h.match(a),p={};if(!d)return null;for(let g=1;g<d.length;g++){const E=d[g]||"",V=i[g-1];p[V.name]=E&&V.repeatable?E.split("/"):E}return p}function c(h){let d="",p=!1;for(const g of e){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const E of g)if(E.type===0)d+=E.value;else if(E.type===1){const{value:V,repeatable:N,optional:k}=E,q=V in h?h[V]:"";if(Fe(q)&&!N)throw new Error(`Provided param "${V}" is an array but it is not repeatable (* or + modifiers)`);const $=Fe(q)?q.join("/"):q;if(!$)if(k)g.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${V}"`);d+=$}}return d||"/"}return{re:a,score:r,keys:i,parse:l,stringify:c}}function Ay(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function ld(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=Ay(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(Eu(r))return 1;if(Eu(s))return-1}return s.length-r.length}function Eu(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const by={type:0,value:""},Sy=/[a-zA-Z0-9_]/;function Ry(e){if(!e)return[[]];if(e==="/")return[[by]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(E){throw new Error(`ERR (${n})/"${h}": ${E}`)}let n=0,r=n;const s=[];let i;function a(){i&&s.push(i),i=[]}let l=0,c,h="",d="";function p(){h&&(n===0?i.push({type:0,value:h}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:h,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),h="")}function g(){h+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(h&&p(),a()):c===":"?(p(),n=1):g();break;case 4:g(),n=r;break;case 1:c==="("?n=2:Sy.test(c)?g():(p(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=3:d+=c;break;case 3:p(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${h}"`),p(),a(),s}function Cy(e,t,n){const r=Iy(Ry(e.path),n),s=vt(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function Py(e,t){const n=[],r=new Map;t=Iu({strict:!1,end:!0,sensitive:!1},t);function s(p){return r.get(p)}function i(p,g,E){const V=!E,N=Tu(p);N.aliasOf=E&&E.record;const k=Iu(t,p),q=[N];if("alias"in p){const G=typeof p.alias=="string"?[p.alias]:p.alias;for(const lt of G)q.push(Tu(vt({},N,{components:E?E.record.components:N.components,path:lt,aliasOf:E?E.record:N})))}let $,H;for(const G of q){const{path:lt}=G;if(g&&lt[0]!=="/"){const ft=g.record.path,I=ft[ft.length-1]==="/"?"":"/";G.path=g.record.path+(lt&&I+lt)}if($=Cy(G,g,k),E?E.alias.push($):(H=H||$,H!==$&&H.alias.push($),V&&p.name&&!wu($)&&a(p.name)),cd($)&&c($),N.children){const ft=N.children;for(let I=0;I<ft.length;I++)i(ft[I],$,E&&E.children[I])}E=E||$}return H?()=>{a(H)}:Is}function a(p){if(od(p)){const g=r.get(p);g&&(r.delete(p),n.splice(n.indexOf(g),1),g.children.forEach(a),g.alias.forEach(a))}else{const g=n.indexOf(p);g>-1&&(n.splice(g,1),p.record.name&&r.delete(p.record.name),p.children.forEach(a),p.alias.forEach(a))}}function l(){return n}function c(p){const g=xy(p,n);n.splice(g,0,p),p.record.name&&!wu(p)&&r.set(p.record.name,p)}function h(p,g){let E,V={},N,k;if("name"in p&&p.name){if(E=r.get(p.name),!E)throw xr(1,{location:p});k=E.record.name,V=vt(vu(g.params,E.keys.filter(H=>!H.optional).concat(E.parent?E.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),p.params&&vu(p.params,E.keys.map(H=>H.name))),N=E.stringify(V)}else if(p.path!=null)N=p.path,E=n.find(H=>H.re.test(N)),E&&(V=E.parse(N),k=E.record.name);else{if(E=g.name?r.get(g.name):n.find(H=>H.re.test(g.path)),!E)throw xr(1,{location:p,currentLocation:g});k=E.record.name,V=vt({},g.params,p.params),N=E.stringify(V)}const q=[];let $=E;for(;$;)q.unshift($.record),$=$.parent;return{name:k,path:N,params:V,matched:q,meta:Dy(q)}}e.forEach(p=>i(p));function d(){n.length=0,r.clear()}return{addRoute:i,resolve:h,removeRoute:a,clearRoutes:d,getRoutes:l,getRecordMatcher:s}}function vu(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function Tu(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Vy(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Vy(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function wu(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Dy(e){return e.reduce((t,n)=>vt(t,n.meta),{})}function Iu(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function xy(e,t){let n=0,r=t.length;for(;n!==r;){const i=n+r>>1;ld(e,t[i])<0?r=i:n=i+1}const s=Ny(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function Ny(e){let t=e;for(;t=t.parent;)if(cd(t)&&ld(e,t)===0)return t}function cd({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Oy(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(td," "),a=i.indexOf("="),l=Ls(a<0?i:i.slice(0,a)),c=a<0?null:Ls(i.slice(a+1));if(l in t){let h=t[l];Fe(h)||(h=t[l]=[h]),h.push(c)}else t[l]=c}return t}function Au(e){let t="";for(let n in e){const r=e[n];if(n=ty(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Fe(r)?r.map(i=>i&&Pa(i)):[r&&Pa(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function My(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Fe(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const ky=Symbol(""),bu=Symbol(""),_l=Symbol(""),ud=Symbol(""),Da=Symbol("");function us(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function bn(e,t,n,r,s,i=a=>a()){const a=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((l,c)=>{const h=g=>{g===!1?c(xr(4,{from:n,to:t})):g instanceof Error?c(g):vy(g)?c(xr(2,{from:t,to:g})):(a&&r.enterCallbacks[s]===a&&typeof g=="function"&&a.push(g),l())},d=i(()=>e.call(r&&r.instances[s],t,n,h));let p=Promise.resolve(d);e.length<3&&(p=p.then(h)),p.catch(g=>c(g))})}function aa(e,t,n,r,s=i=>i()){const i=[];for(const a of e)for(const l in a.components){let c=a.components[l];if(!(t!=="beforeRouteEnter"&&!a.instances[l]))if(Jf(c)){const d=(c.__vccOpts||c)[t];d&&i.push(bn(d,n,r,a,l,s))}else{let h=c();i.push(()=>h.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const p=q_(d)?d.default:d;a.mods[l]=d,a.components[l]=p;const E=(p.__vccOpts||p)[t];return E&&bn(E,n,r,a,l,s)()}))}}return i}function Su(e){const t=an(_l),n=an(ud),r=Oe(()=>{const c=Ar(e.to);return t.resolve(c)}),s=Oe(()=>{const{matched:c}=r.value,{length:h}=c,d=c[h-1],p=n.matched;if(!d||!p.length)return-1;const g=p.findIndex(Dr.bind(null,d));if(g>-1)return g;const E=Ru(c[h-2]);return h>1&&Ru(d)===E&&p[p.length-1].path!==E?p.findIndex(Dr.bind(null,c[h-2])):g}),i=Oe(()=>s.value>-1&&jy(n.params,r.value.params)),a=Oe(()=>s.value>-1&&s.value===n.matched.length-1&&sd(n.params,r.value.params));function l(c={}){if(By(c)){const h=t[Ar(e.replace)?"replace":"push"](Ar(e.to)).catch(Is);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:r,href:Oe(()=>r.value.href),isActive:i,isExactActive:a,navigate:l}}function Ly(e){return e.length===1?e[0]:e}const Fy=If({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Su,setup(e,{slots:t}){const n=fo(Su(e)),{options:r}=an(_l),s=Oe(()=>({[Cu(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Cu(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&Ly(t.default(n));return e.custom?i:Xf("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),Uy=Fy;function By(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function jy(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Fe(s)||s.length!==r.length||r.some((i,a)=>i!==s[a]))return!1}return!0}function Ru(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Cu=(e,t,n)=>e??t??n,$y=If({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=an(Da),s=Oe(()=>e.route||r.value),i=an(bu,0),a=Oe(()=>{let h=Ar(i);const{matched:d}=s.value;let p;for(;(p=d[h])&&!p.components;)h++;return h}),l=Oe(()=>s.value.matched[a.value]);wi(bu,Oe(()=>a.value+1)),wi(ky,l),wi(Da,s);const c=Ns();return Ii(()=>[c.value,l.value,e.name],([h,d,p],[g,E,V])=>{d&&(d.instances[p]=h,E&&E!==d&&h&&h===g&&(d.leaveGuards.size||(d.leaveGuards=E.leaveGuards),d.updateGuards.size||(d.updateGuards=E.updateGuards))),h&&d&&(!E||!Dr(d,E)||!g)&&(d.enterCallbacks[p]||[]).forEach(N=>N(h))},{flush:"post"}),()=>{const h=s.value,d=e.name,p=l.value,g=p&&p.components[d];if(!g)return Pu(n.default,{Component:g,route:h});const E=p.props[d],V=E?E===!0?h.params:typeof E=="function"?E(h):E:null,k=Xf(g,vt({},V,t,{onVnodeUnmounted:q=>{q.component.isUnmounted&&(p.instances[d]=null)},ref:c}));return Pu(n.default,{Component:k,route:h})||k}}});function Pu(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const qy=$y;function Hy(e){const t=Py(e.routes,e),n=e.parseQuery||Oy,r=e.stringifyQuery||Au,s=e.history,i=us(),a=us(),l=us(),c=tg(wn);let h=wn;gr&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=ia.bind(null,x=>""+x),p=ia.bind(null,ny),g=ia.bind(null,Ls);function E(x,X){let W,J;return od(x)?(W=t.getRecordMatcher(x),J=X):J=x,t.addRoute(J,W)}function V(x){const X=t.getRecordMatcher(x);X&&t.removeRoute(X)}function N(){return t.getRoutes().map(x=>x.record)}function k(x){return!!t.getRecordMatcher(x)}function q(x,X){if(X=vt({},X||c.value),typeof x=="string"){const S=oa(n,x,X.path),O=t.resolve({path:S.path},X),L=s.createHref(S.fullPath);return vt(S,O,{params:g(O.params),hash:Ls(S.hash),redirectedFrom:void 0,href:L})}let W;if(x.path!=null)W=vt({},x,{path:oa(n,x.path,X.path).path});else{const S=vt({},x.params);for(const O in S)S[O]==null&&delete S[O];W=vt({},x,{params:p(S)}),X.params=p(X.params)}const J=t.resolve(W,X),bt=x.hash||"";J.params=d(g(J.params));const _=iy(r,vt({},x,{hash:Z_(bt),path:J.path})),w=s.createHref(_);return vt({fullPath:_,hash:bt,query:r===Au?My(x.query):x.query||{}},J,{redirectedFrom:void 0,href:w})}function $(x){return typeof x=="string"?oa(n,x,c.value.path):vt({},x)}function H(x,X){if(h!==x)return xr(8,{from:X,to:x})}function G(x){return I(x)}function lt(x){return G(vt($(x),{replace:!0}))}function ft(x){const X=x.matched[x.matched.length-1];if(X&&X.redirect){const{redirect:W}=X;let J=typeof W=="function"?W(x):W;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=$(J):{path:J},J.params={}),vt({query:x.query,hash:x.hash,params:J.path!=null?{}:x.params},J)}}function I(x,X){const W=h=q(x),J=c.value,bt=x.state,_=x.force,w=x.replace===!0,S=ft(W);if(S)return I(vt($(S),{state:typeof S=="object"?vt({},bt,S.state):bt,force:_,replace:w}),X||W);const O=W;O.redirectedFrom=X;let L;return!_&&oy(r,J,W)&&(L=xr(16,{to:O,from:J}),we(J,J,!0,!1)),(L?Promise.resolve(L):b(O,J)).catch(D=>nn(D)?nn(D,2)?D:Ue(D):mt(D,O,J)).then(D=>{if(D){if(nn(D,2))return I(vt({replace:w},$(D.to),{state:typeof D.to=="object"?vt({},bt,D.to.state):bt,force:_}),X||O)}else D=R(O,J,!0,w,bt);return A(O,J,D),D})}function y(x,X){const W=H(x,X);return W?Promise.reject(W):Promise.resolve()}function T(x){const X=xe.values().next().value;return X&&typeof X.runWithContext=="function"?X.runWithContext(x):x()}function b(x,X){let W;const[J,bt,_]=zy(x,X);W=aa(J.reverse(),"beforeRouteLeave",x,X);for(const S of J)S.leaveGuards.forEach(O=>{W.push(bn(O,x,X))});const w=y.bind(null,x,X);return W.push(w),se(W).then(()=>{W=[];for(const S of i.list())W.push(bn(S,x,X));return W.push(w),se(W)}).then(()=>{W=aa(bt,"beforeRouteUpdate",x,X);for(const S of bt)S.updateGuards.forEach(O=>{W.push(bn(O,x,X))});return W.push(w),se(W)}).then(()=>{W=[];for(const S of _)if(S.beforeEnter)if(Fe(S.beforeEnter))for(const O of S.beforeEnter)W.push(bn(O,x,X));else W.push(bn(S.beforeEnter,x,X));return W.push(w),se(W)}).then(()=>(x.matched.forEach(S=>S.enterCallbacks={}),W=aa(_,"beforeRouteEnter",x,X,T),W.push(w),se(W))).then(()=>{W=[];for(const S of a.list())W.push(bn(S,x,X));return W.push(w),se(W)}).catch(S=>nn(S,8)?S:Promise.reject(S))}function A(x,X,W){l.list().forEach(J=>T(()=>J(x,X,W)))}function R(x,X,W,J,bt){const _=H(x,X);if(_)return _;const w=X===wn,S=gr?history.state:{};W&&(J||w?s.replace(x.fullPath,vt({scroll:w&&S&&S.scroll},bt)):s.push(x.fullPath,bt)),c.value=x,we(x,X,W,w),Ue()}let v;function Ft(){v||(v=s.listen((x,X,W)=>{if(!mn.listening)return;const J=q(x),bt=ft(J);if(bt){I(vt(bt,{replace:!0,force:!0}),J).catch(Is);return}h=J;const _=c.value;gr&&py(mu(_.fullPath,W.delta),vo()),b(J,_).catch(w=>nn(w,12)?w:nn(w,2)?(I(vt($(w.to),{force:!0}),J).then(S=>{nn(S,20)&&!W.delta&&W.type===Fs.pop&&s.go(-1,!1)}).catch(Is),Promise.reject()):(W.delta&&s.go(-W.delta,!1),mt(w,J,_))).then(w=>{w=w||R(J,_,!1),w&&(W.delta&&!nn(w,8)?s.go(-W.delta,!1):W.type===Fs.pop&&nn(w,20)&&s.go(-1,!1)),A(J,_,w)}).catch(Is)}))}let _e=us(),Ut=us(),Et;function mt(x,X,W){Ue(x);const J=Ut.list();return J.length?J.forEach(bt=>bt(x,X,W)):console.error(x),Promise.reject(x)}function ye(){return Et&&c.value!==wn?Promise.resolve():new Promise((x,X)=>{_e.add([x,X])})}function Ue(x){return Et||(Et=!x,Ft(),_e.list().forEach(([X,W])=>x?W(x):X()),_e.reset()),x}function we(x,X,W,J){const{scrollBehavior:bt}=e;if(!gr||!bt)return Promise.resolve();const _=!W&&my(mu(x.fullPath,0))||(J||!W)&&history.state&&history.state.scroll||null;return yf().then(()=>bt(x,X,_)).then(w=>w&&dy(w)).catch(w=>mt(w,x,X))}const Jt=x=>s.go(x);let tn;const xe=new Set,mn={currentRoute:c,listening:!0,addRoute:E,removeRoute:V,clearRoutes:t.clearRoutes,hasRoute:k,getRoutes:N,resolve:q,options:e,push:G,replace:lt,go:Jt,back:()=>Jt(-1),forward:()=>Jt(1),beforeEach:i.add,beforeResolve:a.add,afterEach:l.add,onError:Ut.add,isReady:ye,install(x){const X=this;x.component("RouterLink",Uy),x.component("RouterView",qy),x.config.globalProperties.$router=X,Object.defineProperty(x.config.globalProperties,"$route",{enumerable:!0,get:()=>Ar(c)}),gr&&!tn&&c.value===wn&&(tn=!0,G(s.location).catch(bt=>{}));const W={};for(const bt in wn)Object.defineProperty(W,bt,{get:()=>c.value[bt],enumerable:!0});x.provide(_l,X),x.provide(ud,pf(W)),x.provide(Da,c);const J=x.unmount;xe.add(x),x.unmount=function(){xe.delete(x),xe.size<1&&(h=wn,v&&v(),v=null,c.value=wn,tn=!1,Et=!1),J()}}};function se(x){return x.reduce((X,W)=>X.then(()=>T(W)),Promise.resolve())}return mn}function zy(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let a=0;a<i;a++){const l=t.matched[a];l&&(e.matched.find(h=>Dr(h,l))?r.push(l):n.push(l));const c=e.matched[a];c&&(t.matched.find(h=>Dr(h,c))||s.push(c))}return[n,r,s]}const Br=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},Ky={},Wy={id:"mainRectangle"};function Gy(e,t){return jt(),Ht("div",Wy,[...t[0]||(t[0]=[Wf('<div id="topRectangle"><div id="profileImg"></div><div id="lowerRectangle"><ul id="routes"><li class="tabs">Home</li><li class="tabs">Work</li><li class="tabs">Contact</li></ul></div></div>',1)])])}const Qy=Br(Ky,[["render",Gy]]),Xy="/portfolioWebsite/assets/htmlLogo-D40-Mdit.png",Yy="data:image/svg+xml,%3csvg%20fill='none'%20height='2500'%20width='2183'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20124%20141.53'%3e%3cpath%20d='M10.383%20126.892L0%200l124%20.255-10.979%20126.637-50.553%2014.638z'%20fill='%231b73ba'/%3e%3cpath%20d='M62.468%20129.275V12.085l51.064.17-9.106%20104.85z'%20fill='%231c88c7'/%3e%3cpath%20d='M100.851%2027.064H22.298l2.128%2015.318h37.276l-36.68%2015.745%202.127%2014.808h54.043l-1.958%2020.68-18.298%203.575-16.595-4.255-1.277-11.745H27.83l2.042%2024.426%2032.681%209.106%2031.32-9.957%204-47.745H64.765l36.085-14.978z'%20fill='%23fff'/%3e%3c/svg%3e",Jy="/portfolioWebsite/assets/jsLogo-BLo4obvD.png",Zy="/portfolioWebsite/assets/vueLogo-D0EIEvXf.png",tE={},eE={id:"body"};function nE(e,t){return jt(),Ht("div",eE,[...t[0]||(t[0]=[Wf('<div id="topSection"><div id="topContent"><div id="leftSection"><div id="homeMain"><div id="titleText"><h1>Phille 18</h1><h1>Web Developer</h1><h5 id="proText">Location: Linkping </h5></div><h1 id="introText">Lets Talk</h1><h4>Learn more About Me </h4></div></div><div id="rightSection"><div id="skillSection"><div class="bentoBox" id="skillBox"><img src="'+Xy+'" alt="img of html"><h3>HTML</h3></div><div class="bentoBox" id="skillBox"><img src="'+Yy+'" alt="img of html"><h3>CSS</h3></div><div class="bentoBox" id="skillBox"><img src="'+Jy+'" alt="img of html"><h3>JavaScript</h3></div><div class="bentoBox" id="skillBox"><img src="'+Zy+'" alt="img of html"><h3>Vue</h3></div><div class="bentoBox" id="skillBox"><img src="" alt="img of html"><h3>React</h3></div><div class="bentoBox" id="skillBox"><img src="" alt="img of html"><h3>Node.js</h3></div><div class="bentoBox" id="skillBox"><img src="" alt="img of html"><h3>Git</h3></div><div class="bentoBox" id="skillBox"><img src="" alt="img of html"><h3>Figma</h3></div></div><div class="bentoBox" id="shortText"><h3>Web Developer</h3><p>Web developer with a passion for creating dynamic and responsive websites. Skilled in HTML, CSS, and JavaScript, with a focus on user experience and accessibility. Eager to contribute to innovative projects and collaborate with teams to deliver high-quality web solutions.</p></div></div></div></div>',1)])])}const hd=Br(tE,[["render",nE]]),rE=[{title:"UF-Fretag (Student-run enterprise)",techStack:["PHP","HTML","CSS","Github"],description:"Website for a student-run enterprise, showcasing jobb applications.",image:"./src/components/images/UF-fretag.jpg"},{title:"Seren Shop",techStack:["Vite","React","CSS","MySQL","NodeJS","Github"],description:"A quick mock up of a hypothetical coffe shop",image:"./src/components/images/serenShop.png"},{title:"PongJakt",techStack:["PHP","CSS","Javascript","Github"],description:"A Website for a competion in my school, for the last year students, which I did with a friend of mine. I mainly focused on the frontend while he did the backen.",image:"./src/components/images/Poangjakt.jpg"},{title:"Chat Rooms",techStack:["Firebase","CSS","Javascript","Github"],description:"Website for my school which helped the first year students get more social with eachother at first, using chat rooms.",image:"./src/components/images/chatRooms.png"},{title:"Ambassador Website for LBS",techStack:["PHP","CSS","Github"],description:"A website for my school which was for ambassadors, and a competition for our school.",image:"./src/components/images/Ambassador.jpg"},{title:"Coffe Shop Template",techStack:["Figma"],description:"A quick mock up of a hypothetical coffe shop",image:"./src/components/images/coffeShop.png"},{title:"Task Board",techStack:["HTML","CSS","Javascript"],description:"A quick project of creating a task board.",image:"./src/components/images/TaskBoard.png"}],sE={id:"parallaxContainer"},iE={class:"card"},oE={class:"leftSide"},aE={class:"techStack"},lE={id:"description"},cE={class:"rightSide"},uE=["src","alt"],hE={__name:"templateComponent",setup(e){const t=Ns(rE),n=Ns(null);return fl(()=>{t.value.length-1;const r=()=>{if(!n.value)return;const s=900,i=700,a=Math.max(window.scrollY-s,0),l=Math.max(1-a/i,0);n.value.style.opacity=l,n.value.style.transform=`translateY(${(1-l)*50}px)`,n.value.style.transition="opacity 0.2s, transform 0.3s"};window.addEventListener("scroll",r),r(),go(()=>{window.removeEventListener("scroll",r)})}),(r,s)=>(jt(),Ht("div",sE,[(jt(!0),Ht(Te,null,Fi(t.value,(i,a)=>(jt(),Ht("div",{class:"templateBox",key:a},[wt("div",iE,[wt("div",oE,[wt("h4",null,Me(i.title),1),wt("ul",aE,[(jt(!0),Ht(Te,null,Fi(i.techStack,(l,c)=>(jt(),Ht("li",{key:c},Me(l),1))),128))]),wt("p",lE,Me(i.description),1)]),wt("div",cE,[wt("img",{src:i.image,alt:i.title},null,8,uE)])])]))),128))]))}},fE=Br(hE,[["__scopeId","data-v-6d50cd4f"]]),dE=[{id:1,company:"Tech Solutions Inc.",role:"Frontend Developer",year:"2020 - Present",details:["Developed and maintained the company website using React and Redux.","Collaborated with designers to implement responsive UI/UX designs.","Optimized web applications for maximum speed and scalability."]},{id:2,company:"Web Creators LLC",role:"Junior Web Developer",year:"Jun 2018 - Dec 2019",details:["Assisted in the development of client websites using HTML, CSS, and JavaScript.","Participated in code reviews and team meetings to improve coding standards.","Maintained documentation for web development projects."]},{id:3,company:"Design Studio",role:"Intern",year:"Jan 2018 - May 2018",details:["Supported the design team with creating mockups and prototypes.","Conducted research on web design trends and best practices.","Helped in testing and debugging web applications."]}],pE={id:"experienceContainer"},mE={id:"contentRight"},gE={__name:"experience",setup(e){const t=Ns(dE),n=Ns(0),r=()=>{const s=document.getElementById("contentRight");if(!s)return;const i=s.children,a=window.innerHeight/2-350;let l=0,c=1/0;for(let h=0;h<i.length;h++){const d=i[h].getBoundingClientRect(),p=d.top+d.height/2,g=Math.abs(a-p);g<c&&(c=g,l=h)}n.value=l};return fl(()=>{window.addEventListener("scroll",r),r()}),go(()=>{window.removeEventListener("scroll",r)}),(s,i)=>(jt(),Ht("div",pE,[i[1]||(i[1]=wt("div",{class:"experienceLine"},[wt("div",{class:"line"})],-1)),wt("div",mE,[i[0]||(i[0]=wt("h1",null,"Experience",-1)),(jt(!0),Ht(Te,null,Fi(t.value,(a,l)=>(jt(),Ht("div",{key:a.id,class:er(["experienceItem",{active:l===n.value}])},[wt("h2",null,Me(a.year)+"  "+Me(a.role)+" at "+Me(a.company),1),wt("p",null,Me(a.details),1)],2))),128))])]))}},_E=Br(gE,[["__scopeId","data-v-c0739ec8"]]),Us={_origin:"https://api.emailjs.com"},yE=(e,t="https://api.emailjs.com")=>{Us._userID=e,Us._origin=t},fd=(e,t,n)=>{if(!e)throw"The user ID is required. Visit https://dashboard.emailjs.com/admin/integration";if(!t)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class Vu{constructor(t){this.status=t.status,this.text=t.responseText}}const dd=(e,t,n={})=>new Promise((r,s)=>{const i=new XMLHttpRequest;i.addEventListener("load",({target:a})=>{const l=new Vu(a);l.status===200||l.text==="OK"?r(l):s(l)}),i.addEventListener("error",({target:a})=>{s(new Vu(a))}),i.open("POST",Us._origin+e,!0),Object.keys(n).forEach(a=>{i.setRequestHeader(a,n[a])}),i.send(t)}),EE=(e,t,n,r)=>{const s=r||Us._userID;return fd(s,e,t),dd("/api/v1.0/email/send",JSON.stringify({lib_version:"3.2.0",user_id:s,service_id:e,template_id:t,template_params:n}),{"Content-type":"application/json"})},vE=e=>{let t;if(typeof e=="string"?t=document.querySelector(e):t=e,!t||t.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return t},TE=(e,t,n,r)=>{const s=r||Us._userID,i=vE(n);fd(s,e,t);const a=new FormData(i);return a.append("lib_version","3.2.0"),a.append("service_id",e),a.append("template_id",t),a.append("user_id",s),dd("/api/v1.0/email/send-form",a)},wE={init:yE,send:EE,sendForm:TE},IE=()=>{};var Du={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},AE=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},md={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,c=s+2<e.length,h=c?e[s+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|h>>6,E=h&63;c||(E=64,a||(g=64)),r.push(n[d],n[p],n[g],n[E])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(pd(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):AE(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const h=s<e.length?n[e.charAt(s)]:64;++s;const p=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||h==null||p==null)throw new bE;const g=i<<2|l>>4;if(r.push(g),h!==64){const E=l<<4&240|h>>2;if(r.push(E),p!==64){const V=h<<6&192|p;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class bE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SE=function(e){const t=pd(e);return md.encodeByteArray(t,!0)},qi=function(e){return SE(e).replace(/\./g,"")},RE=function(e){try{return md.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PE=()=>CE().__FIREBASE_DEFAULTS__,VE=()=>{if(typeof process>"u"||typeof Du>"u")return;const e=Du.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},DE=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&RE(e[1]);return t&&JSON.parse(t)},yl=()=>{try{return IE()||PE()||VE()||DE()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},xE=e=>yl()?.emulatorHosts?.[e],NE=e=>{const t=xE(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},gd=()=>yl()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ME(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[qi(JSON.stringify(n)),qi(JSON.stringify(a)),""].join(".")}const bs={};function LE(){const e={prod:[],emulator:[]};for(const t of Object.keys(bs))bs[t]?e.emulator.push(t):e.prod.push(t);return e}function FE(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let xu=!1;function UE(e,t){if(typeof window>"u"||typeof document>"u"||!El(window.location.host)||bs[e]===t||bs[e]||xu)return;bs[e]=t;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=LE().prod.length>0;function a(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,E){g.setAttribute("width","24"),g.setAttribute("id",E),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function h(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{xu=!0,a()},g}function d(g,E){g.setAttribute("id",E),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=FE(r),E=n("text"),V=document.getElementById(E)||document.createElement("span"),N=n("learnmore"),k=document.getElementById(N)||document.createElement("a"),q=n("preprendIcon"),$=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const H=g.element;l(H),d(k,N);const G=h();c($,q),H.append($,V,k,G),document.body.appendChild(H)}i?(V.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",E)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jE(){const e=yl()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $E(){return!jE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qE(){try{return typeof indexedDB=="object"}catch{return!1}}function HE(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{t(s.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zE="FirebaseError";class jr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=zE,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_d.prototype.create)}}class _d{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?KE(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new jr(s,l,r)}}function KE(e,t){return e.replace(WE,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const WE=/\{\$([^}]+)}/g;function Hi(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(Nu(i)&&Nu(a)){if(!Hi(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Nu(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nr(e){return e&&e._delegate?e._delegate:e}class Bs{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new OE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),r=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(XE(t))try{this.getOrInitializeService({instanceIdentifier:Xn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=Xn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Xn){return this.instances.has(t)}getOptions(t=Xn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(t),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&t(i,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:QE(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Xn){return this.component?this.component.multipleInstances?t:Xn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function QE(e){return e===Xn?void 0:e}function XE(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new GE(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(_t||(_t={}));const JE={debug:_t.DEBUG,verbose:_t.VERBOSE,info:_t.INFO,warn:_t.WARN,error:_t.ERROR,silent:_t.SILENT},ZE=_t.INFO,tv={[_t.DEBUG]:"log",[_t.VERBOSE]:"log",[_t.INFO]:"info",[_t.WARN]:"warn",[_t.ERROR]:"error"},ev=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=tv[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class yd{constructor(t){this.name=t,this._logLevel=ZE,this._logHandler=ev,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in _t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?JE[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,_t.DEBUG,...t),this._logHandler(this,_t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,_t.VERBOSE,...t),this._logHandler(this,_t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,_t.INFO,...t),this._logHandler(this,_t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,_t.WARN,...t),this._logHandler(this,_t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,_t.ERROR,...t),this._logHandler(this,_t.ERROR,...t)}}const nv=(e,t)=>t.some(n=>e instanceof n);let Ou,Mu;function rv(){return Ou||(Ou=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sv(){return Mu||(Mu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ed=new WeakMap,xa=new WeakMap,vd=new WeakMap,la=new WeakMap,vl=new WeakMap;function iv(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(Cn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&Ed.set(n,e)}).catch(()=>{}),vl.set(t,e),t}function ov(e){if(xa.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});xa.set(e,t)}let Na={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return xa.get(e);if(t==="objectStoreNames")return e.objectStoreNames||vd.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function av(e){Na=e(Na)}function lv(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(ca(this),t,...n);return vd.set(r,t.sort?t.sort():[t]),Cn(r)}:sv().includes(e)?function(...t){return e.apply(ca(this),t),Cn(Ed.get(this))}:function(...t){return Cn(e.apply(ca(this),t))}}function cv(e){return typeof e=="function"?lv(e):(e instanceof IDBTransaction&&ov(e),nv(e,rv())?new Proxy(e,Na):e)}function Cn(e){if(e instanceof IDBRequest)return iv(e);if(la.has(e))return la.get(e);const t=cv(e);return t!==e&&(la.set(e,t),vl.set(t,e)),t}const ca=e=>vl.get(e);function uv(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=Cn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Cn(a.result),c.oldVersion,c.newVersion,Cn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",h=>s(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const hv=["get","getKey","getAll","getAllKeys","count"],fv=["put","add","delete","clear"],ua=new Map;function ku(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ua.get(t))return ua.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=fv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hv.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),s&&c.done]))[0]};return ua.set(t,i),i}av(e=>({...e,get:(t,n,r)=>ku(t,n)||e.get(t,n,r),has:(t,n)=>!!ku(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pv(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pv(e){return e.getComponent()?.type==="VERSION"}const Oa="@firebase/app",Lu="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=new yd("@firebase/app"),mv="@firebase/app-compat",gv="@firebase/analytics-compat",_v="@firebase/analytics",yv="@firebase/app-check-compat",Ev="@firebase/app-check",vv="@firebase/auth",Tv="@firebase/auth-compat",wv="@firebase/database",Iv="@firebase/data-connect",Av="@firebase/database-compat",bv="@firebase/functions",Sv="@firebase/functions-compat",Rv="@firebase/installations",Cv="@firebase/installations-compat",Pv="@firebase/messaging",Vv="@firebase/messaging-compat",Dv="@firebase/performance",xv="@firebase/performance-compat",Nv="@firebase/remote-config",Ov="@firebase/remote-config-compat",Mv="@firebase/storage",kv="@firebase/storage-compat",Lv="@firebase/firestore",Fv="@firebase/ai",Uv="@firebase/firestore-compat",Bv="firebase",jv="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma="[DEFAULT]",$v={[Oa]:"fire-core",[mv]:"fire-core-compat",[_v]:"fire-analytics",[gv]:"fire-analytics-compat",[Ev]:"fire-app-check",[yv]:"fire-app-check-compat",[vv]:"fire-auth",[Tv]:"fire-auth-compat",[wv]:"fire-rtdb",[Iv]:"fire-data-connect",[Av]:"fire-rtdb-compat",[bv]:"fire-fn",[Sv]:"fire-fn-compat",[Rv]:"fire-iid",[Cv]:"fire-iid-compat",[Pv]:"fire-fcm",[Vv]:"fire-fcm-compat",[Dv]:"fire-perf",[xv]:"fire-perf-compat",[Nv]:"fire-rc",[Ov]:"fire-rc-compat",[Mv]:"fire-gcs",[kv]:"fire-gcs-compat",[Lv]:"fire-fst",[Uv]:"fire-fst-compat",[Fv]:"fire-vertex","fire-js":"fire-js",[Bv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi=new Map,qv=new Map,ka=new Map;function Fu(e,t){try{e.container.addComponent(t)}catch(n){hn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ki(e){const t=e.name;if(ka.has(t))return hn.debug(`There were multiple attempts to register component ${t}.`),!1;ka.set(t,e);for(const n of zi.values())Fu(n,e);for(const n of qv.values())Fu(n,e);return!0}function Hv(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function zv(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pn=new _d("app","Firebase",Kv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wv{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Pn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv=jv;function Td(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r={name:Ma,automaticDataCollectionEnabled:!0,...t},s=r.name;if(typeof s!="string"||!s)throw Pn.create("bad-app-name",{appName:String(s)});if(n||(n=gd()),!n)throw Pn.create("no-options");const i=zi.get(s);if(i){if(Hi(n,i.options)&&Hi(r,i.config))return i;throw Pn.create("duplicate-app",{appName:s})}const a=new YE(s);for(const c of ka.values())a.addComponent(c);const l=new Wv(n,r,a);return zi.set(s,l),l}function Qv(e=Ma){const t=zi.get(e);if(!t&&e===Ma&&gd())return Td();if(!t)throw Pn.create("no-app",{appName:e});return t}function Rr(e,t,n){let r=$v[e]??e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),hn.warn(a.join(" "));return}Ki(new Bs(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xv="firebase-heartbeat-database",Yv=1,js="firebase-heartbeat-store";let ha=null;function wd(){return ha||(ha=uv(Xv,Yv,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(js)}catch(n){console.warn(n)}}}}).catch(e=>{throw Pn.create("idb-open",{originalErrorMessage:e.message})})),ha}async function Jv(e){try{const n=(await wd()).transaction(js),r=await n.objectStore(js).get(Id(e));return await n.done,r}catch(t){if(t instanceof jr)hn.warn(t.message);else{const n=Pn.create("idb-get",{originalErrorMessage:t?.message});hn.warn(n.message)}}}async function Uu(e,t){try{const r=(await wd()).transaction(js,"readwrite");await r.objectStore(js).put(t,Id(e)),await r.done}catch(n){if(n instanceof jr)hn.warn(n.message);else{const r=Pn.create("idb-set",{originalErrorMessage:n?.message});hn.warn(r.message)}}}function Id(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=1024,tT=30;class eT{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rT(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Bu();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>tT){const s=sT(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){hn.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Bu(),{heartbeatsToSend:n,unsentEntries:r}=nT(this._heartbeatsCache.heartbeats),s=qi(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return hn.warn(t),""}}}function Bu(){return new Date().toISOString().substring(0,10)}function nT(e,t=Zv){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),ju(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ju(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rT{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qE()?HE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Jv(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Uu(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Uu(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function ju(e){return qi(JSON.stringify({version:2,heartbeats:e})).length}function sT(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(e){Ki(new Bs("platform-logger",t=>new dv(t),"PRIVATE")),Ki(new Bs("heartbeat",t=>new eT(t),"PRIVATE")),Rr(Oa,Lu,e),Rr(Oa,Lu,"esm2020"),Rr("fire-js","")}iT("");var $u=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vn,Ad;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,y){function T(){}T.prototype=y.prototype,I.F=y.prototype,I.prototype=new T,I.prototype.constructor=I,I.D=function(b,A,R){for(var v=Array(arguments.length-2),Ft=2;Ft<arguments.length;Ft++)v[Ft-2]=arguments[Ft];return y.prototype[A].apply(b,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,y,T){T||(T=0);const b=Array(16);if(typeof y=="string")for(var A=0;A<16;++A)b[A]=y.charCodeAt(T++)|y.charCodeAt(T++)<<8|y.charCodeAt(T++)<<16|y.charCodeAt(T++)<<24;else for(A=0;A<16;++A)b[A]=y[T++]|y[T++]<<8|y[T++]<<16|y[T++]<<24;y=I.g[0],T=I.g[1],A=I.g[2];let R=I.g[3],v;v=y+(R^T&(A^R))+b[0]+3614090360&4294967295,y=T+(v<<7&4294967295|v>>>25),v=R+(A^y&(T^A))+b[1]+3905402710&4294967295,R=y+(v<<12&4294967295|v>>>20),v=A+(T^R&(y^T))+b[2]+606105819&4294967295,A=R+(v<<17&4294967295|v>>>15),v=T+(y^A&(R^y))+b[3]+3250441966&4294967295,T=A+(v<<22&4294967295|v>>>10),v=y+(R^T&(A^R))+b[4]+4118548399&4294967295,y=T+(v<<7&4294967295|v>>>25),v=R+(A^y&(T^A))+b[5]+1200080426&4294967295,R=y+(v<<12&4294967295|v>>>20),v=A+(T^R&(y^T))+b[6]+2821735955&4294967295,A=R+(v<<17&4294967295|v>>>15),v=T+(y^A&(R^y))+b[7]+4249261313&4294967295,T=A+(v<<22&4294967295|v>>>10),v=y+(R^T&(A^R))+b[8]+1770035416&4294967295,y=T+(v<<7&4294967295|v>>>25),v=R+(A^y&(T^A))+b[9]+2336552879&4294967295,R=y+(v<<12&4294967295|v>>>20),v=A+(T^R&(y^T))+b[10]+4294925233&4294967295,A=R+(v<<17&4294967295|v>>>15),v=T+(y^A&(R^y))+b[11]+2304563134&4294967295,T=A+(v<<22&4294967295|v>>>10),v=y+(R^T&(A^R))+b[12]+1804603682&4294967295,y=T+(v<<7&4294967295|v>>>25),v=R+(A^y&(T^A))+b[13]+4254626195&4294967295,R=y+(v<<12&4294967295|v>>>20),v=A+(T^R&(y^T))+b[14]+2792965006&4294967295,A=R+(v<<17&4294967295|v>>>15),v=T+(y^A&(R^y))+b[15]+1236535329&4294967295,T=A+(v<<22&4294967295|v>>>10),v=y+(A^R&(T^A))+b[1]+4129170786&4294967295,y=T+(v<<5&4294967295|v>>>27),v=R+(T^A&(y^T))+b[6]+3225465664&4294967295,R=y+(v<<9&4294967295|v>>>23),v=A+(y^T&(R^y))+b[11]+643717713&4294967295,A=R+(v<<14&4294967295|v>>>18),v=T+(R^y&(A^R))+b[0]+3921069994&4294967295,T=A+(v<<20&4294967295|v>>>12),v=y+(A^R&(T^A))+b[5]+3593408605&4294967295,y=T+(v<<5&4294967295|v>>>27),v=R+(T^A&(y^T))+b[10]+38016083&4294967295,R=y+(v<<9&4294967295|v>>>23),v=A+(y^T&(R^y))+b[15]+3634488961&4294967295,A=R+(v<<14&4294967295|v>>>18),v=T+(R^y&(A^R))+b[4]+3889429448&4294967295,T=A+(v<<20&4294967295|v>>>12),v=y+(A^R&(T^A))+b[9]+568446438&4294967295,y=T+(v<<5&4294967295|v>>>27),v=R+(T^A&(y^T))+b[14]+3275163606&4294967295,R=y+(v<<9&4294967295|v>>>23),v=A+(y^T&(R^y))+b[3]+4107603335&4294967295,A=R+(v<<14&4294967295|v>>>18),v=T+(R^y&(A^R))+b[8]+1163531501&4294967295,T=A+(v<<20&4294967295|v>>>12),v=y+(A^R&(T^A))+b[13]+2850285829&4294967295,y=T+(v<<5&4294967295|v>>>27),v=R+(T^A&(y^T))+b[2]+4243563512&4294967295,R=y+(v<<9&4294967295|v>>>23),v=A+(y^T&(R^y))+b[7]+1735328473&4294967295,A=R+(v<<14&4294967295|v>>>18),v=T+(R^y&(A^R))+b[12]+2368359562&4294967295,T=A+(v<<20&4294967295|v>>>12),v=y+(T^A^R)+b[5]+4294588738&4294967295,y=T+(v<<4&4294967295|v>>>28),v=R+(y^T^A)+b[8]+2272392833&4294967295,R=y+(v<<11&4294967295|v>>>21),v=A+(R^y^T)+b[11]+1839030562&4294967295,A=R+(v<<16&4294967295|v>>>16),v=T+(A^R^y)+b[14]+4259657740&4294967295,T=A+(v<<23&4294967295|v>>>9),v=y+(T^A^R)+b[1]+2763975236&4294967295,y=T+(v<<4&4294967295|v>>>28),v=R+(y^T^A)+b[4]+1272893353&4294967295,R=y+(v<<11&4294967295|v>>>21),v=A+(R^y^T)+b[7]+4139469664&4294967295,A=R+(v<<16&4294967295|v>>>16),v=T+(A^R^y)+b[10]+3200236656&4294967295,T=A+(v<<23&4294967295|v>>>9),v=y+(T^A^R)+b[13]+681279174&4294967295,y=T+(v<<4&4294967295|v>>>28),v=R+(y^T^A)+b[0]+3936430074&4294967295,R=y+(v<<11&4294967295|v>>>21),v=A+(R^y^T)+b[3]+3572445317&4294967295,A=R+(v<<16&4294967295|v>>>16),v=T+(A^R^y)+b[6]+76029189&4294967295,T=A+(v<<23&4294967295|v>>>9),v=y+(T^A^R)+b[9]+3654602809&4294967295,y=T+(v<<4&4294967295|v>>>28),v=R+(y^T^A)+b[12]+3873151461&4294967295,R=y+(v<<11&4294967295|v>>>21),v=A+(R^y^T)+b[15]+530742520&4294967295,A=R+(v<<16&4294967295|v>>>16),v=T+(A^R^y)+b[2]+3299628645&4294967295,T=A+(v<<23&4294967295|v>>>9),v=y+(A^(T|~R))+b[0]+4096336452&4294967295,y=T+(v<<6&4294967295|v>>>26),v=R+(T^(y|~A))+b[7]+1126891415&4294967295,R=y+(v<<10&4294967295|v>>>22),v=A+(y^(R|~T))+b[14]+2878612391&4294967295,A=R+(v<<15&4294967295|v>>>17),v=T+(R^(A|~y))+b[5]+4237533241&4294967295,T=A+(v<<21&4294967295|v>>>11),v=y+(A^(T|~R))+b[12]+1700485571&4294967295,y=T+(v<<6&4294967295|v>>>26),v=R+(T^(y|~A))+b[3]+2399980690&4294967295,R=y+(v<<10&4294967295|v>>>22),v=A+(y^(R|~T))+b[10]+4293915773&4294967295,A=R+(v<<15&4294967295|v>>>17),v=T+(R^(A|~y))+b[1]+2240044497&4294967295,T=A+(v<<21&4294967295|v>>>11),v=y+(A^(T|~R))+b[8]+1873313359&4294967295,y=T+(v<<6&4294967295|v>>>26),v=R+(T^(y|~A))+b[15]+4264355552&4294967295,R=y+(v<<10&4294967295|v>>>22),v=A+(y^(R|~T))+b[6]+2734768916&4294967295,A=R+(v<<15&4294967295|v>>>17),v=T+(R^(A|~y))+b[13]+1309151649&4294967295,T=A+(v<<21&4294967295|v>>>11),v=y+(A^(T|~R))+b[4]+4149444226&4294967295,y=T+(v<<6&4294967295|v>>>26),v=R+(T^(y|~A))+b[11]+3174756917&4294967295,R=y+(v<<10&4294967295|v>>>22),v=A+(y^(R|~T))+b[2]+718787259&4294967295,A=R+(v<<15&4294967295|v>>>17),v=T+(R^(A|~y))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(A+(v<<21&4294967295|v>>>11))&4294967295,I.g[2]=I.g[2]+A&4294967295,I.g[3]=I.g[3]+R&4294967295}r.prototype.v=function(I,y){y===void 0&&(y=I.length);const T=y-this.blockSize,b=this.C;let A=this.h,R=0;for(;R<y;){if(A==0)for(;R<=T;)s(this,I,R),R+=this.blockSize;if(typeof I=="string"){for(;R<y;)if(b[A++]=I.charCodeAt(R++),A==this.blockSize){s(this,b),A=0;break}}else for(;R<y;)if(b[A++]=I[R++],A==this.blockSize){s(this,b),A=0;break}}this.h=A,this.o+=y},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;y=this.o*8;for(var T=I.length-8;T<I.length;++T)I[T]=y&255,y/=256;for(this.v(I),I=Array(16),y=0,T=0;T<4;++T)for(let b=0;b<32;b+=8)I[y++]=this.g[T]>>>b&255;return I};function i(I,y){var T=l;return Object.prototype.hasOwnProperty.call(T,I)?T[I]:T[I]=y(I)}function a(I,y){this.h=y;const T=[];let b=!0;for(let A=I.length-1;A>=0;A--){const R=I[A]|0;b&&R==y||(T[A]=R,b=!1)}this.g=T}var l={};function c(I){return-128<=I&&I<128?i(I,function(y){return new a([y|0],y<0?-1:0)}):new a([I|0],I<0?-1:0)}function h(I){if(isNaN(I)||!isFinite(I))return p;if(I<0)return k(h(-I));const y=[];let T=1;for(let b=0;I>=T;b++)y[b]=I/T|0,T*=4294967296;return new a(y,0)}function d(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,y<2||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return k(d(I.substring(1),y));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const T=h(Math.pow(y,8));let b=p;for(let R=0;R<I.length;R+=8){var A=Math.min(8,I.length-R);const v=parseInt(I.substring(R,R+A),y);A<8?(A=h(Math.pow(y,A)),b=b.j(A).add(h(v))):(b=b.j(T),b=b.add(h(v)))}return b}var p=c(0),g=c(1),E=c(16777216);e=a.prototype,e.m=function(){if(N(this))return-k(this).m();let I=0,y=1;for(let T=0;T<this.g.length;T++){const b=this.i(T);I+=(b>=0?b:4294967296+b)*y,y*=4294967296}return I},e.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(V(this))return"0";if(N(this))return"-"+k(this).toString(I);const y=h(Math.pow(I,6));var T=this;let b="";for(;;){const A=G(T,y).g;T=q(T,A.j(y));let R=((T.g.length>0?T.g[0]:T.h)>>>0).toString(I);if(T=A,V(T))return R+b;for(;R.length<6;)R="0"+R;b=R+b}},e.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function V(I){if(I.h!=0)return!1;for(let y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function N(I){return I.h==-1}e.l=function(I){return I=q(this,I),N(I)?-1:V(I)?0:1};function k(I){const y=I.g.length,T=[];for(let b=0;b<y;b++)T[b]=~I.g[b];return new a(T,~I.h).add(g)}e.abs=function(){return N(this)?k(this):this},e.add=function(I){const y=Math.max(this.g.length,I.g.length),T=[];let b=0;for(let A=0;A<=y;A++){let R=b+(this.i(A)&65535)+(I.i(A)&65535),v=(R>>>16)+(this.i(A)>>>16)+(I.i(A)>>>16);b=v>>>16,R&=65535,v&=65535,T[A]=v<<16|R}return new a(T,T[T.length-1]&-2147483648?-1:0)};function q(I,y){return I.add(k(y))}e.j=function(I){if(V(this)||V(I))return p;if(N(this))return N(I)?k(this).j(k(I)):k(k(this).j(I));if(N(I))return k(this.j(k(I)));if(this.l(E)<0&&I.l(E)<0)return h(this.m()*I.m());const y=this.g.length+I.g.length,T=[];for(var b=0;b<2*y;b++)T[b]=0;for(b=0;b<this.g.length;b++)for(let A=0;A<I.g.length;A++){const R=this.i(b)>>>16,v=this.i(b)&65535,Ft=I.i(A)>>>16,_e=I.i(A)&65535;T[2*b+2*A]+=v*_e,$(T,2*b+2*A),T[2*b+2*A+1]+=R*_e,$(T,2*b+2*A+1),T[2*b+2*A+1]+=v*Ft,$(T,2*b+2*A+1),T[2*b+2*A+2]+=R*Ft,$(T,2*b+2*A+2)}for(I=0;I<y;I++)T[I]=T[2*I+1]<<16|T[2*I];for(I=y;I<2*y;I++)T[I]=0;return new a(T,0)};function $(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function H(I,y){this.g=I,this.h=y}function G(I,y){if(V(y))throw Error("division by zero");if(V(I))return new H(p,p);if(N(I))return y=G(k(I),y),new H(k(y.g),k(y.h));if(N(y))return y=G(I,k(y)),new H(k(y.g),y.h);if(I.g.length>30){if(N(I)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var T=g,b=y;b.l(I)<=0;)T=lt(T),b=lt(b);var A=ft(T,1),R=ft(b,1);for(b=ft(b,2),T=ft(T,2);!V(b);){var v=R.add(b);v.l(I)<=0&&(A=A.add(T),R=v),b=ft(b,1),T=ft(T,1)}return y=q(I,A.j(y)),new H(A,y)}for(A=p;I.l(y)>=0;){for(T=Math.max(1,Math.floor(I.m()/y.m())),b=Math.ceil(Math.log(T)/Math.LN2),b=b<=48?1:Math.pow(2,b-48),R=h(T),v=R.j(y);N(v)||v.l(I)>0;)T-=b,R=h(T),v=R.j(y);V(R)&&(R=g),A=A.add(R),I=q(I,v)}return new H(A,I)}e.B=function(I){return G(this,I).h},e.and=function(I){const y=Math.max(this.g.length,I.g.length),T=[];for(let b=0;b<y;b++)T[b]=this.i(b)&I.i(b);return new a(T,this.h&I.h)},e.or=function(I){const y=Math.max(this.g.length,I.g.length),T=[];for(let b=0;b<y;b++)T[b]=this.i(b)|I.i(b);return new a(T,this.h|I.h)},e.xor=function(I){const y=Math.max(this.g.length,I.g.length),T=[];for(let b=0;b<y;b++)T[b]=this.i(b)^I.i(b);return new a(T,this.h^I.h)};function lt(I){const y=I.g.length+1,T=[];for(let b=0;b<y;b++)T[b]=I.i(b)<<1|I.i(b-1)>>>31;return new a(T,I.h)}function ft(I,y){const T=y>>5;y%=32;const b=I.g.length-T,A=[];for(let R=0;R<b;R++)A[R]=y>0?I.i(R+T)>>>y|I.i(R+T+1)<<32-y:I.i(R+T);return new a(A,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Ad=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=h,a.fromString=d,Vn=a}).apply(typeof $u<"u"?$u:typeof self<"u"?self:typeof window<"u"?window:{});var gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bd,fs,Sd,Ri,La,Rd,Cd,Pd;(function(){var e,t=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof gi=="object"&&gi];for(var u=0;u<o.length;++u){var f=o[u];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)t:{var f=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var C=o[m];if(!(C in f))break t;f=f[C]}o=o[o.length-1],m=f[o],u=u(m),u!=m&&u!=null&&t(f,o,{configurable:!0,writable:!0,value:u})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(u){var f=[],m;for(m in u)Object.prototype.hasOwnProperty.call(u,m)&&f.push([m,u[m]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function c(o,u,f){return o.call.apply(o.bind,arguments)}function h(o,u,f){return h=c,h.apply(null,arguments)}function d(o,u){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function p(o,u){function f(){}f.prototype=u.prototype,o.Z=u.prototype,o.prototype=new f,o.prototype.constructor=o,o.Ob=function(m,C,P){for(var z=Array(arguments.length-2),ut=2;ut<arguments.length;ut++)z[ut-2]=arguments[ut];return u.prototype[C].apply(m,z)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function E(o){const u=o.length;if(u>0){const f=Array(u);for(let m=0;m<u;m++)f[m]=o[m];return f}return[]}function V(o,u){for(let m=1;m<arguments.length;m++){const C=arguments[m];var f=typeof C;if(f=f!="object"?f:C?Array.isArray(C)?"array":f:"null",f=="array"||f=="object"&&typeof C.length=="number"){f=o.length||0;const P=C.length||0;o.length=f+P;for(let z=0;z<P;z++)o[f+z]=C[z]}else o.push(C)}}class N{constructor(u,f){this.i=u,this.j=f,this.h=0,this.g=null}get(){let u;return this.h>0?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function k(o){a.setTimeout(()=>{throw o},0)}function q(){var o=I;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class ${constructor(){this.h=this.g=null}add(u,f){const m=H.get();m.set(u,f),this.h?this.h.next=m:this.g=m,this.h=m}}var H=new N(()=>new G,o=>o.reset());class G{constructor(){this.next=this.g=this.h=null}set(u,f){this.h=u,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let lt,ft=!1,I=new $,y=()=>{const o=Promise.resolve(void 0);lt=()=>{o.then(T)}};function T(){for(var o;o=q();){try{o.h.call(o.g)}catch(f){k(f)}var u=H;u.j(o),u.h<100&&(u.h++,o.next=u.g,u.g=o)}ft=!1}function b(){this.u=this.u,this.C=this.C}b.prototype.u=!1,b.prototype.dispose=function(){this.u||(this.u=!0,this.N())},b.prototype[Symbol.dispose]=function(){this.dispose()},b.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var R=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};a.addEventListener("test",f,u),a.removeEventListener("test",f,u)}catch{}return o})();function v(o){return/^[\s\xa0]*$/.test(o)}function Ft(o,u){A.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,u)}p(Ft,A),Ft.prototype.init=function(o,u){const f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget,u||(f=="mouseover"?u=o.fromElement:f=="mouseout"&&(u=o.toElement)),this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Ft.Z.h.call(this)},Ft.prototype.h=function(){Ft.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var _e="closure_listenable_"+(Math.random()*1e6|0),Ut=0;function Et(o,u,f,m,C){this.listener=o,this.proxy=null,this.src=u,this.type=f,this.capture=!!m,this.ha=C,this.key=++Ut,this.da=this.fa=!1}function mt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function ye(o,u,f){for(const m in o)u.call(f,o[m],m,o)}function Ue(o,u){for(const f in o)u.call(void 0,o[f],f,o)}function we(o){const u={};for(const f in o)u[f]=o[f];return u}const Jt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tn(o,u){let f,m;for(let C=1;C<arguments.length;C++){m=arguments[C];for(f in m)o[f]=m[f];for(let P=0;P<Jt.length;P++)f=Jt[P],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function xe(o){this.src=o,this.g={},this.h=0}xe.prototype.add=function(o,u,f,m,C){const P=o.toString();o=this.g[P],o||(o=this.g[P]=[],this.h++);const z=se(o,u,m,C);return z>-1?(u=o[z],f||(u.fa=!1)):(u=new Et(u,this.src,P,!!m,C),u.fa=f,o.push(u)),u};function mn(o,u){const f=u.type;if(f in o.g){var m=o.g[f],C=Array.prototype.indexOf.call(m,u,void 0),P;(P=C>=0)&&Array.prototype.splice.call(m,C,1),P&&(mt(u),o.g[f].length==0&&(delete o.g[f],o.h--))}}function se(o,u,f,m){for(let C=0;C<o.length;++C){const P=o[C];if(!P.da&&P.listener==u&&P.capture==!!f&&P.ha==m)return C}return-1}var x="closure_lm_"+(Math.random()*1e6|0),X={};function W(o,u,f,m,C){if(Array.isArray(u)){for(let P=0;P<u.length;P++)W(o,u[P],f,m,C);return null}return f=K(f),o&&o[_e]?o.J(u,f,l(m)?!!m.capture:!1,C):J(o,u,f,!1,m,C)}function J(o,u,f,m,C,P){if(!u)throw Error("Invalid event type");const z=l(C)?!!C.capture:!!C;let ut=L(o);if(ut||(o[x]=ut=new xe(o)),f=ut.add(u,f,m,z,P),f.proxy)return f;if(m=bt(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)R||(C=z),C===void 0&&(C=!1),o.addEventListener(u.toString(),m,C);else if(o.attachEvent)o.attachEvent(S(u.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function bt(){function o(f){return u.call(o.src,o.listener,f)}const u=O;return o}function _(o,u,f,m,C){if(Array.isArray(u))for(var P=0;P<u.length;P++)_(o,u[P],f,m,C);else m=l(m)?!!m.capture:!!m,f=K(f),o&&o[_e]?(o=o.i,P=String(u).toString(),P in o.g&&(u=o.g[P],f=se(u,f,m,C),f>-1&&(mt(u[f]),Array.prototype.splice.call(u,f,1),u.length==0&&(delete o.g[P],o.h--)))):o&&(o=L(o))&&(u=o.g[u.toString()],o=-1,u&&(o=se(u,f,m,C)),(f=o>-1?u[o]:null)&&w(f))}function w(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[_e])mn(u.i,o);else{var f=o.type,m=o.proxy;u.removeEventListener?u.removeEventListener(f,m,o.capture):u.detachEvent?u.detachEvent(S(f),m):u.addListener&&u.removeListener&&u.removeListener(m),(f=L(u))?(mn(f,o),f.h==0&&(f.src=null,u[x]=null)):mt(o)}}}function S(o){return o in X?X[o]:X[o]="on"+o}function O(o,u){if(o.da)o=!0;else{u=new Ft(u,this);const f=o.listener,m=o.ha||o.src;o.fa&&w(o),o=f.call(m,u)}return o}function L(o){return o=o[x],o instanceof xe?o:null}var D="__closure_events_fn_"+(Math.random()*1e9>>>0);function K(o){return typeof o=="function"?o:(o[D]||(o[D]=function(u){return o.handleEvent(u)}),o[D])}function j(){b.call(this),this.i=new xe(this),this.M=this,this.G=null}p(j,b),j.prototype[_e]=!0,j.prototype.removeEventListener=function(o,u,f,m){_(this,o,u,f,m)};function U(o,u){var f,m=o.G;if(m)for(f=[];m;m=m.G)f.push(m);if(o=o.M,m=u.type||u,typeof u=="string")u=new A(u,o);else if(u instanceof A)u.target=u.target||o;else{var C=u;u=new A(m,o),tn(u,C)}C=!0;let P,z;if(f)for(z=f.length-1;z>=0;z--)P=u.g=f[z],C=B(P,m,!0,u)&&C;if(P=u.g=o,C=B(P,m,!0,u)&&C,C=B(P,m,!1,u)&&C,f)for(z=0;z<f.length;z++)P=u.g=f[z],C=B(P,m,!1,u)&&C}j.prototype.N=function(){if(j.Z.N.call(this),this.i){var o=this.i;for(const u in o.g){const f=o.g[u];for(let m=0;m<f.length;m++)mt(f[m]);delete o.g[u],o.h--}}this.G=null},j.prototype.J=function(o,u,f,m){return this.i.add(String(o),u,!1,f,m)},j.prototype.K=function(o,u,f,m){return this.i.add(String(o),u,!0,f,m)};function B(o,u,f,m){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();let C=!0;for(let P=0;P<u.length;++P){const z=u[P];if(z&&!z.da&&z.capture==f){const ut=z.listener,qt=z.ha||z.src;z.fa&&mn(o.i,z),C=ut.call(qt,m)!==!1&&C}}return C&&!m.defaultPrevented}function nt(o,u){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=h(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(u)>2147483647?-1:a.setTimeout(o,u||0)}function Q(o){o.g=nt(()=>{o.g=null,o.i&&(o.i=!1,Q(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class tt extends b{constructor(u,f){super(),this.m=u,this.l=f,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Q(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rt(o){b.call(this),this.h=o,this.g={}}p(rt,b);var ht=[];function St(o){ye(o.g,function(u,f){this.g.hasOwnProperty(f)&&w(u)},o),o.g={}}rt.prototype.N=function(){rt.Z.N.call(this),St(this)},rt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yt=a.JSON.stringify,ie=a.JSON.parse,oe=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function Ie(){}function Ae(){}var Ne={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function cr(){A.call(this,"d")}p(cr,A);function Zt(){A.call(this,"c")}p(Zt,A);var Gt={},Kr=null;function $n(){return Kr=Kr||new j}Gt.Ia="serverreachability";function Ql(o){A.call(this,Gt.Ia,o)}p(Ql,A);function Wr(o){const u=$n();U(u,new Ql(u))}Gt.STAT_EVENT="statevent";function Xl(o,u){A.call(this,Gt.STAT_EVENT,o),this.stat=u}p(Xl,A);function de(o){const u=$n();U(u,new Xl(u,o))}Gt.Ja="timingevent";function Yl(o,u){A.call(this,Gt.Ja,o),this.size=u}p(Yl,A);function Gr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},u)}function Qr(){this.g=!0}Qr.prototype.ua=function(){this.g=!1};function tm(o,u,f,m,C,P){o.info(function(){if(o.g)if(P){var z="",ut=P.split("&");for(let Rt=0;Rt<ut.length;Rt++){var qt=ut[Rt].split("=");if(qt.length>1){const Qt=qt[0];qt=qt[1];const je=Qt.split("_");z=je.length>=2&&je[1]=="type"?z+(Qt+"="+qt+"&"):z+(Qt+"=redacted&")}}}else z=null;else z=P;return"XMLHTTP REQ ("+m+") [attempt "+C+"]: "+u+`
`+f+`
`+z})}function em(o,u,f,m,C,P,z){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+C+"]: "+u+`
`+f+`
`+P+" "+z})}function ur(o,u,f,m){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+rm(o,f)+(m?" "+m:"")})}function nm(o,u){o.info(function(){return"TIMEOUT: "+u})}Qr.prototype.info=function(){};function rm(o,u){if(!o.g)return u;if(!u)return null;try{const P=JSON.parse(u);if(P){for(o=0;o<P.length;o++)if(Array.isArray(P[o])){var f=P[o];if(!(f.length<2)){var m=f[1];if(Array.isArray(m)&&!(m.length<1)){var C=m[0];if(C!="noop"&&C!="stop"&&C!="close")for(let z=1;z<m.length;z++)m[z]=""}}}}return yt(P)}catch{return u}}var ei={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Jl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Zl;function Mo(){}p(Mo,Ie),Mo.prototype.g=function(){return new XMLHttpRequest},Zl=new Mo;function Xr(o){return encodeURIComponent(String(o))}function sm(o){var u=1;o=o.split(":");const f=[];for(;u>0&&o.length;)f.push(o.shift()),u--;return o.length&&f.push(o.join(":")),f}function gn(o,u,f,m){this.j=o,this.i=u,this.l=f,this.S=m||1,this.V=new rt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new tc}function tc(){this.i=null,this.g="",this.h=!1}var ec={},ko={};function Lo(o,u,f){o.M=1,o.A=ri(Be(u)),o.u=f,o.R=!0,nc(o,null)}function nc(o,u){o.F=Date.now(),ni(o),o.B=Be(o.A);var f=o.B,m=o.S;Array.isArray(m)||(m=[String(m)]),mc(f.i,"t",m),o.C=0,f=o.j.L,o.h=new tc,o.g=Nc(o.j,f?u:null,!o.u),o.P>0&&(o.O=new tt(h(o.Y,o,o.g),o.P)),u=o.V,f=o.g,m=o.ba;var C="readystatechange";Array.isArray(C)||(C&&(ht[0]=C.toString()),C=ht);for(let P=0;P<C.length;P++){const z=W(f,C[P],m||u.handleEvent,!1,u.h||u);if(!z)break;u.g[z.key]=z}u=o.J?we(o.J):{},o.u?(o.v||(o.v="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,u)):(o.v="GET",o.g.ea(o.B,o.v,null,u)),Wr(),tm(o.i,o.v,o.B,o.l,o.S,o.u)}gn.prototype.ba=function(o){o=o.target;const u=this.O;u&&En(o)==3?u.j():this.Y(o)},gn.prototype.Y=function(o){try{if(o==this.g)t:{const ut=En(this.g),qt=this.g.ya(),Rt=this.g.ca();if(!(ut<3)&&(ut!=3||this.g&&(this.h.h||this.g.la()||wc(this.g)))){this.K||ut!=4||qt==7||(qt==8||Rt<=0?Wr(3):Wr(2)),Fo(this);var u=this.g.ca();this.X=u;var f=im(this);if(this.o=u==200,em(this.i,this.v,this.B,this.l,this.S,ut,u),this.o){if(this.U&&!this.L){e:{if(this.g){var m,C=this.g;if((m=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(m)){var P=m;break e}}P=null}if(o=P)ur(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Uo(this,o);else{this.o=!1,this.m=3,de(12),qn(this),Yr(this);break t}}if(this.R){o=!0;let Qt;for(;!this.K&&this.C<f.length;)if(Qt=om(this,f),Qt==ko){ut==4&&(this.m=4,de(14),o=!1),ur(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==ec){this.m=4,de(15),ur(this.i,this.l,f,"[Invalid Chunk]"),o=!1;break}else ur(this.i,this.l,Qt,null),Uo(this,Qt);if(rc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||f.length!=0||this.h.h||(this.m=1,de(16),o=!1),this.o=this.o&&o,!o)ur(this.i,this.l,f,"[Invalid Chunked Response]"),qn(this),Yr(this);else if(f.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Wo(z),z.P=!0,de(11))}}else ur(this.i,this.l,f,null),Uo(this,f);ut==4&&qn(this),this.o&&!this.K&&(ut==4?Pc(this.j,this):(this.o=!1,ni(this)))}else vm(this.g),u==400&&f.indexOf("Unknown SID")>0?(this.m=3,de(12)):(this.m=0,de(13)),qn(this),Yr(this)}}}catch{}finally{}};function im(o){if(!rc(o))return o.g.la();const u=wc(o.g);if(u==="")return"";let f="";const m=u.length,C=En(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return qn(o),Yr(o),"";o.h.i=new a.TextDecoder}for(let P=0;P<m;P++)o.h.h=!0,f+=o.h.i.decode(u[P],{stream:!(C&&P==m-1)});return u.length=0,o.h.g+=f,o.C=0,o.h.g}function rc(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function om(o,u){var f=o.C,m=u.indexOf(`
`,f);return m==-1?ko:(f=Number(u.substring(f,m)),isNaN(f)?ec:(m+=1,m+f>u.length?ko:(u=u.slice(m,m+f),o.C=m+f,u)))}gn.prototype.cancel=function(){this.K=!0,qn(this)};function ni(o){o.T=Date.now()+o.H,sc(o,o.H)}function sc(o,u){if(o.D!=null)throw Error("WatchDog timer not null");o.D=Gr(h(o.aa,o),u)}function Fo(o){o.D&&(a.clearTimeout(o.D),o.D=null)}gn.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(nm(this.i,this.B),this.M!=2&&(Wr(),de(17)),qn(this),this.m=2,Yr(this)):sc(this,this.T-o)};function Yr(o){o.j.I==0||o.K||Pc(o.j,o)}function qn(o){Fo(o);var u=o.O;u&&typeof u.dispose=="function"&&u.dispose(),o.O=null,St(o.V),o.g&&(u=o.g,o.g=null,u.abort(),u.dispose())}function Uo(o,u){try{var f=o.j;if(f.I!=0&&(f.g==o||Bo(f.h,o))){if(!o.L&&Bo(f.h,o)&&f.I==3){try{var m=f.Ba.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var C=m;if(C[0]==0){t:if(!f.v){if(f.g)if(f.g.F+3e3<o.F)li(f),oi(f);else break t;Ko(f),de(18)}}else f.xa=C[1],0<f.xa-f.K&&C[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=Gr(h(f.Va,f),6e3));ac(f.h)<=1&&f.ta&&(f.ta=void 0)}else zn(f,11)}else if((o.L||f.g==o)&&li(f),!v(u))for(C=f.Ba.g.parse(u),u=0;u<C.length;u++){let Rt=C[u];const Qt=Rt[0];if(!(Qt<=f.K))if(f.K=Qt,Rt=Rt[1],f.I==2)if(Rt[0]=="c"){f.M=Rt[1],f.ba=Rt[2];const je=Rt[3];je!=null&&(f.ka=je,f.j.info("VER="+f.ka));const Kn=Rt[4];Kn!=null&&(f.za=Kn,f.j.info("SVER="+f.za));const vn=Rt[5];vn!=null&&typeof vn=="number"&&vn>0&&(m=1.5*vn,f.O=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const Tn=o.g;if(Tn){const ui=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ui){var P=m.h;P.g||ui.indexOf("spdy")==-1&&ui.indexOf("quic")==-1&&ui.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(jo(P,P.h),P.h=null))}if(m.G){const Go=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Go&&(m.wa=Go,Vt(m.J,m.G,Go))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-o.F,f.j.info("Handshake RTT: "+f.T+"ms")),m=f;var z=o;if(m.na=xc(m,m.L?m.ba:null,m.W),z.L){lc(m.h,z);var ut=z,qt=m.O;qt&&(ut.H=qt),ut.D&&(Fo(ut),ni(ut)),m.g=z}else Rc(m);f.i.length>0&&ai(f)}else Rt[0]!="stop"&&Rt[0]!="close"||zn(f,7);else f.I==3&&(Rt[0]=="stop"||Rt[0]=="close"?Rt[0]=="stop"?zn(f,7):zo(f):Rt[0]!="noop"&&f.l&&f.l.qa(Rt),f.A=0)}}Wr(4)}catch{}}var am=class{constructor(o,u){this.g=o,this.map=u}};function ic(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function oc(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function ac(o){return o.h?1:o.g?o.g.size:0}function Bo(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function jo(o,u){o.g?o.g.add(u):o.h=u}function lc(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}ic.prototype.cancel=function(){if(this.i=cc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function cc(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const f of o.g.values())u=u.concat(f.G);return u}return E(o.i)}var uc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function lm(o,u){if(o){o=o.split("&");for(let f=0;f<o.length;f++){const m=o[f].indexOf("=");let C,P=null;m>=0?(C=o[f].substring(0,m),P=o[f].substring(m+1)):C=o[f],u(C,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function _n(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let u;o instanceof _n?(this.l=o.l,Jr(this,o.j),this.o=o.o,this.g=o.g,Zr(this,o.u),this.h=o.h,$o(this,gc(o.i)),this.m=o.m):o&&(u=String(o).match(uc))?(this.l=!1,Jr(this,u[1]||"",!0),this.o=ts(u[2]||""),this.g=ts(u[3]||"",!0),Zr(this,u[4]),this.h=ts(u[5]||"",!0),$o(this,u[6]||"",!0),this.m=ts(u[7]||"")):(this.l=!1,this.i=new ns(null,this.l))}_n.prototype.toString=function(){const o=[];var u=this.j;u&&o.push(es(u,hc,!0),":");var f=this.g;return(f||u=="file")&&(o.push("//"),(u=this.o)&&o.push(es(u,hc,!0),"@"),o.push(Xr(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&o.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(es(f,f.charAt(0)=="/"?hm:um,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",es(f,dm)),o.join("")},_n.prototype.resolve=function(o){const u=Be(this);let f=!!o.j;f?Jr(u,o.j):f=!!o.o,f?u.o=o.o:f=!!o.g,f?u.g=o.g:f=o.u!=null;var m=o.h;if(f)Zr(u,o.u);else if(f=!!o.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var C=u.h.lastIndexOf("/");C!=-1&&(m=u.h.slice(0,C+1)+m)}if(C=m,C==".."||C==".")m="";else if(C.indexOf("./")!=-1||C.indexOf("/.")!=-1){m=C.lastIndexOf("/",0)==0,C=C.split("/");const P=[];for(let z=0;z<C.length;){const ut=C[z++];ut=="."?m&&z==C.length&&P.push(""):ut==".."?((P.length>1||P.length==1&&P[0]!="")&&P.pop(),m&&z==C.length&&P.push("")):(P.push(ut),m=!0)}m=P.join("/")}else m=C}return f?u.h=m:f=o.i.toString()!=="",f?$o(u,gc(o.i)):f=!!o.m,f&&(u.m=o.m),u};function Be(o){return new _n(o)}function Jr(o,u,f){o.j=f?ts(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Zr(o,u){if(u){if(u=Number(u),isNaN(u)||u<0)throw Error("Bad port number "+u);o.u=u}else o.u=null}function $o(o,u,f){u instanceof ns?(o.i=u,pm(o.i,o.l)):(f||(u=es(u,fm)),o.i=new ns(u,o.l))}function Vt(o,u,f){o.i.set(u,f)}function ri(o){return Vt(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function ts(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function es(o,u,f){return typeof o=="string"?(o=encodeURI(o).replace(u,cm),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function cm(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var hc=/[#\/\?@]/g,um=/[#\?:]/g,hm=/[#\?]/g,fm=/[#\?@]/g,dm=/#/g;function ns(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Hn(o){o.g||(o.g=new Map,o.h=0,o.i&&lm(o.i,function(u,f){o.add(decodeURIComponent(u.replace(/\+/g," ")),f)}))}e=ns.prototype,e.add=function(o,u){Hn(this),this.i=null,o=hr(this,o);let f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(u),this.h+=1,this};function fc(o,u){Hn(o),u=hr(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function dc(o,u){return Hn(o),u=hr(o,u),o.g.has(u)}e.forEach=function(o,u){Hn(this),this.g.forEach(function(f,m){f.forEach(function(C){o.call(u,C,m,this)},this)},this)};function pc(o,u){Hn(o);let f=[];if(typeof u=="string")dc(o,u)&&(f=f.concat(o.g.get(hr(o,u))));else for(o=Array.from(o.g.values()),u=0;u<o.length;u++)f=f.concat(o[u]);return f}e.set=function(o,u){return Hn(this),this.i=null,o=hr(this,o),dc(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},e.get=function(o,u){return o?(o=pc(this,o),o.length>0?String(o[0]):u):u};function mc(o,u,f){fc(o,u),f.length>0&&(o.i=null,o.g.set(hr(o,u),E(f)),o.h+=f.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(let m=0;m<u.length;m++){var f=u[m];const C=Xr(f);f=pc(this,f);for(let P=0;P<f.length;P++){let z=C;f[P]!==""&&(z+="="+Xr(f[P])),o.push(z)}}return this.i=o.join("&")};function gc(o){const u=new ns;return u.i=o.i,o.g&&(u.g=new Map(o.g),u.h=o.h),u}function hr(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function pm(o,u){u&&!o.j&&(Hn(o),o.i=null,o.g.forEach(function(f,m){const C=m.toLowerCase();m!=C&&(fc(this,m),mc(this,C,f))},o)),o.j=u}function mm(o,u){const f=new Qr;if(a.Image){const m=new Image;m.onload=d(yn,f,"TestLoadImage: loaded",!0,u,m),m.onerror=d(yn,f,"TestLoadImage: error",!1,u,m),m.onabort=d(yn,f,"TestLoadImage: abort",!1,u,m),m.ontimeout=d(yn,f,"TestLoadImage: timeout",!1,u,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else u(!1)}function gm(o,u){const f=new Qr,m=new AbortController,C=setTimeout(()=>{m.abort(),yn(f,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:m.signal}).then(P=>{clearTimeout(C),P.ok?yn(f,"TestPingServer: ok",!0,u):yn(f,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(C),yn(f,"TestPingServer: error",!1,u)})}function yn(o,u,f,m,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),m(f)}catch{}}function _m(){this.g=new oe}function qo(o){this.i=o.Sb||null,this.h=o.ab||!1}p(qo,Ie),qo.prototype.g=function(){return new si(this.i,this.h)};function si(o,u){j.call(this),this.H=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(si,j),e=si.prototype,e.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=u,this.readyState=1,ss(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const u={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(u.body=o),(this.H||a).fetch(new Request(this.D,u)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,rs(this)),this.readyState=0},e.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,ss(this)),this.g&&(this.readyState=3,ss(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_c(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function _c(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}e.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.B.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?rs(this):ss(this),this.readyState==3&&_c(this)}},e.Oa=function(o){this.g&&(this.response=this.responseText=o,rs(this))},e.Na=function(o){this.g&&(this.response=o,rs(this))},e.ga=function(){this.g&&rs(this)};function rs(o){o.readyState=4,o.l=null,o.j=null,o.B=null,ss(o)}e.setRequestHeader=function(o,u){this.A.append(o,u)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var f=u.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=u.next();return o.join(`\r
`)};function ss(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(si.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function yc(o){let u="";return ye(o,function(f,m){u+=m,u+=":",u+=f,u+=`\r
`}),u}function Ho(o,u,f){t:{for(m in f){var m=!1;break t}m=!0}m||(f=yc(f),typeof o=="string"?f!=null&&Xr(f):Vt(o,u,f))}function Mt(o){j.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Mt,j);var ym=/^https?$/i,Em=["POST","PUT"];e=Mt.prototype,e.Fa=function(o){this.H=o},e.ea=function(o,u,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Zl.g(),this.g.onreadystatechange=g(h(this.Ca,this));try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(P){Ec(this,P);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var C in m)f.set(C,m[C]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const P of m.keys())f.set(P,m.get(P));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(P=>P.toLowerCase()=="content-type"),C=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(Em,u,void 0)>=0)||m||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,z]of f)this.g.setRequestHeader(P,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(P){Ec(this,P)}};function Ec(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.o=5,vc(o),ii(o)}function vc(o){o.A||(o.A=!0,U(o,"complete"),U(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,U(this,"complete"),U(this,"abort"),ii(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ii(this,!0)),Mt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Tc(this):this.Xa())},e.Xa=function(){Tc(this)};function Tc(o){if(o.h&&typeof i<"u"){if(o.v&&En(o)==4)setTimeout(o.Ca.bind(o),0);else if(U(o,"readystatechange"),En(o)==4){o.h=!1;try{const P=o.ca();t:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var f;if(!(f=u)){var m;if(m=P===0){let z=String(o.D).match(uc)[1]||null;!z&&a.self&&a.self.location&&(z=a.self.location.protocol.slice(0,-1)),m=!ym.test(z?z.toLowerCase():"")}f=m}if(f)U(o,"complete"),U(o,"success");else{o.o=6;try{var C=En(o)>2?o.g.statusText:""}catch{C=""}o.l=C+" ["+o.ca()+"]",vc(o)}}finally{ii(o)}}}}function ii(o,u){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const f=o.g;o.g=null,u||U(o,"ready");try{f.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function En(o){return o.g?o.g.readyState:0}e.ca=function(){try{return En(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),ie(u)}};function wc(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function vm(o){const u={};o=(o.g&&En(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(v(o[m]))continue;var f=sm(o[m]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const P=u[C]||[];u[C]=P,P.push(f)}Ue(u,function(m){return m.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function is(o,u,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||u}function Ic(o){this.za=0,this.i=[],this.j=new Qr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=is("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=is("baseRetryDelayMs",5e3,o),this.Za=is("retryDelaySeedMs",1e4,o),this.Ta=is("forwardChannelMaxRetries",2,o),this.va=is("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new ic(o&&o.concurrentRequestLimit),this.Ba=new _m,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=Ic.prototype,e.ka=8,e.I=1,e.connect=function(o,u,f,m){de(0),this.W=o,this.H=u||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.J=xc(this,null,this.W),ai(this)};function zo(o){if(Ac(o),o.I==3){var u=o.V++,f=Be(o.J);if(Vt(f,"SID",o.M),Vt(f,"RID",u),Vt(f,"TYPE","terminate"),os(o,f),u=new gn(o,o.j,u),u.M=2,u.A=ri(Be(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(u.A.toString(),"")}catch{}!f&&a.Image&&(new Image().src=u.A,f=!0),f||(u.g=Nc(u.j,null),u.g.ea(u.A)),u.F=Date.now(),ni(u)}Dc(o)}function oi(o){o.g&&(Wo(o),o.g.cancel(),o.g=null)}function Ac(o){oi(o),o.v&&(a.clearTimeout(o.v),o.v=null),li(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function ai(o){if(!oc(o.h)&&!o.m){o.m=!0;var u=o.Ea;lt||y(),ft||(lt(),ft=!0),I.add(u,o),o.D=0}}function Tm(o,u){return ac(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=u.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=Gr(h(o.Ea,o,u),Vc(o,o.D)),o.D++,!0)}e.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const C=new gn(this,this.j,o);let P=this.o;if(this.U&&(P?(P=we(P),tn(P,this.U)):P=this.U),this.u!==null||this.R||(C.J=P,P=null),this.S)t:{for(var u=0,f=0;f<this.i.length;f++){e:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break e}m=void 0}if(m===void 0)break;if(u+=m,u>4096){u=f;break t}if(u===4096||f===this.i.length-1){u=f+1;break t}}u=1e3}else u=1e3;u=Sc(this,C,u),f=Be(this.J),Vt(f,"RID",o),Vt(f,"CVER",22),this.G&&Vt(f,"X-HTTP-Session-Id",this.G),os(this,f),P&&(this.R?u="headers="+Xr(yc(P))+"&"+u:this.u&&Ho(f,this.u,P)),jo(this.h,C),this.Ra&&Vt(f,"TYPE","init"),this.S?(Vt(f,"$req",u),Vt(f,"SID","null"),C.U=!0,Lo(C,f,null)):Lo(C,f,u),this.I=2}}else this.I==3&&(o?bc(this,o):this.i.length==0||oc(this.h)||bc(this))};function bc(o,u){var f;u?f=u.l:f=o.V++;const m=Be(o.J);Vt(m,"SID",o.M),Vt(m,"RID",f),Vt(m,"AID",o.K),os(o,m),o.u&&o.o&&Ho(m,o.u,o.o),f=new gn(o,o.j,f,o.D+1),o.u===null&&(f.J=o.o),u&&(o.i=u.G.concat(o.i)),u=Sc(o,f,1e3),f.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),jo(o.h,f),Lo(f,m,u)}function os(o,u){o.H&&ye(o.H,function(f,m){Vt(u,m,f)}),o.l&&ye({},function(f,m){Vt(u,m,f)})}function Sc(o,u,f){f=Math.min(o.i.length,f);const m=o.l?h(o.l.Ka,o.l,o):null;t:{var C=o.i;let ut=-1;for(;;){const qt=["count="+f];ut==-1?f>0?(ut=C[0].g,qt.push("ofs="+ut)):ut=0:qt.push("ofs="+ut);let Rt=!0;for(let Qt=0;Qt<f;Qt++){var P=C[Qt].g;const je=C[Qt].map;if(P-=ut,P<0)ut=Math.max(0,C[Qt].g-100),Rt=!1;else try{P="req"+P+"_"||"";try{var z=je instanceof Map?je:Object.entries(je);for(const[Kn,vn]of z){let Tn=vn;l(vn)&&(Tn=yt(vn)),qt.push(P+Kn+"="+encodeURIComponent(Tn))}}catch(Kn){throw qt.push(P+"type="+encodeURIComponent("_badmap")),Kn}}catch{m&&m(je)}}if(Rt){z=qt.join("&");break t}}z=void 0}return o=o.i.splice(0,f),u.G=o,z}function Rc(o){if(!o.g&&!o.v){o.Y=1;var u=o.Da;lt||y(),ft||(lt(),ft=!0),I.add(u,o),o.A=0}}function Ko(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=Gr(h(o.Da,o),Vc(o,o.A)),o.A++,!0)}e.Da=function(){if(this.v=null,Cc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=Gr(h(this.Wa,this),o)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,de(10),oi(this),Cc(this))};function Wo(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Cc(o){o.g=new gn(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var u=Be(o.na);Vt(u,"RID","rpc"),Vt(u,"SID",o.M),Vt(u,"AID",o.K),Vt(u,"CI",o.F?"0":"1"),!o.F&&o.ia&&Vt(u,"TO",o.ia),Vt(u,"TYPE","xmlhttp"),os(o,u),o.u&&o.o&&Ho(u,o.u,o.o),o.O&&(o.g.H=o.O);var f=o.g;o=o.ba,f.M=1,f.A=ri(Be(u)),f.u=null,f.R=!0,nc(f,o)}e.Va=function(){this.C!=null&&(this.C=null,oi(this),Ko(this),de(19))};function li(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Pc(o,u){var f=null;if(o.g==u){li(o),Wo(o),o.g=null;var m=2}else if(Bo(o.h,u))f=u.G,lc(o.h,u),m=1;else return;if(o.I!=0){if(u.o)if(m==1){f=u.u?u.u.length:0,u=Date.now()-u.F;var C=o.D;m=$n(),U(m,new Yl(m,f)),ai(o)}else Rc(o);else if(C=u.m,C==3||C==0&&u.X>0||!(m==1&&Tm(o,u)||m==2&&Ko(o)))switch(f&&f.length>0&&(u=o.h,u.i=u.i.concat(f)),C){case 1:zn(o,5);break;case 4:zn(o,10);break;case 3:zn(o,6);break;default:zn(o,2)}}}function Vc(o,u){let f=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(f*=2),f*u}function zn(o,u){if(o.j.info("Error code "+u),u==2){var f=h(o.bb,o),m=o.Ua;const C=!m;m=new _n(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Jr(m,"https"),ri(m),C?mm(m.toString(),f):gm(m.toString(),f)}else de(2);o.I=0,o.l&&o.l.pa(u),Dc(o),Ac(o)}e.bb=function(o){o?(this.j.info("Successfully pinged google.com"),de(2)):(this.j.info("Failed to ping google.com"),de(1))};function Dc(o){if(o.I=0,o.ja=[],o.l){const u=cc(o.h);(u.length!=0||o.i.length!=0)&&(V(o.ja,u),V(o.ja,o.i),o.h.i.length=0,E(o.i),o.i.length=0),o.l.oa()}}function xc(o,u,f){var m=f instanceof _n?Be(f):new _n(f);if(m.g!="")u&&(m.g=u+"."+m.g),Zr(m,m.u);else{var C=a.location;m=C.protocol,u=u?u+"."+C.hostname:C.hostname,C=+C.port;const P=new _n(null);m&&Jr(P,m),u&&(P.g=u),C&&Zr(P,C),f&&(P.h=f),m=P}return f=o.G,u=o.wa,f&&u&&Vt(m,f,u),Vt(m,"VER",o.ka),os(o,m),m}function Nc(o,u,f){if(u&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Aa&&!o.ma?new Mt(new qo({ab:f})):new Mt(o.ma),u.Fa(o.L),u}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Oc(){}e=Oc.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function ci(){}ci.prototype.g=function(o,u){return new be(o,u)};function be(o,u){j.call(this),this.g=new Ic(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.sa&&(o?o["X-WebChannel-Client-Profile"]=u.sa:o={"X-WebChannel-Client-Profile":u.sa}),this.g.U=o,(o=u&&u.Qb)&&!v(o)&&(this.g.u=o),this.A=u&&u.supportsCrossDomainXhr||!1,this.v=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!v(u)&&(this.g.G=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new fr(this)}p(be,j),be.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},be.prototype.close=function(){zo(this.g)},be.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.v&&(f={},f.__data__=yt(o),o=f);u.i.push(new am(u.Ya++,o)),u.I==3&&ai(u)},be.prototype.N=function(){this.g.l=null,delete this.j,zo(this.g),delete this.g,be.Z.N.call(this)};function Mc(o){cr.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const f in u){o=f;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}p(Mc,cr);function kc(){Zt.call(this),this.status=1}p(kc,Zt);function fr(o){this.g=o}p(fr,Oc),fr.prototype.ra=function(){U(this.g,"a")},fr.prototype.qa=function(o){U(this.g,new Mc(o))},fr.prototype.pa=function(o){U(this.g,new kc)},fr.prototype.oa=function(){U(this.g,"b")},ci.prototype.createWebChannel=ci.prototype.g,be.prototype.send=be.prototype.o,be.prototype.open=be.prototype.m,be.prototype.close=be.prototype.close,Pd=function(){return new ci},Cd=function(){return $n()},Rd=Gt,La={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ei.NO_ERROR=0,ei.TIMEOUT=8,ei.HTTP_ERROR=6,Ri=ei,Jl.COMPLETE="complete",Sd=Jl,Ae.EventType=Ne,Ne.OPEN="a",Ne.CLOSE="b",Ne.ERROR="c",Ne.MESSAGE="d",j.prototype.listen=j.prototype.J,fs=Ae,Mt.prototype.listenOnce=Mt.prototype.K,Mt.prototype.getLastError=Mt.prototype.Ha,Mt.prototype.getLastErrorCode=Mt.prototype.ya,Mt.prototype.getStatus=Mt.prototype.ca,Mt.prototype.getResponseJson=Mt.prototype.La,Mt.prototype.getResponseText=Mt.prototype.la,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Fa,bd=Mt}).apply(typeof gi<"u"?gi:typeof self<"u"?self:typeof window<"u"?window:{});const qu="@firebase/firestore",Hu="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}le.UNAUTHENTICATED=new le(null),le.GOOGLE_CREDENTIALS=new le("google-credentials-uid"),le.FIRST_PARTY=new le("first-party-uid"),le.MOCK_USER=new le("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $r="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new yd("@firebase/firestore");function _r(){return nr.logLevel}function Y(e,...t){if(nr.logLevel<=_t.DEBUG){const n=t.map(Tl);nr.debug(`Firestore (${$r}): ${e}`,...n)}}function fn(e,...t){if(nr.logLevel<=_t.ERROR){const n=t.map(Tl);nr.error(`Firestore (${$r}): ${e}`,...n)}}function Or(e,...t){if(nr.logLevel<=_t.WARN){const n=t.map(Tl);nr.warn(`Firestore (${$r}): ${e}`,...n)}}function Tl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function st(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,Vd(e,r,n)}function Vd(e,t,n){let r=`FIRESTORE (${$r}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw fn(r),new Error(r)}function At(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||Vd(t,s,r)}function at(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends jr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class oT{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(le.UNAUTHENTICATED)))}shutdown(){}}class aT{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class lT{constructor(t){this.t=t,this.currentUser=le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){At(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Zn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Zn,t.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const c=i;t.enqueueRetryable((async()=>{await c.promise,await s(this.currentUser)}))},l=c=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((c=>l(c))),setTimeout((()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Zn)}}),0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(At(typeof r.accessToken=="string",31837,{l:r}),new Dd(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return At(t===null||typeof t=="string",2055,{h:t}),new le(t)}}class cT{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=le.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uT{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new cT(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(le.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class zu{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hT{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,zv(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){At(this.o===void 0,3512);const r=i=>{i.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Y("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable((()=>r(i)))};const s=i=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new zu(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(At(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zu(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=fT(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function dt(e,t){return e<t?-1:e>t?1:0}function Fa(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const s=e.charAt(r),i=t.charAt(r);if(s!==i)return fa(s)===fa(i)?dt(s,i):fa(s)?1:-1}return dt(e.length,t.length)}const dT=55296,pT=57343;function fa(e){const t=e.charCodeAt(0);return t>=dT&&t<=pT}function Mr(e,t,n){return e.length===t.length&&e.every(((r,s)=>n(r,t[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ku="__name__";class He{constructor(t,n,r){n===void 0?n=0:n>t.length&&st(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&st(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return He.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof He?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=He.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return dt(t.length,n.length)}static compareSegments(t,n){const r=He.isNumericId(t),s=He.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?He.extractNumericId(t).compare(He.extractNumericId(n)):Fa(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Vn.fromString(t.substring(4,t.length-2))}}class Dt extends He{construct(t,n,r){return new Dt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Dt(n)}static emptyPath(){return new Dt([])}}const mT=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ne extends He{construct(t,n,r){return new ne(t,n,r)}static isValidIdentifier(t){return mT.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ne.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ku}static keyField(){return new ne([Ku])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(F.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new Z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new ne(n)}static emptyPath(){return new ne([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(t){this.path=t}static fromPath(t){return new et(Dt.fromString(t))}static fromName(t){return new et(Dt.fromString(t).popFirst(5))}static empty(){return new et(Dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Dt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Dt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new et(new Dt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(e,t,n){if(!n)throw new Z(F.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function gT(e,t,n,r){if(t===!0&&r===!0)throw new Z(F.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Wu(e){if(!et.isDocumentKey(e))throw new Z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Gu(e){if(et.isDocumentKey(e))throw new Z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Nd(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function Il(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":st(12329,{type:typeof e})}function Ss(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Il(e);throw new Z(F.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(e,t){const n={typeString:e};return t&&(n.value=t),n}function Xs(e,t){if(!Nd(e))throw new Z(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Z(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=-62135596800,Xu=1e6;class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(t){return xt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Xu);return new xt(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Qu)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Xu}_compareTo(t){return this.seconds===t.seconds?dt(this.nanoseconds,t.nanoseconds):dt(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:xt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Xs(t,xt._jsonSchema))return new xt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Qu;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}xt._jsonSchemaVersion="firestore/timestamp/1.0",xt._jsonSchema={type:$t("string",xt._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{static fromTimestamp(t){return new it(t)}static min(){return new it(new xt(0,0))}static max(){return new it(new xt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=-1;function _T(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=it.fromTimestamp(r===1e9?new xt(n+1,0):new xt(n,r));return new Mn(s,et.empty(),t)}function yT(e){return new Mn(e.readTime,e.key,$s)}class Mn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Mn(it.min(),et.empty(),$s)}static max(){return new Mn(it.max(),et.empty(),$s)}}function ET(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=et.comparator(e.documentKey,t.documentKey),n!==0?n:dt(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qr(e){if(e.code!==F.FAILED_PRECONDITION||e.message!==vT)throw e;Y("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&st(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new M(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):M.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):M.reject(n)}static resolve(t){return new M(((n,r)=>{n(t)}))}static reject(t){return new M(((n,r)=>{r(t)}))}static waitFor(t){return new M(((n,r)=>{let s=0,i=0,a=!1;t.forEach((l=>{++s,l.next((()=>{++i,a&&i===s&&n()}),(c=>r(c)))})),a=!0,i===s&&n()}))}static or(t){let n=M.resolve(!1);for(const r of t)n=n.next((s=>s?M.resolve(s):r()));return n}static forEach(t,n){const r=[];return t.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(t,n){return new M(((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const h=c;n(t[h]).next((d=>{a[h]=d,++l,l===i&&r(a)}),(d=>s(d)))}}))}static doWhile(t,n){return new M(((r,s)=>{const i=()=>{t()===!0?n().next((()=>{i()}),s):r()};i()}))}}function wT(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}To.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Al=-1;function wo(e){return e==null}function Wi(e){return e===0&&1/e==-1/0}function IT(e){return typeof e=="number"&&Number.isInteger(e)&&!Wi(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Od="";function AT(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Yu(t)),t=bT(e.get(n),t);return Yu(t)}function bT(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case Od:n+="";break;default:n+=i}}return n}function Yu(e){return e+Od+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ir(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Md(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(t,n){this.comparator=t,this.root=n||te.EMPTY}insert(t,n){return new Ot(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,te.BLACK,null,null))}remove(t){return new Ot(this.comparator,this.root.remove(t,this.comparator).copy(null,null,te.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new _i(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new _i(this.root,t,this.comparator,!1)}getReverseIterator(){return new _i(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new _i(this.root,t,this.comparator,!0)}}class _i{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class te{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??te.RED,this.left=s??te.EMPTY,this.right=i??te.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new te(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return te.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return te.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,te.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,te.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw st(43730,{key:this.key,value:this.value});if(this.right.isRed())throw st(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw st(27949);return t+(this.isRed()?0:1)}}te.EMPTY=null,te.RED=!0,te.BLACK=!1;te.EMPTY=new class{constructor(){this.size=0}get key(){throw st(57766)}get value(){throw st(16141)}get color(){throw st(16727)}get left(){throw st(29726)}get right(){throw st(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new te(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t){this.comparator=t,this.data=new Ot(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Zu(this.data.getIterator())}getIteratorFrom(t){return new Zu(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof Wt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Wt(this.comparator);return n.data=t,n}}class Zu{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(t){this.fields=t,t.sort(ne.comparator)}static empty(){return new ke([])}unionWith(t){let n=new Wt(ne.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new ke(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Mr(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new kd("Invalid base64 string: "+i):i}})(t);return new re(n)}static fromUint8Array(t){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(t);return new re(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return dt(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}re.EMPTY_BYTE_STRING=new re("");const ST=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kn(e){if(At(!!e,39018),typeof e=="string"){let t=0;const n=ST.exec(e);if(At(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:kt(e.seconds),nanos:kt(e.nanos)}}function kt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Ln(e){return typeof e=="string"?re.fromBase64String(e):re.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld="server_timestamp",Fd="__type__",Ud="__previous_value__",Bd="__local_write_time__";function bl(e){return(e?.mapValue?.fields||{})[Fd]?.stringValue===Ld}function Io(e){const t=e.mapValue.fields[Ud];return bl(t)?Io(t):t}function qs(e){const t=kn(e.mapValue.fields[Bd].timestampValue);return new xt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(t,n,r,s,i,a,l,c,h,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h,this.isUsingEmulator=d}}const Gi="(default)";class Hs{constructor(t,n){this.projectId=t,this.database=n||Gi}static empty(){return new Hs("","")}get isDefaultDatabase(){return this.database===Gi}isEqual(t){return t instanceof Hs&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jd="__type__",CT="__max__",yi={mapValue:{}},$d="__vector__",Qi="value";function Fn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bl(e)?4:VT(e)?9007199254740991:PT(e)?10:11:st(28295,{value:e})}function Je(e,t){if(e===t)return!0;const n=Fn(e);if(n!==Fn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return qs(e).isEqual(qs(t));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=kn(s.timestampValue),l=kn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(s,i){return Ln(s.bytesValue).isEqual(Ln(i.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(s,i){return kt(s.geoPointValue.latitude)===kt(i.geoPointValue.latitude)&&kt(s.geoPointValue.longitude)===kt(i.geoPointValue.longitude)})(e,t);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return kt(s.integerValue)===kt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=kt(s.doubleValue),l=kt(i.doubleValue);return a===l?Wi(a)===Wi(l):isNaN(a)&&isNaN(l)}return!1})(e,t);case 9:return Mr(e.arrayValue.values||[],t.arrayValue.values||[],Je);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Ju(a)!==Ju(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Je(a[c],l[c])))return!1;return!0})(e,t);default:return st(52216,{left:e})}}function zs(e,t){return(e.values||[]).find((n=>Je(n,t)))!==void 0}function kr(e,t){if(e===t)return 0;const n=Fn(e),r=Fn(t);if(n!==r)return dt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return dt(e.booleanValue,t.booleanValue);case 2:return(function(i,a){const l=kt(i.integerValue||i.doubleValue),c=kt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1})(e,t);case 3:return th(e.timestampValue,t.timestampValue);case 4:return th(qs(e),qs(t));case 5:return Fa(e.stringValue,t.stringValue);case 6:return(function(i,a){const l=Ln(i),c=Ln(a);return l.compareTo(c)})(e.bytesValue,t.bytesValue);case 7:return(function(i,a){const l=i.split("/"),c=a.split("/");for(let h=0;h<l.length&&h<c.length;h++){const d=dt(l[h],c[h]);if(d!==0)return d}return dt(l.length,c.length)})(e.referenceValue,t.referenceValue);case 8:return(function(i,a){const l=dt(kt(i.latitude),kt(a.latitude));return l!==0?l:dt(kt(i.longitude),kt(a.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return eh(e.arrayValue,t.arrayValue);case 10:return(function(i,a){const l=i.fields||{},c=a.fields||{},h=l[Qi]?.arrayValue,d=c[Qi]?.arrayValue,p=dt(h?.values?.length||0,d?.values?.length||0);return p!==0?p:eh(h,d)})(e.mapValue,t.mapValue);case 11:return(function(i,a){if(i===yi.mapValue&&a===yi.mapValue)return 0;if(i===yi.mapValue)return 1;if(a===yi.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),h=a.fields||{},d=Object.keys(h);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const g=Fa(c[p],d[p]);if(g!==0)return g;const E=kr(l[c[p]],h[d[p]]);if(E!==0)return E}return dt(c.length,d.length)})(e.mapValue,t.mapValue);default:throw st(23264,{he:n})}}function th(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return dt(e,t);const n=kn(e),r=kn(t),s=dt(n.seconds,r.seconds);return s!==0?s:dt(n.nanos,r.nanos)}function eh(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=kr(n[s],r[s]);if(i)return i}return dt(n.length,r.length)}function Lr(e){return Ua(e)}function Ua(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=kn(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Ln(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return et.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ua(i);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Ua(n.fields[a])}`;return s+"}"})(e.mapValue):st(61005,{value:e})}function Ci(e){switch(Fn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Io(e);return t?16+Ci(t):16;case 5:return 2*e.stringValue.length;case 6:return Ln(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+Ci(i)),0)})(e.arrayValue);case 10:case 11:return(function(r){let s=0;return ir(r.fields,((i,a)=>{s+=i.length+Ci(a)})),s})(e.mapValue);default:throw st(13486,{value:e})}}function Ba(e){return!!e&&"integerValue"in e}function Sl(e){return!!e&&"arrayValue"in e}function nh(e){return!!e&&"nullValue"in e}function rh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Pi(e){return!!e&&"mapValue"in e}function PT(e){return(e?.mapValue?.fields||{})[jd]?.stringValue===$d}function Rs(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return ir(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=Rs(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Rs(e.arrayValue.values[n]);return t}return{...e}}function VT(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===CT}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(t){this.value=t}static empty(){return new Ce({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Pi(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Rs(n)}setAll(t){let n=ne.emptyPath(),r={},s=[];t.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=Rs(a):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Pi(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Je(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Pi(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){ir(n,((s,i)=>t[s]=i));for(const s of r)delete t[s]}clone(){return new Ce(Rs(this.value))}}function qd(e){const t=[];return ir(e.fields,((n,r)=>{const s=new ne([n]);if(Pi(r)){const i=qd(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)})),new ke(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ue(t,0,it.min(),it.min(),it.min(),Ce.empty(),0)}static newFoundDocument(t,n,r,s){return new ue(t,1,n,it.min(),r,s,0)}static newNoDocument(t,n){return new ue(t,2,n,it.min(),it.min(),Ce.empty(),0)}static newUnknownDocument(t,n){return new ue(t,3,n,it.min(),it.min(),Ce.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ce.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ce.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ue&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ue(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(t,n){this.position=t,this.inclusive=n}}function sh(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=et.comparator(et.fromName(a.referenceValue),n.key):r=kr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function ih(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Je(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t,n="asc"){this.field=t,this.dir=n}}function DT(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hd{}class Kt extends Hd{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new NT(t,n,r):n==="array-contains"?new kT(t,r):n==="in"?new LT(t,r):n==="not-in"?new FT(t,r):n==="array-contains-any"?new UT(t,r):new Kt(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new OT(t,r):new MT(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(kr(n,this.value)):n!==null&&Fn(this.value)===Fn(n)&&this.matchesComparison(kr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return st(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Ze extends Hd{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new Ze(t,n)}matches(t){return zd(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function zd(e){return e.op==="and"}function Kd(e){return xT(e)&&zd(e)}function xT(e){for(const t of e.filters)if(t instanceof Ze)return!1;return!0}function ja(e){if(e instanceof Kt)return e.field.canonicalString()+e.op.toString()+Lr(e.value);if(Kd(e))return e.filters.map((t=>ja(t))).join(",");{const t=e.filters.map((n=>ja(n))).join(",");return`${e.op}(${t})`}}function Wd(e,t){return e instanceof Kt?(function(r,s){return s instanceof Kt&&r.op===s.op&&r.field.isEqual(s.field)&&Je(r.value,s.value)})(e,t):e instanceof Ze?(function(r,s){return s instanceof Ze&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,l)=>i&&Wd(a,s.filters[l])),!0):!1})(e,t):void st(19439)}function Gd(e){return e instanceof Kt?(function(n){return`${n.field.canonicalString()} ${n.op} ${Lr(n.value)}`})(e):e instanceof Ze?(function(n){return n.op.toString()+" {"+n.getFilters().map(Gd).join(" ,")+"}"})(e):"Filter"}class NT extends Kt{constructor(t,n,r){super(t,n,r),this.key=et.fromName(r.referenceValue)}matches(t){const n=et.comparator(t.key,this.key);return this.matchesComparison(n)}}class OT extends Kt{constructor(t,n){super(t,"in",n),this.keys=Qd("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class MT extends Kt{constructor(t,n){super(t,"not-in",n),this.keys=Qd("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function Qd(e,t){return(t.arrayValue?.values||[]).map((n=>et.fromName(n.referenceValue)))}class kT extends Kt{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Sl(n)&&zs(n.arrayValue,this.value)}}class LT extends Kt{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&zs(this.value.arrayValue,n)}}class FT extends Kt{constructor(t,n){super(t,"not-in",n)}matches(t){if(zs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zs(this.value.arrayValue,n)}}class UT extends Kt{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Sl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>zs(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function oh(e,t=null,n=[],r=[],s=null,i=null,a=null){return new BT(e,t,n,r,s,i,a)}function Rl(e){const t=at(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>ja(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),wo(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Lr(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Lr(r))).join(",")),t.Te=n}return t.Te}function Cl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!DT(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Wd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ih(e.startAt,t.startAt)&&ih(e.endAt,t.endAt)}function $a(e){return et.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function jT(e,t,n,r,s,i,a,l){return new Ao(e,t,n,r,s,i,a,l)}function Pl(e){return new Ao(e)}function ah(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function $T(e){return e.collectionGroup!==null}function Cs(e){const t=at(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Wt(ne.comparator);return a.filters.forEach((c=>{c.getFlattenedFilters().forEach((h=>{h.isInequality()&&(l=l.add(h.field))}))})),l})(t).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new Yi(i,r))})),n.has(ne.keyField().canonicalString())||t.Ie.push(new Yi(ne.keyField(),r))}return t.Ie}function We(e){const t=at(e);return t.Ee||(t.Ee=qT(t,Cs(e))),t.Ee}function qT(e,t){if(e.limitType==="F")return oh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new Yi(s.field,i)}));const n=e.endAt?new Xi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Xi(e.startAt.position,e.startAt.inclusive):null;return oh(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function qa(e,t,n){return new Ao(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function bo(e,t){return Cl(We(e),We(t))&&e.limitType===t.limitType}function Xd(e){return`${Rl(We(e))}|lt:${e.limitType}`}function yr(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>Gd(s))).join(", ")}]`),wo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Lr(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Lr(s))).join(",")),`Target(${r})`})(We(e))}; limitType=${e.limitType})`}function So(e,t){return t.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):et.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(e,t)&&(function(r,s){for(const i of Cs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(e,t)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(e,t)&&(function(r,s){return!(r.startAt&&!(function(a,l,c){const h=sh(a,l,c);return a.inclusive?h<=0:h<0})(r.startAt,Cs(r),s)||r.endAt&&!(function(a,l,c){const h=sh(a,l,c);return a.inclusive?h>=0:h>0})(r.endAt,Cs(r),s))})(e,t)}function HT(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Yd(e){return(t,n)=>{let r=!1;for(const s of Cs(e)){const i=zT(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function zT(e,t,n){const r=e.field.isKeyField()?et.comparator(t.key,n.key):(function(i,a,l){const c=a.data.field(i),h=l.data.field(i);return c!==null&&h!==null?kr(c,h):st(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return st(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){ir(this.inner,((n,r)=>{for(const[s,i]of r)t(s,i)}))}isEmpty(){return Md(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT=new Ot(et.comparator);function dn(){return KT}const Jd=new Ot(et.comparator);function ds(...e){let t=Jd;for(const n of e)t=t.insert(n.key,n);return t}function Zd(e){let t=Jd;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function Yn(){return Ps()}function tp(){return Ps()}function Ps(){return new or((e=>e.toString()),((e,t)=>e.isEqual(t)))}const WT=new Ot(et.comparator),GT=new Wt(et.comparator);function pt(...e){let t=GT;for(const n of e)t=t.add(n);return t}const QT=new Wt(dt);function XT(){return QT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wi(t)?"-0":t}}function ep(e){return{integerValue:""+e}}function YT(e,t){return IT(t)?ep(t):Vl(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(){this._=void 0}}function JT(e,t,n){return e instanceof Ji?(function(s,i){const a={fields:{[Fd]:{stringValue:Ld},[Bd]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&bl(i)&&(i=Io(i)),i&&(a.fields[Ud]=i),{mapValue:a}})(n,t):e instanceof Ks?rp(e,t):e instanceof Ws?sp(e,t):(function(s,i){const a=np(s,i),l=lh(a)+lh(s.Ae);return Ba(a)&&Ba(s.Ae)?ep(l):Vl(s.serializer,l)})(e,t)}function ZT(e,t,n){return e instanceof Ks?rp(e,t):e instanceof Ws?sp(e,t):n}function np(e,t){return e instanceof Zi?(function(r){return Ba(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(t)?t:{integerValue:0}:null}class Ji extends Ro{}class Ks extends Ro{constructor(t){super(),this.elements=t}}function rp(e,t){const n=ip(t);for(const r of e.elements)n.some((s=>Je(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Ws extends Ro{constructor(t){super(),this.elements=t}}function sp(e,t){let n=ip(t);for(const r of e.elements)n=n.filter((s=>!Je(s,r)));return{arrayValue:{values:n}}}class Zi extends Ro{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function lh(e){return kt(e.integerValue||e.doubleValue)}function ip(e){return Sl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function tw(e,t){return e.field.isEqual(t.field)&&(function(r,s){return r instanceof Ks&&s instanceof Ks||r instanceof Ws&&s instanceof Ws?Mr(r.elements,s.elements,Je):r instanceof Zi&&s instanceof Zi?Je(r.Ae,s.Ae):r instanceof Ji&&s instanceof Ji})(e.transform,t.transform)}class ew{constructor(t,n){this.version=t,this.transformResults=n}}class ln{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new ln}static exists(t){return new ln(void 0,t)}static updateTime(t){return new ln(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Vi(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class Co{}function op(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new lp(e.key,ln.none()):new Ys(e.key,e.data,ln.none());{const n=e.data,r=Ce.empty();let s=new Wt(ne.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new ar(e.key,r,new ke(s.toArray()),ln.none())}}function nw(e,t,n){e instanceof Ys?(function(s,i,a){const l=s.value.clone(),c=uh(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(e,t,n):e instanceof ar?(function(s,i,a){if(!Vi(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=uh(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(ap(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()})(e,t,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,n)}function Vs(e,t,n,r){return e instanceof Ys?(function(i,a,l,c){if(!Vi(i.precondition,a))return l;const h=i.value.clone(),d=hh(i.fieldTransforms,c,a);return h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),null})(e,t,n,r):e instanceof ar?(function(i,a,l,c){if(!Vi(i.precondition,a))return l;const h=hh(i.fieldTransforms,c,a),d=a.data;return d.setAll(ap(i)),d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((p=>p.field)))})(e,t,n,r):(function(i,a,l){return Vi(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(e,t,n)}function rw(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=np(r.transform,s||null);i!=null&&(n===null&&(n=Ce.empty()),n.set(r.field,i))}return n||null}function ch(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Mr(r,s,((i,a)=>tw(i,a)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ys extends Co{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ar extends Co{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ap(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function uh(e,t,n){const r=new Map;At(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,ZT(a,l,n[s]))}return r}function hh(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,JT(i,a,t))}return r}class lp extends Co{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sw extends Co{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&nw(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Vs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Vs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=tp();return this.mutations.forEach((s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=op(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(it.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),pt())}isEqual(t){return this.batchId===t.batchId&&Mr(this.mutations,t.mutations,((n,r)=>ch(n,r)))&&Mr(this.baseMutations,t.baseMutations,((n,r)=>ch(n,r)))}}class Dl{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){At(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let s=(function(){return WT})();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Dl(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bt,gt;function lw(e){switch(e){case F.OK:return st(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return st(15467,{code:e})}}function cp(e){if(e===void 0)return fn("GRPC error has no .code"),F.UNKNOWN;switch(e){case Bt.OK:return F.OK;case Bt.CANCELLED:return F.CANCELLED;case Bt.UNKNOWN:return F.UNKNOWN;case Bt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Bt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Bt.INTERNAL:return F.INTERNAL;case Bt.UNAVAILABLE:return F.UNAVAILABLE;case Bt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Bt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Bt.NOT_FOUND:return F.NOT_FOUND;case Bt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Bt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Bt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Bt.ABORTED:return F.ABORTED;case Bt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Bt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Bt.DATA_LOSS:return F.DATA_LOSS;default:return st(39323,{code:e})}}(gt=Bt||(Bt={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new Vn([4294967295,4294967295],0);function fh(e){const t=cw().encode(e),n=new Ad;return n.update(t),new Uint8Array(n.digest())}function dh(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Vn([n,r],0),new Vn([s,i],0)]}class xl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ps(`Invalid padding: ${n}`);if(r<0)throw new ps(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ps(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new ps(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Vn.fromNumber(this.ge)}ye(t,n,r){let s=t.add(n.multiply(Vn.fromNumber(r)));return s.compare(uw)===1&&(s=new Vn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=fh(t),[r,s]=dh(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new xl(i,s,n);return r.forEach((l=>a.insert(l))),a}insert(t){if(this.ge===0)return;const n=fh(t),[r,s]=dh(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class ps extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Js.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new Po(it.min(),s,new Ot(dt),dn(),pt())}}class Js{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Js(r,n,pt(),pt(),pt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t,n,r,s){this.be=t,this.removedTargetIds=n,this.key=r,this.De=s}}class up{constructor(t,n){this.targetId=t,this.Ce=n}}class hp{constructor(t,n,r=re.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ph{constructor(){this.ve=0,this.Fe=mh(),this.Me=re.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=pt(),n=pt(),r=pt();return this.Fe.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:st(38017,{changeType:i})}})),new Js(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=mh()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,At(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class hw{constructor(t){this.Ge=t,this.ze=new Map,this.je=dn(),this.Je=Ei(),this.He=Ei(),this.Ye=new Ot(dt)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:st(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(t){const n=t.targetId,r=t.Ce.count,s=this.ot(n);if(s){const i=s.target;if($a(i))if(r===0){const a=new et(i.path);this.et(n,a,ue.newNoDocument(a,it.min()))}else At(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(t),c=l?this.ct(l,t,a):1;if(c!==0){this.it(n);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,h)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Ln(r).toUint8Array()}catch(c){if(c instanceof kd)return Or("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new xl(a,s,i)}catch(c){return Or(c instanceof ps?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.et(n,i,null),s++)})),s}Tt(t){const n=new Map;this.ze.forEach(((i,a)=>{const l=this.ot(a);if(l){if(i.current&&$a(l.target)){const c=new et(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,ue.newNoDocument(c,t))}i.Be&&(n.set(a,i.ke()),i.qe())}}));let r=pt();this.He.forEach(((i,a)=>{let l=!0;a.forEachWhile((c=>{const h=this.ot(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(t)));const s=new Po(t,n,this.Ye,this.je,r);return this.je=dn(),this.Je=Ei(),this.He=Ei(),this.Ye=new Ot(dt),s}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new ph,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Wt(dt),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Wt(dt),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||Y("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new ph),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Ei(){return new Ot(et.comparator)}function mh(){return new Ot(et.comparator)}const fw={asc:"ASCENDING",desc:"DESCENDING"},dw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pw={and:"AND",or:"OR"};class mw{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Ha(e,t){return e.useProto3Json||wo(t)?t:{value:t}}function to(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function fp(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function gw(e,t){return to(e,t.toTimestamp())}function Ge(e){return At(!!e,49232),it.fromTimestamp((function(n){const r=kn(n);return new xt(r.seconds,r.nanos)})(e))}function Nl(e,t){return za(e,t).canonicalString()}function za(e,t){const n=(function(s){return new Dt(["projects",s.projectId,"databases",s.database])})(e).child("documents");return t===void 0?n:n.child(t)}function dp(e){const t=Dt.fromString(e);return At(yp(t),10190,{key:t.toString()}),t}function Ka(e,t){return Nl(e.databaseId,t.path)}function da(e,t){const n=dp(t);if(n.get(1)!==e.databaseId.projectId)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new et(mp(n))}function pp(e,t){return Nl(e.databaseId,t)}function _w(e){const t=dp(e);return t.length===4?Dt.emptyPath():mp(t)}function Wa(e){return new Dt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function mp(e){return At(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function gh(e,t,n){return{name:Ka(e,t),fields:n.value.mapValue.fields}}function yw(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:st(39313,{state:h})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=(function(h,d){return h.useProto3Json?(At(d===void 0||typeof d=="string",58123),re.fromBase64String(d||"")):(At(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),re.fromUint8Array(d||new Uint8Array))})(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&(function(h){const d=h.code===void 0?F.UNKNOWN:cp(h.code);return new Z(d,h.message||"")})(a);n=new hp(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=da(e,r.document.name),i=Ge(r.document.updateTime),a=r.document.createTime?Ge(r.document.createTime):it.min(),l=new Ce({mapValue:{fields:r.document.fields}}),c=ue.newFoundDocument(s,i,a,l),h=r.targetIds||[],d=r.removedTargetIds||[];n=new Di(h,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=da(e,r.document),i=r.readTime?Ge(r.readTime):it.min(),a=ue.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Di([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=da(e,r.document),i=r.removedTargetIds||[];n=new Di([],i,s,null)}else{if(!("filter"in t))return st(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new aw(s,i),l=r.targetId;n=new up(l,a)}}return n}function Ew(e,t){let n;if(t instanceof Ys)n={update:gh(e,t.key,t.value)};else if(t instanceof lp)n={delete:Ka(e,t.key)};else if(t instanceof ar)n={update:gh(e,t.key,t.data),updateMask:Cw(t.fieldMask)};else{if(!(t instanceof sw))return st(16599,{Vt:t.type});n={verify:Ka(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(i,a){const l=a.transform;if(l instanceof Ji)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ks)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ws)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Zi)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw st(20930,{transform:a.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:gw(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:st(27497)})(e,t.precondition)),n}function vw(e,t){return e&&e.length>0?(At(t!==void 0,14353),e.map((n=>(function(s,i){let a=s.updateTime?Ge(s.updateTime):Ge(i);return a.isEqual(it.min())&&(a=Ge(i)),new ew(a,s.transformResults||[])})(n,t)))):[]}function Tw(e,t){return{documents:[pp(e,t.path)]}}function ww(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=pp(e,s);const i=(function(h){if(h.length!==0)return _p(Ze.create(h,"and"))})(t.filters);i&&(n.structuredQuery.where=i);const a=(function(h){if(h.length!==0)return h.map((d=>(function(g){return{field:Er(g.field),direction:bw(g.dir)}})(d)))})(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Ha(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(t.endAt)),{ft:n,parent:s}}function Iw(e){let t=_w(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){At(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=(function(p){const g=gp(p);return g instanceof Ze&&Kd(g)?g.getFilters():[g]})(n.where));let a=[];n.orderBy&&(a=(function(p){return p.map((g=>(function(V){return new Yi(vr(V.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(g)))})(n.orderBy));let l=null;n.limit&&(l=(function(p){let g;return g=typeof p=="object"?p.value:p,wo(g)?null:g})(n.limit));let c=null;n.startAt&&(c=(function(p){const g=!!p.before,E=p.values||[];return new Xi(E,g)})(n.startAt));let h=null;return n.endAt&&(h=(function(p){const g=!p.before,E=p.values||[];return new Xi(E,g)})(n.endAt)),jT(t,s,a,i,l,"F",c,h)}function Aw(e,t){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return st(28987,{purpose:s})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function gp(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=vr(n.unaryFilter.field);return Kt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=vr(n.unaryFilter.field);return Kt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=vr(n.unaryFilter.field);return Kt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=vr(n.unaryFilter.field);return Kt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return st(61313);default:return st(60726)}})(e):e.fieldFilter!==void 0?(function(n){return Kt.create(vr(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return st(58110);default:return st(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return Ze.create(n.compositeFilter.filters.map((r=>gp(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return st(1026)}})(n.compositeFilter.op))})(e):st(30097,{filter:e})}function bw(e){return fw[e]}function Sw(e){return dw[e]}function Rw(e){return pw[e]}function Er(e){return{fieldPath:e.canonicalString()}}function vr(e){return ne.fromServerFormat(e.fieldPath)}function _p(e){return e instanceof Kt?(function(n){if(n.op==="=="){if(rh(n.value))return{unaryFilter:{field:Er(n.field),op:"IS_NAN"}};if(nh(n.value))return{unaryFilter:{field:Er(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(rh(n.value))return{unaryFilter:{field:Er(n.field),op:"IS_NOT_NAN"}};if(nh(n.value))return{unaryFilter:{field:Er(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Er(n.field),op:Sw(n.op),value:n.value}}})(e):e instanceof Ze?(function(n){const r=n.getFilters().map((s=>_p(s)));return r.length===1?r[0]:{compositeFilter:{op:Rw(n.op),filters:r}}})(e):st(54877,{filter:e})}function Cw(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function yp(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t,n,r,s,i=it.min(),a=it.min(),l=re.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new Sn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Sn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Sn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Sn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(t){this.yt=t}}function Vw(e){const t=Iw({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?qa(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(){this.Cn=new xw}addToCollectionParentIndex(t,n){return this.Cn.add(n),M.resolve()}getCollectionParents(t,n){return M.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return M.resolve()}deleteFieldIndex(t,n){return M.resolve()}deleteAllFieldIndexes(t){return M.resolve()}createTargetIndexes(t,n){return M.resolve()}getDocumentsMatchingTarget(t,n){return M.resolve(null)}getIndexType(t,n){return M.resolve(0)}getFieldIndexes(t,n){return M.resolve([])}getNextCollectionGroupToUpdate(t){return M.resolve(null)}getMinOffset(t,n){return M.resolve(Mn.min())}getMinOffsetFromCollectionGroup(t,n){return M.resolve(Mn.min())}updateCollectionGroup(t,n,r){return M.resolve()}updateIndexEntries(t,n){return M.resolve()}}class xw{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new Wt(Dt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new Wt(Dt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ep=41943040;class ve{static withCacheSize(t){return new ve(t,ve.DEFAULT_COLLECTION_PERCENTILE,ve.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ve.DEFAULT_COLLECTION_PERCENTILE=10,ve.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ve.DEFAULT=new ve(Ep,ve.DEFAULT_COLLECTION_PERCENTILE,ve.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ve.DISABLED=new ve(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new Fr(0)}static cr(){return new Fr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="LruGarbageCollector",Nw=1048576;function Eh([e,t],[n,r]){const s=dt(e,n);return s===0?dt(t,r):s}class Ow{constructor(t){this.Ir=t,this.buffer=new Wt(Eh),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Eh(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Mw{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){Y(yh,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hr(n)?Y(yh,"Ignoring IndexedDB error during garbage collection: ",n):await qr(n)}await this.Vr(3e5)}))}}class kw{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return M.resolve(To.ce);const r=new Ow(n);return this.mr.forEachTarget(t,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(t,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(Y("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(_h)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(Y("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_h):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,s,i,a,l,c,h;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(Y("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(t,s)))).next((p=>(r=p,l=Date.now(),this.removeTargets(t,r,n)))).next((p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(t,r)))).next((p=>(h=Date.now(),_r()<=_t.DEBUG&&Y("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(h-c)+`ms
Total Duration: ${h-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p}))))}}function Lw(e,t){return new kw(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(){this.changes=new or((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ue.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uw{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(t,n)))).next((s=>(r!==null&&Vs(r.mutation,s,ke.empty(),xt.now()),s)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,pt()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=pt()){const s=Yn();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,r).next((i=>{let a=ds();return i.forEach(((l,c)=>{a=a.insert(l,c.overlayedDocument)})),a}))))}getOverlayedDocuments(t,n){const r=Yn();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,pt())))}populateOverlays(t,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(t,s).next((i=>{i.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(t,n,r,s){let i=dn();const a=Ps(),l=(function(){return Ps()})();return n.forEach(((c,h)=>{const d=r.get(h.key);s.has(h.key)&&(d===void 0||d.mutation instanceof ar)?i=i.insert(h.key,h):d!==void 0?(a.set(h.key,d.mutation.getFieldMask()),Vs(d.mutation,h,d.mutation.getFieldMask(),xt.now())):a.set(h.key,ke.empty())})),this.recalculateAndSaveOverlays(t,i).next((c=>(c.forEach(((h,d)=>a.set(h,d))),n.forEach(((h,d)=>l.set(h,new Uw(d,a.get(h)??null)))),l)))}recalculateAndSaveOverlays(t,n){const r=Ps();let s=new Ot(((a,l)=>a-l)),i=pt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((a=>{for(const l of a)l.keys().forEach((c=>{const h=n.get(c);if(h===null)return;let d=r.get(c)||ke.empty();d=l.applyToLocalView(h,d),r.set(c,d);const p=(s.get(l.batchId)||pt()).add(c);s=s.insert(l.batchId,p)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,d=c.value,p=tp();d.forEach((g=>{if(!i.has(g)){const E=op(n.get(g),r.get(g));E!==null&&p.set(g,E),i=i.add(g)}})),a.push(this.documentOverlayCache.saveOverlays(t,h,p))}return M.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,s){return(function(a){return et.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):$T(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):M.resolve(Yn());let l=$s,c=i;return a.next((h=>M.forEach(h,((d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(t,d).next((g=>{c=c.insert(d,g)}))))).next((()=>this.populateOverlays(t,h,i))).next((()=>this.computeViews(t,c,h,pt()))).next((d=>({batchId:l,changes:Zd(d)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new et(n)).next((r=>{let s=ds();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=ds();return this.indexManager.getCollectionParents(t,i).next((l=>M.forEach(l,(c=>{const h=(function(p,g){return new Ao(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,h,r,s).next((d=>{d.forEach(((p,g)=>{a=a.insert(p,g)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s)))).next((a=>{i.forEach(((c,h)=>{const d=h.getKey();a.get(d)===null&&(a=a.insert(d,ue.newInvalidDocument(d)))}));let l=ds();return a.forEach(((c,h)=>{const d=i.get(c);d!==void 0&&Vs(d.mutation,h,ke.empty(),xt.now()),So(n,h)&&(l=l.insert(c,h))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return M.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Ge(s.createTime)}})(n)),M.resolve()}getNamedQuery(t,n){return M.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:Vw(s.bundledQuery),readTime:Ge(s.readTime)}})(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(){this.overlays=new Ot(et.comparator),this.qr=new Map}getOverlay(t,n){return M.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Yn();return M.forEach(n,(s=>this.getOverlay(t,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((s,i)=>{this.St(t,n,i)})),M.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),M.resolve()}getOverlaysForCollection(t,n,r){const s=Yn(),i=n.length+1,a=new et(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return M.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Ot(((h,d)=>h-d));const a=this.overlays.getIterator();for(;a.hasNext();){const h=a.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let d=i.get(h.largestBatchId);d===null&&(d=Yn(),i=i.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}const l=Yn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach(((h,d)=>l.set(h,d))),!(l.size()>=s)););return M.resolve(l)}St(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ow(n,r));let i=this.qr.get(n);i===void 0&&(i=pt(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(){this.sessionToken=re.EMPTY_BYTE_STRING}getSessionToken(t){return M.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(){this.Qr=new Wt(Xt.$r),this.Ur=new Wt(Xt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new Xt(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Gr(new Xt(t,n))}zr(t,n){t.forEach((r=>this.removeReference(r,n)))}jr(t){const n=new et(new Dt([])),r=new Xt(n,t),s=new Xt(n,t+1),i=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),i.push(a.key)})),i}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new et(new Dt([])),r=new Xt(n,t),s=new Xt(n,t+1);let i=pt();return this.Ur.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(t){const n=new Xt(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Xt{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return et.comparator(t.key,n.key)||dt(t.Yr,n.Yr)}static Kr(t,n){return dt(t.Yr,n.Yr)||et.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Wt(Xt.$r)}checkEmpty(t){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new iw(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Xt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return M.resolve(a)}lookupMutationBatch(t,n){return M.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?Al:this.tr-1)}getAllMutationBatches(t){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Xt(n,0),s=new Xt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(a=>{const l=this.Xr(a.Yr);i.push(l)})),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Wt(dt);return n.forEach((s=>{const i=new Xt(s,0),a=new Xt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],(l=>{r=r.add(l.Yr)}))})),M.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;et.isDocumentKey(i)||(i=i.child(""));const a=new Xt(new et(i),0);let l=new Wt(dt);return this.Zr.forEachWhile((c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===s&&(l=l.add(c.Yr)),!0)}),a),M.resolve(this.ti(l))}ti(t){const n=[];return t.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(t,n){At(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return M.forEach(n.mutations,(s=>{const i=new Xt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,n){const r=new Xt(n,0),s=this.Zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,M.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(t){this.ri=t,this.docs=(function(){return new Ot(et.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():ue.newInvalidDocument(n))}getEntries(t,n){let r=dn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ue.newInvalidDocument(s))})),M.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=dn();const a=n.path,l=new et(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:d}}=c.getNext();if(!a.isPrefixOf(h.path))break;h.path.length>a.length+1||ET(yT(d),r)<=0||(s.has(d.key)||So(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(t,n,r,s){st(9500)}ii(t,n){return M.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new Kw(this)}getSize(t){return M.resolve(this.size)}}class Kw extends Fw{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(r)})),M.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(t){this.persistence=t,this.si=new or((n=>Rl(n)),Cl),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.oi=0,this._i=new Ol,this.targetCount=0,this.ai=Fr.ur()}forEachTarget(t,n){return this.si.forEach(((r,s)=>n(s))),M.resolve()}getLastRemoteSnapshotVersion(t){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return M.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),M.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new Fr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,M.resolve()}updateTargetData(t,n){return this.Pr(n),M.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.si.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)})),M.waitFor(i).next((()=>s))}getTargetCount(t){return M.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return M.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),M.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(t,a))})),M.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),M.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return M.resolve(r)}containsKey(t,n){return M.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(t,n){this.ui={},this.overlays={},this.ci=new To(0),this.li=!1,this.li=!0,this.hi=new qw,this.referenceDelegate=t(this),this.Pi=new Ww(this),this.indexManager=new Dw,this.remoteDocumentCache=(function(s){return new zw(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Pw(n),this.Ii=new jw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new $w,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new Hw(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){Y("MemoryPersistence","Starting transaction:",t);const s=new Gw(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(t,n){return M.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,n))))}}class Gw extends TT{constructor(t){super(),this.currentSequenceNumber=t}}class Ml{constructor(t){this.persistence=t,this.Ri=new Ol,this.Vi=null}static mi(t){return new Ml(t)}get fi(){if(this.Vi)return this.Vi;throw st(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),M.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),M.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.fi,(r=>{const s=et.fromPath(r);return this.gi(t,s).next((i=>{i||n.removeEntry(s,it.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return M.or([()=>M.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class eo{constructor(t,n){this.persistence=t,this.pi=new or((r=>AT(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=Lw(this,n)}static mi(t,n){return new eo(t,n)}Ei(){}di(t){return M.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((s=>r+s))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}pr(t,n){return M.forEach(this.pi,((r,s)=>this.br(t,r,s).next((i=>i?M.resolve():n(s)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(t,(a=>this.br(t,a,n).next((l=>{l||(r++,i.removeEntry(a,it.min()))})))).next((()=>i.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),M.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),M.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),M.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),M.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Ci(t.data.value)),n}br(t,n,r){return M.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=s}static As(t,n){let r=pt(),s=pt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new kl(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return $E()?8:wT(BE())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ys(t,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ws(t,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new Qw;return this.Ss(t,n,a).next((l=>{if(i.result=l,this.Vs)return this.bs(t,n,a,l.size)}))})).next((()=>i.result))}bs(t,n,r,s){return r.documentReadCount<this.fs?(_r()<=_t.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",yr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),M.resolve()):(_r()<=_t.DEBUG&&Y("QueryEngine","Query:",yr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(_r()<=_t.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",yr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,We(n))):M.resolve())}ys(t,n){if(ah(n))return M.resolve(null);let r=We(n);return this.indexManager.getIndexType(t,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=qa(n,null,"F"),r=We(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((i=>{const a=pt(...i);return this.ps.getDocuments(t,a).next((l=>this.indexManager.getMinOffset(t,r).next((c=>{const h=this.Ds(n,l);return this.Cs(n,h,a,c.readTime)?this.ys(t,qa(n,null,"F")):this.vs(t,h,n,c)}))))})))))}ws(t,n,r,s){return ah(n)||s.isEqual(it.min())?M.resolve(null):this.ps.getDocuments(t,r).next((i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?M.resolve(null):(_r()<=_t.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),yr(n)),this.vs(t,a,n,_T(s,$s)).next((l=>l)))}))}Ds(t,n){let r=new Wt(Yd(t));return n.forEach(((s,i)=>{So(t,i)&&(r=r.add(i))})),r}Cs(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(t,n,r){return _r()<=_t.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",yr(n)),this.ps.getDocumentsMatchingQuery(t,n,Mn.min(),r)}vs(t,n,r,s){return this.ps.getDocumentsMatchingQuery(t,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll="LocalStore",Yw=3e8;class Jw{constructor(t,n,r,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Ot(dt),this.xs=new or((i=>Rl(i)),Cl),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Bw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function Zw(e,t,n,r){return new Jw(e,t,n,r)}async function Tp(e,t){const n=at(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],l=[];let c=pt();for(const h of s){a.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}for(const h of i){l.push(h.batchId);for(const d of h.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next((h=>({Ls:h,removedBatchIds:a,addedBatchIds:l})))}))}))}function tI(e,t){const n=at(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,c,h,d){const p=h.batch,g=p.keys();let E=M.resolve();return g.forEach((V=>{E=E.next((()=>d.getEntry(c,V))).next((N=>{const k=h.docVersions.get(V);At(k!==null,48541),N.version.compareTo(k)<0&&(p.applyToRemoteDocument(N,h),N.isValidDocument()&&(N.setReadTime(h.commitVersion),d.addEntry(N)))}))})),E.next((()=>l.mutationQueue.removeMutationBatch(c,p)))})(n,r,t,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let c=pt();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c})(t)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function wp(e){const t=at(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function eI(e,t){const n=at(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach(((d,p)=>{const g=s.get(p);if(!g)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,p).next((()=>n.Pi.addMatchingKeys(i,d.addedDocuments,p))));let E=g.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(p)!==null?E=E.withResumeToken(re.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):d.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(d.resumeToken,r)),s=s.insert(p,E),(function(N,k,q){return N.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=Yw?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(g,E,d)&&l.push(n.Pi.updateTargetData(i,E))}));let c=dn(),h=pt();if(t.documentUpdates.forEach((d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(nI(i,a,t.documentUpdates).next((d=>{c=d.ks,h=d.qs}))),!r.isEqual(it.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next((p=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(d)}return M.waitFor(l).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,c,h))).next((()=>c))})).then((i=>(n.Ms=s,i)))}function nI(e,t,n){let r=pt(),s=pt();return n.forEach((i=>r=r.add(i))),t.getEntries(e,r).next((i=>{let a=dn();return n.forEach(((l,c)=>{const h=i.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(it.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):Y(Ll,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)})),{ks:a,qs:s}}))}function rI(e,t){const n=at(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=Al),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function sI(e,t){const n=at(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,t).next((i=>i?(s=i,M.resolve(s)):n.Pi.allocateTargetId(r).next((a=>(s=new Sn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r}))}async function Ga(e,t,n){const r=at(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!Hr(a))throw a;Y(Ll,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function vh(e,t,n){const r=at(e);let s=it.min(),i=pt();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(c,h,d){const p=at(c),g=p.xs.get(d);return g!==void 0?M.resolve(p.Ms.get(g)):p.Pi.getTargetData(h,d)})(r,a,We(t)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next((c=>{i=c}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,t,n?s:it.min(),n?i:pt()))).next((l=>(iI(r,HT(t),l),{documents:l,Qs:i})))))}function iI(e,t,n){let r=e.Os.get(t)||it.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),e.Os.set(t,r)}class Th{constructor(){this.activeTargetIds=XT()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class oI{constructor(){this.Mo=new Th,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new Th,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="ConnectivityMonitor";class Ih{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Y(wh,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){Y(wh,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vi=null;function Qa(){return vi===null?vi=(function(){return 268435456+Math.round(2147483648*Math.random())})():vi++,"0x"+vi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="RestConnection",lI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cI{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Gi?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(t,n,r,s,i){const a=Qa(),l=this.zo(t,n.toUriEncodedString());Y(pa,`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:h}=new URL(l),d=El(h);return this.Jo(t,l,c,r,d).then((p=>(Y(pa,`Received RPC '${t}' ${a}: `,p),p)),(p=>{throw Or(pa,`RPC '${t}' ${a} failed with error: `,p,"url: ",l,"request:",r),p}))}Ho(t,n,r,s,i,a){return this.Go(t,n,r,s,i)}jo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+$r})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>t[i]=s)),r&&r.headers.forEach(((s,i)=>t[i]=s))}zo(t,n){const r=lI[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ae="WebChannelConnection";class hI extends cI{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,s,i){const a=Qa();return new Promise(((l,c)=>{const h=new bd;h.setWithCredentials(!0),h.listenOnce(Sd.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Ri.NO_ERROR:const p=h.getResponseJson();Y(ae,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),l(p);break;case Ri.TIMEOUT:Y(ae,`RPC '${t}' ${a} timed out`),c(new Z(F.DEADLINE_EXCEEDED,"Request time out"));break;case Ri.HTTP_ERROR:const g=h.getStatus();if(Y(ae,`RPC '${t}' ${a} failed with status:`,g,"response text:",h.getResponseText()),g>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const V=E?.error;if(V&&V.status&&V.message){const N=(function(q){const $=q.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf($)>=0?$:F.UNKNOWN})(V.status);c(new Z(N,V.message))}else c(new Z(F.UNKNOWN,"Server responded with status "+h.getStatus()))}else c(new Z(F.UNAVAILABLE,"Connection failed."));break;default:st(9055,{l_:t,streamId:a,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{Y(ae,`RPC '${t}' ${a} completed.`)}}));const d=JSON.stringify(s);Y(ae,`RPC '${t}' ${a} sending request:`,s),h.send(n,"POST",d,r,15)}))}T_(t,n,r){const s=Qa(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Pd(),l=Cd(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");Y(ae,`Creating RPC '${t}' stream ${s}: ${d}`,c);const p=a.createWebChannel(d,c);this.I_(p);let g=!1,E=!1;const V=new uI({Yo:k=>{E?Y(ae,`Not sending because RPC '${t}' stream ${s} is closed:`,k):(g||(Y(ae,`Opening RPC '${t}' stream ${s} transport.`),p.open(),g=!0),Y(ae,`RPC '${t}' stream ${s} sending:`,k),p.send(k))},Zo:()=>p.close()}),N=(k,q,$)=>{k.listen(q,(H=>{try{$(H)}catch(G){setTimeout((()=>{throw G}),0)}}))};return N(p,fs.EventType.OPEN,(()=>{E||(Y(ae,`RPC '${t}' stream ${s} transport opened.`),V.o_())})),N(p,fs.EventType.CLOSE,(()=>{E||(E=!0,Y(ae,`RPC '${t}' stream ${s} transport closed`),V.a_(),this.E_(p))})),N(p,fs.EventType.ERROR,(k=>{E||(E=!0,Or(ae,`RPC '${t}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),V.a_(new Z(F.UNAVAILABLE,"The operation could not be completed")))})),N(p,fs.EventType.MESSAGE,(k=>{if(!E){const q=k.data[0];At(!!q,16349);const $=q,H=$?.error||$[0]?.error;if(H){Y(ae,`RPC '${t}' stream ${s} received error:`,H);const G=H.status;let lt=(function(y){const T=Bt[y];if(T!==void 0)return cp(T)})(G),ft=H.message;lt===void 0&&(lt=F.INTERNAL,ft="Unknown error status: "+G+" with message "+H.message),E=!0,V.a_(new Z(lt,ft)),p.close()}else Y(ae,`RPC '${t}' stream ${s} received:`,q),V.u_(q)}})),N(l,Rd.STAT_EVENT,(k=>{k.stat===La.PROXY?Y(ae,`RPC '${t}' stream ${s} detected buffering proxy`):k.stat===La.NOPROXY&&Y(ae,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{V.__()}),0),V}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function ma(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vo(e){return new mw(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(t,n,r=1e3,s=1.5,i=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Y("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah="PersistentStream";class Ap{constructor(t,n,r,s,i,a,l,c){this.Mi=t,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Ip(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(fn(n.toString()),fn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{t((()=>{const s=new Z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return Y(Ah,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(Y(Ah,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class fI extends Ap{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=yw(this.serializer,t),r=(function(i){if(!("targetChange"in i))return it.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?it.min():a.readTime?Ge(a.readTime):it.min()})(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=Wa(this.serializer),n.addTarget=(function(i,a){let l;const c=a.target;if(l=$a(c)?{documents:Tw(i,c)}:{query:ww(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=fp(i,a.resumeToken);const h=Ha(i,a.expectedCount);h!==null&&(l.expectedCount=h)}else if(a.snapshotVersion.compareTo(it.min())>0){l.readTime=to(i,a.snapshotVersion.toTimestamp());const h=Ha(i,a.expectedCount);h!==null&&(l.expectedCount=h)}return l})(this.serializer,t);const r=Aw(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=Wa(this.serializer),n.removeTarget=t,this.q_(n)}}class dI extends Ap{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return At(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,At(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){At(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=vw(t.writeResults,t.commitTime),r=Ge(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=Wa(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>Ew(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{}class mI extends pI{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(t,za(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(F.UNKNOWN,i.toString())}))}Ho(t,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Ho(t,za(n,r),s,a,l,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(F.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class gI{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(fn(n),this.aa=!1):Y("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr="RemoteStore";class _I{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{lr(this)&&(Y(rr,"Restarting streams for network reachability change."),await(async function(c){const h=at(c);h.Ea.add(4),await Zs(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Do(h)})(this))}))})),this.Ra=new gI(r,s)}}async function Do(e){if(lr(e))for(const t of e.da)await t(!0)}async function Zs(e){for(const t of e.da)await t(!1)}function bp(e,t){const n=at(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),jl(n)?Bl(n):zr(n).O_()&&Ul(n,t))}function Fl(e,t){const n=at(e),r=zr(n);n.Ia.delete(t),r.O_()&&Sp(n,t),n.Ia.size===0&&(r.O_()?r.L_():lr(n)&&n.Ra.set("Unknown"))}function Ul(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(it.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}zr(e).Y_(t)}function Sp(e,t){e.Va.Ue(t),zr(e).Z_(t)}function Bl(e){e.Va=new hw({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),zr(e).start(),e.Ra.ua()}function jl(e){return lr(e)&&!zr(e).x_()&&e.Ia.size>0}function lr(e){return at(e).Ea.size===0}function Rp(e){e.Va=void 0}async function yI(e){e.Ra.set("Online")}async function EI(e){e.Ia.forEach(((t,n)=>{Ul(e,t)}))}async function vI(e,t){Rp(e),jl(e)?(e.Ra.ha(t),Bl(e)):e.Ra.set("Unknown")}async function TI(e,t,n){if(e.Ra.set("Online"),t instanceof hp&&t.state===2&&t.cause)try{await(async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))})(e,t)}catch(r){Y(rr,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await no(e,r)}else if(t instanceof Di?e.Va.Ze(t):t instanceof up?e.Va.st(t):e.Va.tt(t),!n.isEqual(it.min()))try{const r=await wp(e.localStore);n.compareTo(r)>=0&&await(function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach(((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ia.get(h);d&&i.Ia.set(h,d.withResumeToken(c.resumeToken,a))}})),l.targetMismatches.forEach(((c,h)=>{const d=i.Ia.get(c);if(!d)return;i.Ia.set(c,d.withResumeToken(re.EMPTY_BYTE_STRING,d.snapshotVersion)),Sp(i,c);const p=new Sn(d.target,c,h,d.sequenceNumber);Ul(i,p)})),i.remoteSyncer.applyRemoteEvent(l)})(e,n)}catch(r){Y(rr,"Failed to raise snapshot:",r),await no(e,r)}}async function no(e,t,n){if(!Hr(t))throw t;e.Ea.add(1),await Zs(e),e.Ra.set("Offline"),n||(n=()=>wp(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Y(rr,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Do(e)}))}function Cp(e,t){return t().catch((n=>no(e,n,t)))}async function xo(e){const t=at(e),n=Un(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Al;for(;wI(t);)try{const s=await rI(t.localStore,r);if(s===null){t.Ta.length===0&&n.L_();break}r=s.batchId,II(t,s)}catch(s){await no(t,s)}Pp(t)&&Vp(t)}function wI(e){return lr(e)&&e.Ta.length<10}function II(e,t){e.Ta.push(t);const n=Un(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Pp(e){return lr(e)&&!Un(e).x_()&&e.Ta.length>0}function Vp(e){Un(e).start()}async function AI(e){Un(e).ra()}async function bI(e){const t=Un(e);for(const n of e.Ta)t.ea(n.mutations)}async function SI(e,t,n){const r=e.Ta.shift(),s=Dl.from(r,t,n);await Cp(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await xo(e)}async function RI(e,t){t&&Un(e).X_&&await(async function(r,s){if((function(a){return lw(a)&&a!==F.ABORTED})(s.code)){const i=r.Ta.shift();Un(r).B_(),await Cp(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await xo(r)}})(e,t),Pp(e)&&Vp(e)}async function bh(e,t){const n=at(e);n.asyncQueue.verifyOperationInProgress(),Y(rr,"RemoteStore received new credentials");const r=lr(n);n.Ea.add(3),await Zs(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Do(n)}async function CI(e,t){const n=at(e);t?(n.Ea.delete(2),await Do(n)):t||(n.Ea.add(2),await Zs(n),n.Ra.set("Unknown"))}function zr(e){return e.ma||(e.ma=(function(n,r,s){const i=at(n);return i.sa(),new fI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Xo:yI.bind(null,e),t_:EI.bind(null,e),r_:vI.bind(null,e),H_:TI.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),jl(e)?Bl(e):e.Ra.set("Unknown")):(await e.ma.stop(),Rp(e))}))),e.ma}function Un(e){return e.fa||(e.fa=(function(n,r,s){const i=at(n);return i.sa(),new dI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:AI.bind(null,e),r_:RI.bind(null,e),ta:bI.bind(null,e),na:SI.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await xo(e)):(await e.fa.stop(),e.Ta.length>0&&(Y(rr,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new $l(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(F.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ql(e,t){if(fn("AsyncQueue",`${t}: ${e}`),Hr(e))return new Z(F.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{static emptySet(t){return new Cr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||et.comparator(n.key,r.key):(n,r)=>et.comparator(n.key,r.key),this.keyedMap=ds(),this.sortedSet=new Ot(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Cr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Cr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(){this.ga=new Ot(et.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):st(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Ur{constructor(t,n,r,s,i,a,l,c,h){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new Ur(t,n,Cr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&bo(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class VI{constructor(){this.queries=Rh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=at(n),i=s.queries;s.queries=Rh(),i.forEach(((a,l)=>{for(const c of l.Sa)c.onError(r)}))})(this,new Z(F.ABORTED,"Firestore shutting down"))}}function Rh(){return new or((e=>Xd(e)),bo)}async function DI(e,t){const n=at(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new PI,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=ql(a,`Initialization of query '${yr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Hl(n)}async function xI(e,t){const n=at(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(t);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function NI(e,t){const n=at(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&Hl(n)}function OI(e,t,n){const r=at(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function Hl(e){e.Ca.forEach((t=>{t.next()}))}var Xa,Ch;(Ch=Xa||(Xa={})).Ma="default",Ch.Cache="cache";class MI{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Ur(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Ur.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Xa.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(t){this.key=t}}class xp{constructor(t){this.key=t}}class kI{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=pt(),this.mutatedKeys=pt(),this.eu=Yd(t),this.tu=new Cr(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new Sh,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,h=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((d,p)=>{const g=s.get(d),E=So(this.query,p)?p:null,V=!!g&&this.mutatedKeys.has(g.key),N=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let k=!1;g&&E?g.data.isEqual(E.data)?V!==N&&(r.track({type:3,doc:E}),k=!0):this.su(g,E)||(r.track({type:2,doc:E}),k=!0,(c&&this.eu(E,c)>0||h&&this.eu(E,h)<0)&&(l=!0)):!g&&E?(r.track({type:0,doc:E}),k=!0):g&&!E&&(r.track({type:1,doc:g}),k=!0,(c||h)&&(l=!0)),k&&(E?(a=a.add(E),i=N?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort(((d,p)=>(function(E,V){const N=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st(20277,{Rt:k})}};return N(E)-N(V)})(d.type,p.type)||this.eu(d.doc,p.doc))),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,h=c!==this.Za;return this.Za=c,a.length!==0||h?{snapshot:new Ur(this.query,t.tu,i,a,t.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Sh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=pt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return t.forEach((r=>{this.Xa.has(r)||n.push(new xp(r))})),this.Xa.forEach((r=>{t.has(r)||n.push(new Dp(r))})),n}cu(t){this.Ya=t.Qs,this.Xa=pt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Ur.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const zl="SyncEngine";class LI{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class FI{constructor(t){this.key=t,this.hu=!1}}class UI{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new or((l=>Xd(l)),bo),this.Iu=new Map,this.Eu=new Set,this.du=new Ot(et.comparator),this.Au=new Map,this.Ru=new Ol,this.Vu={},this.mu=new Map,this.fu=Fr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function BI(e,t,n=!0){const r=Fp(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Np(r,t,n,!0),s}async function jI(e,t){const n=Fp(e);await Np(n,t,!0,!1)}async function Np(e,t,n,r){const s=await sI(e.localStore,We(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await $I(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&bp(e.remoteStore,s),l}async function $I(e,t,n,r,s){e.pu=(p,g,E)=>(async function(N,k,q,$){let H=k.view.ru(q);H.Cs&&(H=await vh(N.localStore,k.query,!1).then((({documents:I})=>k.view.ru(I,H))));const G=$&&$.targetChanges.get(k.targetId),lt=$&&$.targetMismatches.get(k.targetId)!=null,ft=k.view.applyChanges(H,N.isPrimaryClient,G,lt);return Vh(N,k.targetId,ft.au),ft.snapshot})(e,p,g,E);const i=await vh(e.localStore,t,!0),a=new kI(t,i.Qs),l=a.ru(i.documents),c=Js.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),h=a.applyChanges(l,e.isPrimaryClient,c);Vh(e,n,h.au);const d=new LI(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),h.snapshot}async function qI(e,t,n){const r=at(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((a=>!bo(a,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ga(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Fl(r.remoteStore,s.targetId),Ya(r,s.targetId)})).catch(qr)):(Ya(r,s.targetId),await Ga(r.localStore,s.targetId,!0))}async function HI(e,t){const n=at(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fl(n.remoteStore,r.targetId))}async function zI(e,t,n){const r=JI(e);try{const s=await(function(a,l){const c=at(a),h=xt.now(),d=l.reduce(((E,V)=>E.add(V.key)),pt());let p,g;return c.persistence.runTransaction("Locally write mutations","readwrite",(E=>{let V=dn(),N=pt();return c.Ns.getEntries(E,d).next((k=>{V=k,V.forEach(((q,$)=>{$.isValidDocument()||(N=N.add(q))}))})).next((()=>c.localDocuments.getOverlayedDocuments(E,V))).next((k=>{p=k;const q=[];for(const $ of l){const H=rw($,p.get($.key).overlayedDocument);H!=null&&q.push(new ar($.key,H,qd(H.value.mapValue),ln.exists(!0)))}return c.mutationQueue.addMutationBatch(E,h,q,l)})).next((k=>{g=k;const q=k.applyToLocalDocumentSet(p,N);return c.documentOverlayCache.saveOverlays(E,k.batchId,q)}))})).then((()=>({batchId:g.batchId,changes:Zd(p)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),(function(a,l,c){let h=a.Vu[a.currentUser.toKey()];h||(h=new Ot(dt)),h=h.insert(l,c),a.Vu[a.currentUser.toKey()]=h})(r,s.batchId,n),await ti(r,s.changes),await xo(r.remoteStore)}catch(s){const i=ql(s,"Failed to persist write");n.reject(i)}}async function Op(e,t){const n=at(e);try{const r=await eI(n.localStore,t);t.targetChanges.forEach(((s,i)=>{const a=n.Au.get(i);a&&(At(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?At(a.hu,14607):s.removedDocuments.size>0&&(At(a.hu,42227),a.hu=!1))})),await ti(n,r,t)}catch(r){await qr(r)}}function Ph(e,t,n){const r=at(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const c=at(a);c.onlineState=l;let h=!1;c.queries.forEach(((d,p)=>{for(const g of p.Sa)g.va(l)&&(h=!0)})),h&&Hl(c)})(r.eventManager,t),s.length&&r.Pu.H_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function KI(e,t,n){const r=at(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let a=new Ot(et.comparator);a=a.insert(i,ue.newNoDocument(i,it.min()));const l=pt().add(i),c=new Po(it.min(),new Map,new Ot(dt),a,l);await Op(r,c),r.du=r.du.remove(i),r.Au.delete(t),Kl(r)}else await Ga(r.localStore,t,!1).then((()=>Ya(r,t,n))).catch(qr)}async function WI(e,t){const n=at(e),r=t.batch.batchId;try{const s=await tI(n.localStore,t);kp(n,r,null),Mp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ti(n,s)}catch(s){await qr(s)}}async function GI(e,t,n){const r=at(e);try{const s=await(function(a,l){const c=at(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let d;return c.mutationQueue.lookupMutationBatch(h,l).next((p=>(At(p!==null,37113),d=p.keys(),c.mutationQueue.removeMutationBatch(h,p)))).next((()=>c.mutationQueue.performConsistencyCheck(h))).next((()=>c.documentOverlayCache.removeOverlaysForBatchId(h,d,l))).next((()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,d))).next((()=>c.localDocuments.getDocuments(h,d)))}))})(r.localStore,t);kp(r,t,n),Mp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ti(r,s)}catch(s){await qr(s)}}function Mp(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function kp(e,t,n){const r=at(e);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function Ya(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((r=>{e.Ru.containsKey(r)||Lp(e,r)}))}function Lp(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Fl(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Kl(e))}function Vh(e,t,n){for(const r of n)r instanceof Dp?(e.Ru.addReference(r.key,t),QI(e,r)):r instanceof xp?(Y(zl,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Lp(e,r.key)):st(19791,{wu:r})}function QI(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Y(zl,"New document in limbo: "+n),e.Eu.add(r),Kl(e))}function Kl(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new et(Dt.fromString(t)),r=e.fu.next();e.Au.set(r,new FI(n)),e.du=e.du.insert(n,r),bp(e.remoteStore,new Sn(We(Pl(n.path)),r,"TargetPurposeLimboResolution",To.ce))}}async function ti(e,t,n){const r=at(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,c)=>{a.push(r.pu(c,t,n).then((h=>{if((h||n)&&r.isPrimaryClient){const d=h?!h.fromCache:n?.targetChanges.get(c.targetId)?.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(h){s.push(h);const d=kl.As(c.targetId,h);i.push(d)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(c,h){const d=at(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>M.forEach(h,(g=>M.forEach(g.Es,(E=>d.persistence.referenceDelegate.addReference(p,g.targetId,E))).next((()=>M.forEach(g.ds,(E=>d.persistence.referenceDelegate.removeReference(p,g.targetId,E)))))))))}catch(p){if(!Hr(p))throw p;Y(Ll,"Failed to update sequence numbers: "+p)}for(const p of h){const g=p.targetId;if(!p.fromCache){const E=d.Ms.get(g),V=E.snapshotVersion,N=E.withLastLimboFreeSnapshotVersion(V);d.Ms=d.Ms.insert(g,N)}}})(r.localStore,i))}async function XI(e,t){const n=at(e);if(!n.currentUser.isEqual(t)){Y(zl,"User change. New user:",t.toKey());const r=await Tp(n.localStore,t);n.currentUser=t,(function(i,a){i.mu.forEach((l=>{l.forEach((c=>{c.reject(new Z(F.CANCELLED,a))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ti(n,r.Ls)}}function YI(e,t){const n=at(e),r=n.Au.get(t);if(r&&r.hu)return pt().add(r.key);{let s=pt();const i=n.Iu.get(t);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function Fp(e){const t=at(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Op.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=YI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=KI.bind(null,t),t.Pu.H_=NI.bind(null,t.eventManager),t.Pu.yu=OI.bind(null,t.eventManager),t}function JI(e){const t=at(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=WI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=GI.bind(null,t),t}class ro{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Vo(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return Zw(this.persistence,new Xw,t.initialUser,this.serializer)}Cu(t){return new vp(Ml.mi,this.serializer)}Du(t){return new oI}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ro.provider={build:()=>new ro};class ZI extends ro{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){At(this.persistence.referenceDelegate instanceof eo,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Mw(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?ve.withCacheSize(this.cacheSizeBytes):ve.DEFAULT;return new vp((r=>eo.mi(r,n)),this.serializer)}}class Ja{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ph(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XI.bind(null,this.syncEngine),await CI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new VI})()}createDatastore(t){const n=Vo(t.databaseInfo.databaseId),r=(function(i){return new hI(i)})(t.databaseInfo);return(function(i,a,l,c){return new mI(i,a,l,c)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,s,i,a,l){return new _I(r,s,i,a,l)})(this.localStore,this.datastore,t.asyncQueue,(n=>Ph(this.syncEngine,n,0)),(function(){return Ih.v()?new Ih:new aI})())}createSyncEngine(t,n){return(function(s,i,a,l,c,h,d){const p=new UI(s,i,a,l,c,h);return d&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const r=at(n);Y(rr,"RemoteStore shutting down."),r.Ea.add(5),await Zs(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Ja.provider={build:()=>new Ja};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):fn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bn="FirestoreClient";class eA{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=le.UNAUTHENTICATED,this.clientId=wl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{Y(Bn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(Y(Bn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=ql(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function ga(e,t){e.asyncQueue.verifyOperationInProgress(),Y(Bn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Tp(t.localStore,s),r=s)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Dh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await nA(e);Y(Bn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>bh(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,s)=>bh(t.remoteStore,s))),e._onlineComponents=t}async function nA(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Y(Bn,"Using user provided OfflineComponentProvider");try{await ga(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Or("Error using user provided cache. Falling back to memory cache: "+n),await ga(e,new ro)}}else Y(Bn,"Using default OfflineComponentProvider"),await ga(e,new ZI(void 0));return e._offlineComponents}async function Up(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Y(Bn,"Using user provided OnlineComponentProvider"),await Dh(e,e._uninitializedComponentsProvider._online)):(Y(Bn,"Using default OnlineComponentProvider"),await Dh(e,new Ja))),e._onlineComponents}function rA(e){return Up(e).then((t=>t.syncEngine))}async function xh(e){const t=await Up(e),n=t.eventManager;return n.onListen=BI.bind(null,t.syncEngine),n.onUnlisten=qI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=jI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=HI.bind(null,t.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jp="firestore.googleapis.com",Oh=!0;class Mh{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jp,this.ssl=Oh}else this.host=t.host,this.ssl=t.ssl??Oh;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=Ep;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<Nw)throw new Z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}gT("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bp(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class No{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Mh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Mh(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new oT;switch(r.type){case"firstParty":return new uT(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=Nh.get(n);r&&(Y("ComponentProvider","Removing Datastore"),Nh.delete(n),r.terminate())})(this),Promise.resolve()}}function sA(e,t,n,r={}){e=Ss(e,No);const s=El(t),i=e._getSettings(),a={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(ME(`https://${l}`),UE("Firestore",!0)),i.host!==jp&&i.host!==l&&Or("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Hi(c,a)&&(e._setSettings(c),r.mockUserToken)){let h,d;if(typeof r.mockUserToken=="string")h=r.mockUserToken,d=le.MOCK_USER;else{h=kE(r.mockUserToken,e._app?.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new Z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new le(p)}e._authCredentials=new aT(new Dd(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Oo(this.firestore,t,this._query)}}class Yt{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Yt(this.firestore,t,this._key)}toJSON(){return{type:Yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(Xs(n,Yt._jsonSchema))return new Yt(t,r||null,new et(Dt.fromString(n.referencePath)))}}Yt._jsonSchemaVersion="firestore/documentReference/1.0",Yt._jsonSchema={type:$t("string",Yt._jsonSchemaVersion),referencePath:$t("string")};class Dn extends Oo{constructor(t,n,r){super(t,n,Pl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Yt(this.firestore,null,new et(t))}withConverter(t){return new Dn(this.firestore,t,this._path)}}function kh(e,t,...n){if(e=Nr(e),xd("collection","path",t),e instanceof No){const r=Dt.fromString(t,...n);return Gu(r),new Dn(e,null,r)}{if(!(e instanceof Yt||e instanceof Dn))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Dt.fromString(t,...n));return Gu(r),new Dn(e.firestore,null,r)}}function iA(e,t,...n){if(e=Nr(e),arguments.length===1&&(t=wl.newId()),xd("doc","path",t),e instanceof No){const r=Dt.fromString(t,...n);return Wu(r),new Yt(e,null,new et(r))}{if(!(e instanceof Yt||e instanceof Dn))throw new Z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Dt.fromString(t,...n));return Wu(r),new Yt(e.firestore,e instanceof Dn?e.converter:null,new et(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="AsyncQueue";class Fh{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Ip(this,"async_queue_retry"),this._c=()=>{const r=ma();r&&Y(Lh,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=ma();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=ma();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Zn;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Hr(t))throw t;Y(Lh,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,fn("INTERNAL UNHANDLED ERROR: ",Uh(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=$l.createAndSchedule(this,t,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&st(47125,{Pc:Uh(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function Uh(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(e){return(function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1})(e,["next","error","complete"])}class so extends No{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new Fh,this._persistenceKey=s?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Fh(t),this._firestoreClient=void 0,await t}}}function oA(e,t){const n=typeof e=="object"?e:Qv(),r=typeof e=="string"?e:Gi,s=Hv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=NE("firestore");i&&sA(s,...i)}return s}function $p(e){if(e._terminated)throw new Z(F.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||aA(e),e._firestoreClient}function aA(e){const t=e._freezeSettings(),n=(function(s,i,a,l){return new RT(s,i,a,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,Bp(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new eA(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(s){const i=s?._online.build();return{_offline:s?._offline.build(i),_online:i}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Pe(re.fromBase64String(t))}catch(n){throw new Z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Pe(re.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Pe._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Xs(t,Pe._jsonSchema))return Pe.fromBase64String(t.bytes)}}Pe._jsonSchemaVersion="firestore/bytes/1.0",Pe._jsonSchema={type:$t("string",Pe._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ne(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return dt(this._lat,t._lat)||dt(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qe._jsonSchemaVersion}}static fromJSON(t){if(Xs(t,Qe._jsonSchema))return new Qe(t.latitude,t.longitude)}}Qe._jsonSchemaVersion="firestore/geoPoint/1.0",Qe._jsonSchema={type:$t("string",Qe._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Xe._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Xs(t,Xe._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Xe(t.vectorValues);throw new Z(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Xe._jsonSchemaVersion="firestore/vectorValue/1.0",Xe._jsonSchema={type:$t("string",Xe._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=/^__.*__$/;class cA{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new ar(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ys(t,this.data,n,this.fieldTransforms)}}function Hp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st(40011,{Ac:e})}}class Gl{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Gl({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){const n=this.path?.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return io(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(Hp(this.Ac)&&lA.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class uA{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Vo(t)}Cc(t,n,r,s=!1){return new Gl({Ac:t,methodName:n,Dc:r,path:ne.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hA(e){const t=e._freezeSettings(),n=Vo(e._databaseId);return new uA(e._databaseId,!!t.ignoreUndefinedProperties,n)}function fA(e,t,n,r,s,i={}){const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);Gp("Data must be an object, but it was:",a,r);const l=Kp(r,a);let c,h;if(i.merge)c=new ke(a.fieldMask),h=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const p of i.mergeFields){const g=dA(t,p,n);if(!a.contains(g))throw new Z(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);mA(d,g)||d.push(g)}c=new ke(d),h=a.fieldTransforms.filter((p=>c.covers(p.field)))}else c=null,h=a.fieldTransforms;return new cA(new Ce(l),c,h)}function zp(e,t){if(Wp(e=Nr(e)))return Gp("Unsupported field value:",t,e),Kp(e,t);if(e instanceof qp)return(function(r,s){if(!Hp(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const l of r){let c=zp(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}})(e,t)}return(function(r,s){if((r=Nr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=xt.fromDate(r);return{timestampValue:to(s.serializer,i)}}if(r instanceof xt){const i=new xt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:to(s.serializer,i)}}if(r instanceof Qe)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Pe)return{bytesValue:fp(s.serializer,r._byteString)};if(r instanceof Yt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Nl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Xe)return(function(a,l){return{mapValue:{fields:{[jd]:{stringValue:$d},[Qi]:{arrayValue:{values:a.toArray().map((h=>{if(typeof h!="number")throw l.Sc("VectorValues must only contain numeric values.");return Vl(l.serializer,h)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${Il(r)}`)})(e,t)}function Kp(e,t){const n={};return Md(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ir(e,((r,s)=>{const i=zp(s,t.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function Wp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof xt||e instanceof Qe||e instanceof Pe||e instanceof Yt||e instanceof qp||e instanceof Xe)}function Gp(e,t,n){if(!Wp(n)||!Nd(n)){const r=Il(n);throw r==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function dA(e,t,n){if((t=Nr(t))instanceof Wl)return t._internalPath;if(typeof t=="string")return Qp(e,t);throw io("Field path arguments must be of type string or ",e,!1,void 0,n)}const pA=new RegExp("[~\\*/\\[\\]]");function Qp(e,t,n){if(t.search(pA)>=0)throw io(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Wl(...t.split("."))._internalPath}catch{throw io(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function io(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new Z(F.INVALID_ARGUMENT,l+e+c)}function mA(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new gA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Yp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class gA extends Xp{data(){return super.data()}}function Yp(e,t){return typeof t=="string"?Qp(e,t):t instanceof Wl?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yA{convertValue(t,n="none"){switch(Fn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return kt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Ln(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw st(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return ir(t,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(t){const n=t.fields?.[Qi].arrayValue?.values?.map((r=>kt(r.doubleValue)));return new Xe(n)}convertGeoPoint(t){return new Qe(kt(t.latitude),kt(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Io(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(qs(t));default:return null}}convertTimestamp(t){const n=kn(t);return new xt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Dt.fromString(t);At(yp(r),9688,{name:t});const s=new Hs(r.get(1),r.get(3)),i=new et(r.popFirst(5));return s.isEqual(n)||fn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EA(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class ms{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class tr extends Xp{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new xi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Yp("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=tr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}tr._jsonSchemaVersion="firestore/documentSnapshot/1.0",tr._jsonSchema={type:$t("string",tr._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class xi extends tr{data(t={}){return super.data(t)}}class Pr{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new ms(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new xi(this._firestore,this._userDataWriter,r.key,r,new ms(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((l=>{const c=new xi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ms(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const c=new xi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ms(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let h=-1,d=-1;return l.type!==0&&(h=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:vA(l.type),doc:c,oldIndex:h,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Z(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Pr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=wl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function vA(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st(61501,{type:e})}}Pr._jsonSchemaVersion="firestore/querySnapshot/1.0",Pr._jsonSchema={type:$t("string",Pr._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};class Jp extends yA{constructor(t){super(),this.firestore=t}convertBytes(t){return new Pe(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}function TA(e,t){const n=Ss(e.firestore,so),r=iA(e),s=EA(e.converter,t);return IA(n,[fA(hA(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,ln.exists(!1))]).then((()=>r))}function wA(e,...t){e=Nr(e);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||Bh(t[r])||(n=t[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(Bh(t[r])){const c=t[r];t[r]=c.next?.bind(c),t[r+1]=c.error?.bind(c),t[r+2]=c.complete?.bind(c)}let i,a,l;if(e instanceof Yt)a=Ss(e.firestore,so),l=Pl(e._key.path),i={next:c=>{t[r]&&t[r](AA(a,e,c))},error:t[r+1],complete:t[r+2]};else{const c=Ss(e,Oo);a=Ss(c.firestore,so),l=c._query;const h=new Jp(a);i={next:d=>{t[r]&&t[r](new Pr(a,h,c,d))},error:t[r+1],complete:t[r+2]},_A(e._query)}return(function(h,d,p,g){const E=new tA(g),V=new MI(d,E,p);return h.asyncQueue.enqueueAndForget((async()=>DI(await xh(h),V))),()=>{E.Nu(),h.asyncQueue.enqueueAndForget((async()=>xI(await xh(h),V)))}})($p(a),l,s,i)}function IA(e,t){return(function(r,s){const i=new Zn;return r.asyncQueue.enqueueAndForget((async()=>zI(await rA(r),s,i))),i.promise})($p(e),t)}function AA(e,t,n){const r=n.docs.get(t._key),s=new Jp(e);return new tr(e,s,t._key,r,new ms(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(s){$r=s})(Gv),Ki(new Bs("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new so(new lT(r.getProvider("auth-internal")),new hT(a,r.getProvider("app-check-internal")),(function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hs(h.options.projectId,d)})(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),Rr(qu,Hu,t),Rr(qu,Hu,"esm2020")})();var bA="firebase",SA="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rr(bA,SA,"app");const RA={apiKey:"AIzaSyAa63fIRC13pBLx8srTACQlephYCt7ZN38",authDomain:"portfolio-bf53e.firebaseapp.com",projectId:"portfolio-bf53e",storageBucket:"portfolio-bf53e.firebasestorage.app",messagingSenderId:"165454941871",appId:"1:165454941871:web:7d97ddc12963c79c730e5a",measurementId:"G-NDD7D40096"},CA=Td(RA),jh=oA(CA);var PA=new Date;const VA=e=>e.toLocaleDateString("en-CA"),DA={data(){return{name:"",comment:"",comments:[],email:"",message:"",status:"",isCommenting:null}},mounted(){const e=kh(jh,"comments");wA(e,t=>{const n=t.docs.map(r=>r.data());console.log(" Firestore comments:",n),this.comments=n},t=>{console.error(" Firestore error:",t)})},methods:{async addComment(e){e.preventDefault(),!(!this.name||!this.comment)&&(console.log("running"),await TA(kh(jh,"comments"),{name:this.name,comment:this.comment,createdAt:VA(PA)}),console.log("commented"),this.name="",this.comment="")},async sendEmail(){this.status="Sending...";try{await wE.send("service_t1ywmsn","template_asi0i9v",{from_email:this.email,message:this.message},"dkOakACNLQcKxYR1B"),this.status=" Message sent successfully!",this.email="",this.message=""}catch(e){console.error("EmailJS Error:",e),this.status=" Failed to send message. Try again later."}}}},xA={id:"contactSection"},NA={id:"main"},OA={id:"tabSection"},MA={key:1},kA={key:2,id:"commentsList"},LA={id:"username"},FA={key:0,class:"form-status"};function UA(e,t,n,r,s,i){return jt(),Ht("div",xA,[wt("div",NA,[wt("div",OA,[wt("button",{onClick:t[0]||(t[0]=a=>s.isCommenting=!1),class:er([s.isCommenting?"nonActiveButton":"activeButton","tabs"])},"Contact Me",2),wt("button",{onClick:t[1]||(t[1]=a=>s.isCommenting=!0),class:er([s.isCommenting?"activeButton":"nonActiveButton","tabs"])},"Comment",2)]),s.isCommenting?(jt(),Ht("form",{key:0,onSubmit:t[4]||(t[4]=hu((...a)=>i.addComment&&i.addComment(...a),["prevent"])),class:"contact-form"},[t[8]||(t[8]=wt("h1",null,"Comment",-1)),pi(wt("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=a=>s.name=a),placeholder:"username",required:"",class:"form-input"},null,512),[[mi,s.name]]),pi(wt("textarea",{"onUpdate:modelValue":t[3]||(t[3]=a=>s.comment=a),id:"comment",required:"",class:"form-textarea"},null,512),[[mi,s.comment]]),t[9]||(t[9]=wt("button",{type:"submit",class:"form-button"},"Add Comment",-1))],32)):cs("",!0),s.isCommenting?(jt(),Ht("h2",MA,"Comments")):cs("",!0),s.isCommenting?(jt(),Ht("ul",kA,[(jt(!0),Ht(Te,null,Fi(s.comments,(a,l)=>(jt(),Ht("li",{key:l,class:"commentItem"},[wt("strong",LA,Me(a.name)+":",1),wt("p",null,Me(a.comment),1)]))),128))])):cs("",!0),s.isCommenting?cs("",!0):(jt(),Ht("form",{key:3,onSubmit:t[7]||(t[7]=hu((...a)=>i.sendEmail&&i.sendEmail(...a),["prevent"])),class:"contact-form"},[t[10]||(t[10]=wt("h1",null,"Contact Me",-1)),pi(wt("input",{type:"email","onUpdate:modelValue":t[5]||(t[5]=a=>s.email=a),placeholder:"Your Email",required:"",class:"form-input"},null,512),[[mi,s.email]]),pi(wt("textarea",{"onUpdate:modelValue":t[6]||(t[6]=a=>s.message=a),placeholder:"Your Message",required:"",class:"form-textarea"},null,512),[[mi,s.message]]),t[11]||(t[11]=wt("button",{type:"submit",class:"form-button"},"Send Message",-1)),s.status?(jt(),Ht("p",FA,Me(s.status),1)):cs("",!0)],32))])])}const BA=Br(DA,[["render",UA],["__scopeId","data-v-627e38a2"]]),jA={id:"main"},$A={__name:"App",setup(e){return(t,n)=>(jt(),Ht(Te,null,[wt("div",jA,[zt(Qy),zt(hd)]),zt(fE,{class:"template-component"}),zt(_E),zt(BA,Vm(Kf(t.isCommenting)),null,16)],64))}},qA=Br($A,[["__scopeId","data-v-7efc26c0"]]),HA="modulepreload",zA=function(e){return"/portfolioWebsite/"+e},$h={},KA=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(h){return Promise.all(h.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");s=c(n.map(h=>{if(h=zA(h),h in $h)return;$h[h]=!0;const d=h.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":HA,d||(g.as="script"),g.crossOrigin="",g.href=h,l&&g.setAttribute("nonce",l),document.head.appendChild(g),d)return new Promise((E,V)=>{g.addEventListener("load",E),g.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},WA=Hy({history:Ey("/portfolioWebsite/"),routes:[{path:"/",name:"home",component:hd},{path:"/about",name:"about",component:()=>KA(()=>import("./AboutView-DhpRco1G.js"),[])}]}),Zp=B_(qA);Zp.use(WA);Zp.mount("#app");export{Br as _,wt as a,Ht as c,jt as o};
